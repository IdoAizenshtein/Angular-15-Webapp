<ng-container
        *ngIf="
    userService?.appData?.userData?.companySelect &&
    userService?.appData?.userData?.companySelect?.supplierJournalItem
  "
>
    <ng-container
            *ngIf="!journalTransComponent.fileScanView; else fileScanViewTemp"
    >
        <div
            #baseFilters
            (click)="handleClick($event)"
            class="filterRow suppliersAndCustomersTitles"
            style="
        margin-top: 10px;
        margin-bottom: 20px;
        justify-content: space-between;
        align-items: flex-end;
      "
        >
            <div style="display: flex">
                <ul class="tabs">
                    <li
                            (click)="setStatus('WAIT_FOR_CONFIRM')"
                            [class.active]="fileStatus === 'WAIT_FOR_CONFIRM'"
                    >
                        לאישור
                        <ng-container
                                *ngIf="countStatusDataFixed?.forConfirm !== undefined"
                        >
                            ({{ countStatusDataFixed?.forConfirm }})
                        </ng-container>
                    </li>
                    <li
                            (click)="setStatus('CREATE_JOURNAL_TRANS')"
                            [class.active]="fileStatus === 'CREATE_JOURNAL_TRANS'"
                    >
                        יצירת פקודות יומן
                        <ng-container
                                *ngIf="countStatusDataFixed?.journalTrans !== undefined"
                        >
                            ({{ countStatusDataFixed?.journalTrans }})
                        </ng-container>
                    </li>
                    <li
                            (click)="setStatus('WAIT_FOR_CARE')"
                            [class.active]="fileStatus === 'WAIT_FOR_CARE'"
                    >
                        להמשך טיפול
                        <ng-container *ngIf="countStatusDataFixed?.forCare !== undefined">
                            ({{ countStatusDataFixed?.forCare }})
                        </ng-container>
                    </li>
                </ul>

                <div class="search" style="width: 215px">
                    <input
                            [formControl]="filterInput"
                            [value]="queryString"
                            autocomplete="off"
                            id="containTextFilter"
                            placeholder="{{ 'filters.search' | translate }}"
                            type="text"
                    />
                </div>

                <div
                        *ngIf="fileStatus === 'WAIT_FOR_CONFIRM' && !viewAsList"
                        class="slidecontainer"
                >
                    <p style="font-size: 15px; color: #022258">הגדלה/הקטנה של התמונות</p>
                    <input
                            [(ngModel)]="zoomCube"
                            class="slider-range"
                            id="myRange"
                            max="3"
                            min="1"
                            type="range"
                    />
                </div>
            </div>

            <div *ngIf="fileStatus === 'WAIT_FOR_CONFIRM'" class="btnChangeView">
                <img
                        (click)="changeView('grid')"
                        [matTooltip]="'תצוגת תמונות'"
                        [src]="
            viewAsList
              ? '/assets/images/gallery.png'
              : '/assets/images/galleryActive.png'
          "
                        height="18"
                        matTooltipPosition="above"
                        style="
            width: 18px;
            height: 18px;
            vertical-align: middle;
            cursor: pointer;
          "
                        width="18"
                />
                <img
                        (click)="changeView('list')"
                        [matTooltip]="'תצוגת רשימה'"
                        [src]="
            viewAsList
              ? '/assets/images/listActive.png'
              : '/assets/images/list.png'
          "
                        height="17"
                        matTooltipPosition="above"
                        style="
            width: 24px;
            height: 17px;
            vertical-align: middle;
            cursor: pointer;
          "
                        width="24"
                />
            </div>

            <div
                    *ngIf="fileStatus === 'CREATE_JOURNAL_TRANS'"
                    class="btnChangeView"
                    style="display: flex; flex-direction: column"
            >
                <div class="exports">
                    <button
                            (click)="printPage('all')"
                            [matTooltip]="'appWalk.customers.report.printBtn' | translate"
                            matTooltipPosition="above"
                            style="margin-left: 0px; padding: 0"
                    >
                        <img height="21" ngSrc="/assets/images/to-printer.png" width="24"/>
                    </button>
                </div>
            </div>
        </div>
        <ng-container
                *ngIf="fileStatus !== 'CREATE_JOURNAL_TRANS'; else CREATE_JOURNAL_TRANS"
        >
            <div
                    (click)="handleClick($event)"
                    *ngIf="viewAsList && fileStatus === 'WAIT_FOR_CONFIRM'"
                    class="documentsDataTable"
            >
                <div #header class="header">
                    <div>
                        <p-checkbox (onChange)="
                selcetAllFiles = !selcetAllFiles; selecteAllFilesEvent()
              "
                                    *ngIf="documentsData && documentsData.length"
                                    [binary]="true"
                                    [ngModel]="selcetAllFiles"
                                    checkboxIcon="fa fa-check"
                        >
                        </p-checkbox>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('dateCreated')">
                        ת. העלאה

                        <mat-icon
                                *ngIf="documentsData && documentsData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'dateCreated'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'dateCreated'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('invoiceDate')">
                        ת. מסמך

                        <mat-icon
                                *ngIf="documentsData && documentsData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'invoiceDate'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'invoiceDate'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div>
                        <app-tooltip-category
                                (changed)="filterCategory($event)"
                                [data]="
                typeOfStatus === 'maamPrc' ? maamPrcArr : transTypeCodeArr
              "
                                [title]="
                typeOfStatus
                  ? typeOfStatus === 'maamPrc'
                    ? '%מע״מ'
                    : 'ס.תנועה'
                  : ''
              "
                                [type]="typeOfStatus"
                        >
                        </app-tooltip-category>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('name')">
                        שם ספק/ לקוח

                        <mat-icon
                                *ngIf="documentsData && documentsData.length"
                                [class.active]="companyFilesSortControl.value?.orderBy === 'name'"
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'name'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div>
                        <app-tooltip-category
                                (changed)="filterCategory($event)"
                                [data]="indexArr"
                                [title]="'כרטיס'"
                                [type]="'index'"
                        >
                        </app-tooltip-category>
                    </div>
                    <div>
                        <!--                    <app-tooltip-category [title]="'ח.פ'"-->
                        <!--                                          [type]="'supplierHp'"-->
                        <!--                                          [data]="supplierHpArr"-->
                        <!--                                          (changed)="filterCategory($event)">-->
                        <!--                    </app-tooltip-category>-->
                        <app-tooltip-category
                                (changed)="filterCategory($event)"
                                [data]="oppositeCustArr"
                                [title]="'כרטיס נגדי'"
                                [type]="'oppositeCust'"
                        >
                        </app-tooltip-category>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('asmachta')">
                        אסמכתא

                        <mat-icon
                                *ngIf="documentsData && documentsData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'asmachta'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'asmachta'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('totalIncludeMaam')">
                        סכום כולל

                        <mat-icon
                                *ngIf="documentsData && documentsData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'totalIncludeMaam'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'totalIncludeMaam'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div
                            *ngIf="userService.appData && userService.appData.isAdmin"
                            class="iconPic uniqueId"
                    >
                        unique_id
                    </div>
                    <div class="iconPic">
                        <app-tooltip-category
                                (changed)="filterCategory($event)"
                                [data]="quickApproveArr"
                                [filter]="false"
                                [type]="'quickApprove'"
                                style="margin-right: 17px"
                        >
                            <mat-icon
                                    style="
                  width: 17px !important;
                  height: 17px !important;
                  color: #022258;
                  vertical-align: middle;
                "
                                    svgIcon="picIcon"
                            ></mat-icon>
                        </app-tooltip-category>
                    </div>
                    <div>
                        <app-tooltip-category
                                (changed)="filterCategory($event)"
                                [data]="editArr"
                                [title]="'להמשך טיפול'"
                                [type]="'edit'"
                        >
                        </app-tooltip-category>
                    </div>
                </div>

                <div
                        [ngStyle]="{'height': (getPageHeightFunc(header.getBoundingClientRect().bottom + 10)) +'px'}"
                        class="body scrollbar-dynamic"
                        style="position: relative;"
                >

                    <div *ngIf="loader" class="loader">
                        <div class="circle"></div>
                    </div>
                    <ng-container *ngIf="documentsData && documentsData.length">
                        <ng-scrollbar
                            #scrollbarCompanies
                            (updated)="onScroll(scrollbarCompanies, virtualScroll)"
                            class="custom-scrollbar"
                            thumbClass="scrollbar-thumb"
                            trackClass="scrollbar">

                            <cdk-virtual-scroll-viewport #virtualScroll itemSize="35" scrollViewport>
                                <div *cdkVirtualFor="let file of documentsData; let i = index; trackBy: trackById">
                                    <div
                                        #rowForScroll
                                        (click)="
                    file.titleQuickApproveArray ? changeFilterRowsType() : null
                  "
                                        [class.activeRowBack]="file.fileId === fileIdToToActive"
                                        [class.active]="
                    panelEdit.overlayVisible &&
                    tooltipEditFile &&
                    tooltipEditFile.fileId === file.fileId
                  "
                                        [class.isFirstRegularArrayRow]="
                    file.regularArrayRow &&
                    file.isFirst &&
                    titleQuickApproveArrayOpened
                  "
                                        [class.noDataAvailable]="file.noDataAvailable"
                                        [class.quickApproveArrayRow]="file.quickApprove"
                                        [class.titleQuickApproveArray]="file.titleQuickApproveArray"
                                        [id]="file.fileId"
                                        class="row"
                                    >
                                        <ng-container
                                                *ngIf="file.titleQuickApproveArray; else notTitle"
                                        >
                                            <div>
                                                <img
                                                        [src]="
                          titleQuickApproveArrayOpened
                            ? '/assets/images/stateOpen.png'
                            : '/assets/images/stateClose.png'
                        "
                                                        height="9"
                                                        style="
                          width: 14px;
                          height: 9px;
                          vertical-align: middle;
                          cursor: pointer;
                          margin-left: 11px;
                        "
                                                        width="14"
                                                />

                                                {{ file.numOfRows === 1 ? '' : file.numOfRows }}
                                                {{
                                                file.numOfRows === 1
                                                    ? 'מסמך ממתין לאישור הפקודה'
                                                    : ' מסמכים ממתינים לאישור הפקודה'
                                                }}
                                            </div>
                                            <div>
                                                <!--                                          <span class="link" (click)="setFileStatus(); $event.stopPropagation()">-->
                                                <!--                                                                                        אישור מהיר לכל המסמכים-->
                                                <!--                                          </span>-->
                                            </div>
                                        </ng-container>
                                        <ng-template #notTitle>
                                            <ng-container
                                                    *ngIf="!file.noDataAvailable; else noDataAvailable"
                                            >
                                                <div>
                                                    <p-checkbox (onChange)="
                            file.selcetFile = !file.selcetFile; checkSelected()
                          "
                                                                [binary]="true"
                                                                [ngModel]="file.selcetFile"
                                                                checkboxIcon="fa fa-check"
                                                    >
                                                    </p-checkbox>
                                                </div>
                                                <div (click)="goToInvoice(file)">
                                                    <div
                                                        #elementTooltip2
                                                        [innerHTML]="
                            (file.dateCreated | date: 'dd/MM/yy HH:mm') || '-'
                              | highlight: queryString
                          "
                                                        [ngStyle]="{
                            'margin-right':
                              file.dateCreated !== null ? '0' : '12%'
                          }"
                                                        [pTooltip]="file.dateCreated | date: 'dd/MM/yy HH:mm'"
                                                        [tooltipDisabled]="
                            elementTooltip2.offsetWidth >=
                            elementTooltip2.scrollWidth
                          "
                                                        class="text-ellipsis"
                                                    ></div>
                                                </div>
                                                <div (click)="goToInvoice(file)">
                                                    <div
                                                        #elementTooltip3
                                                        *ngIf="file.invoiceDate !== null"
                                                        [innerHTML]="
                            (file.invoiceDate | date: 'dd/MM/y') || '-'
                              | highlight: queryString
                          "
                                                        [pTooltip]="
                            (file.invoiceDate | date: 'dd/MM/y') || '-'
                          "
                                                        [tooltipDisabled]="
                            elementTooltip3.offsetWidth >=
                            elementTooltip3.scrollWidth
                          "
                                                        class="text-ellipsis"
                                                    ></div>

                                                    <div
                                                            *ngIf="file.invoiceDate === null"
                                                            class="text-ellipsis"
                                                    >
                                                        <div style="margin-right: 30px">-</div>
                                                    </div>
                                                    <div *ngIf="file.createdUser">
                          <span
                                  [class]="
                              file.accountant
                                ? 'icon-user-circle'
                                : 'icon-user-circle-o'
                            "
                                  [matTooltip]="file.createdUser"
                                  class="text-ellipsis"
                                  matTooltipPosition="below"
                                  style="
                              color: #abaaaa;
                              vertical-align: middle;
                              cursor: pointer;
                              font-size: 16px;
                            "
                          ></span>
                                                    </div>
                                                    <div
                                                            *ngIf="
                            !file.createdUser &&
                            file.uploadSource === 'mail' &&
                            file.mail
                          "
                                                    >
                          <span
                                  [class]="'icon-user-circle'"
                                  [matTooltip]="file.mail"
                                  class="text-ellipsis"
                                  matTooltipPosition="below"
                                  style="
                              color: #abaaaa;
                              vertical-align: middle;
                              cursor: pointer;
                              font-size: 16px;
                            "
                          ></span>
                                                    </div>
                                                    <div
                                                            *ngIf="file.uploadSource"
                                                            style="margin-left: 15px"
                                                    >
                          <span
                                  [class]="'icon-' + file.uploadSource"
                                  style="
                              color: #7f7e7e;
                              vertical-align: middle;
                              cursor: pointer;
                              font-size: 18px;
                            "
                          ></span>
                                                    </div>
                                                </div>
                                                <div (click)="goToInvoice(file)" class="text-ellipsis">
                                                    <div
                                                        #elementTooltip1
                                                        [innerHTML]="
                            (typeOfStatus === 'transTypeCode'
                              ? file.transTypeCode
                              : ('vatOptions.' + file.maamPrc | translate)) ||
                              '-' | highlight: queryString
                          "
                                                        [ngStyle]="{
                            'margin-right': (
                              typeOfStatus === 'transTypeCode'
                                ? file.transTypeCode !== null
                                : file.maamPrc !== null
                            )
                              ? '0'
                              : '12%'
                          }"
                                                        [pTooltip]="
                            typeOfStatus === 'transTypeCode'
                              ? file.transTypeCode
                              : ('vatOptions.' + file.maamPrc | translate)
                          "
                                                        [tooltipDisabled]="
                            elementTooltip1.offsetWidth >=
                            elementTooltip1.scrollWidth
                          "
                                                        class="text-ellipsis"
                                                        style="padding-left: 40px"
                                                    ></div>
                                                </div>
                                                <div (click)="goToInvoice(file)" class="text-ellipsis">
                                                    <div
                                                        #elementTooltip5
                                                        [innerHTML]="
                            file.name || '-' | highlight: queryString
                          "
                                                        [ngStyle]="{
                            'margin-right': file.name !== null ? '0' : '12%'
                          }"
                                                        [pTooltip]="file.name"
                                                        [tooltipDisabled]="
                            elementTooltip5.offsetWidth >=
                            elementTooltip5.scrollWidth
                          "
                                                        class="text-ellipsis"
                                                        style="padding-left: 40px"
                                                    ></div>
                                                </div>
                                                <div (click)="goToInvoice(file)" class="text-ellipsis">
                                                    <div
                                                        #elementTooltip6
                                                        [innerHTML]="
                            file.cust || '-' | highlight: queryString
                          "
                                                        [ngStyle]="{
                            'margin-right': file.cust !== null ? '0' : '12%'
                          }"
                                                        [pTooltip]="file.cust || '-'"
                                                        [tooltipDisabled]="
                            elementTooltip6.offsetWidth >=
                            elementTooltip6.scrollWidth
                          "
                                                        class="text-ellipsis"
                                                    ></div>
                                                </div>
                                                <!--                                <div (click)="goToInvoice(file)" class="text-ellipsis">-->
                                                <!--                                    <div class="text-ellipsis"-->
                                                <!--                                         [ngStyle]="{'margin-right': file.supplierHp!== null ? '0' : '12%'}"-->
                                                <!--                                         [innerHTML]="(file.supplierHp || '-')| highlight: queryString"></div>-->
                                                <!--                                </div>-->
                                                <div (click)="goToInvoice(file)" class="text-ellipsis">
                                                    <div
                                                        #elementTooltip7
                                                        [innerHTML]="
                            file.oppositeCust || '-' | highlight: queryString
                          "
                                                        [ngStyle]="{
                            'margin-right':
                              file.oppositeCust !== null ? '0' : '12%'
                          }"
                                                        [pTooltip]="file.oppositeCust || '-'"
                                                        [tooltipDisabled]="
                            elementTooltip7.offsetWidth >=
                            elementTooltip7.scrollWidth
                          "
                                                        class="text-ellipsis"
                                                    ></div>
                                                </div>
                                                <div (click)="goToInvoice(file)" class="text-ellipsis">
                                                    <div
                                                        #elementTooltip8
                                                        [innerHTML]="
                            file.asmachta || '-' | highlight: queryString
                          "
                                                        [ngStyle]="{
                            'margin-right': file.asmachta !== null ? '0' : '12%'
                          }"
                                                        [pTooltip]="file.asmachta || '-'"
                                                        [tooltipDisabled]="
                            elementTooltip8.offsetWidth >=
                            elementTooltip8.scrollWidth
                          "
                                                        class="text-ellipsis"
                                                    ></div>
                                                </div>
                                                <div (click)="goToInvoice(file)" class="text-ellipsis">
                                                    <div
                                                            [ngStyle]="{
                            'margin-right':
                              file.totalIncludeMaam !== null ? '0' : '12%'
                          }"
                                                            class="text-ellipsis"
                                                    >
                                                        <ng-container
                                                                *ngIf="file.totalIncludeMaam !== null; else empty"
                                                        >
                                                            <app-sum-view
                                                                    [highlight]="queryString"
                                                                    [sum]="file.totalIncludeMaam"
                                                            ></app-sum-view>
                                                            &nbsp;{{ file?.sign }}
                                                        </ng-container>
                                                        <ng-template #empty> -</ng-template>
                                                    </div>
                                                </div>
                                                <div
                                                        *ngIf="
                          userService.appData && userService.appData.isAdmin
                        "
                                                        class="iconPic uniqueId"
                                                >
                                                    <div
                                                            [innerHTML]="
                            file.uniqueId || '-' | highlight: queryString
                          "
                                                            [ngStyle]="{
                            'margin-right': file.uniqueId !== null ? '0' : '12%'
                          }"
                                                            class="text-ellipsis"
                                                    ></div>
                                                </div>
                                                <div class="iconPic">
                                                    <!--                                    <mat-icon (click)="showDocumentListStorageData(file)"-->
                                                    <!--                                              style="width: 17px;height: 17px; color: #939393"-->
                                                    <!--                                              svgIcon="picIcon"></mat-icon>-->

                                                    <mat-icon
                                                            (click)="
                            file.quickApprove
                              ? showDocumentListStorageData(file)
                              : showDocumentStorageData(file.fileId)
                          "
                                                            style="width: 17px; height: 17px; color: #939393"
                                                            svgIcon="picIcon"
                                                    ></mat-icon>
                                                </div>
                                                <div>
                                                    <div
                                                            (click)="updateOcrDocumentData(file)"
                                                            [ngClass]="'flag-' + (file.flag ? 'active' : 'none')"
                                                    ></div>
                                                    <div
                                                            (click)="journalTransComponent.docNote.show(file)"
                                                            (mouseleave)="file.note ? note.hide() : null"
                                                            (mouseover)="
                            file.note ? openNote(note, $event, file) : null
                          "
                                                            [ngClass]="'note-' + (file.note ? 'active' : 'none')"
                                                    ></div>
                                                    <i
                                                            (click)="
                            tooltipEditFile = file; panelEdit.toggle($event)
                          "
                                                            class="fas fa-ellipsis-v"
                                                    ></i>
                                                </div>
                                            </ng-container>
                                            <ng-template #noDataAvailable>
                                                <div>
                                                    <p-checkbox (onChange)="
                            file.selcetFile = !file.selcetFile; checkSelected()
                          "
                                                                [binary]="true"
                                                                [ngModel]="file.selcetFile"
                                                                checkboxIcon="fa fa-check"
                                                    >
                                                    </p-checkbox>
                                                </div>
                                                <div (click)="goToInvoice(file)">
                                                    <div
                                                            [innerHTML]="
                            (file.dateCreated | date: 'dd/MM/yy HH:mm') || '-'
                              | highlight: queryString
                          "
                                                            [pTooltip]="file.dateCreated | date: 'dd/MM/yy HH:mm'"
                                                            class="text-ellipsis"
                                                    ></div>
                                                </div>
                                                <div (click)="goToInvoice(file)">
                                                    <div>
                                                        <div style="margin-right: 30px">-</div>
                                                    </div>
                                                    <div *ngIf="file.createdUser">
                          <span
                                  [class]="
                              file.accountant
                                ? 'icon-user-circle'
                                : 'icon-user-circle-o'
                            "
                                  [matTooltip]="file.createdUser"
                                  matTooltipPosition="below"
                                  style="
                              color: #abaaaa;
                              vertical-align: middle;
                              cursor: pointer;
                              font-size: 16px;
                            "
                          ></span>
                                                    </div>
                                                    <div
                                                            *ngIf="
                            !file.createdUser &&
                            file.uploadSource === 'mail' &&
                            file.mail
                          "
                                                    >
                          <span
                                  [class]="'icon-user-circle'"
                                  [matTooltip]="file.mail"
                                  class="text-ellipsis"
                                  matTooltipPosition="below"
                                  style="
                              color: #abaaaa;
                              vertical-align: middle;
                              cursor: pointer;
                              font-size: 16px;
                            "
                          ></span>
                                                    </div>
                                                    <div
                                                            *ngIf="file.uploadSource"
                                                            style="margin-left: 15px"
                                                    >
                          <span
                                  [class]="'icon-' + file.uploadSource"
                                  style="
                              color: #7f7e7e;
                              vertical-align: middle;
                              cursor: pointer;
                              font-size: 18px;
                            "
                          ></span>
                                                    </div>
                                                </div>
                                                <div
                                                        (click)="goToInvoice(file)"
                                                        style="
                          flex: 723;
                          justify-content: center;
                          text-align: center;
                        "
                                                >
                                                    {{ 'הסריקה לא הצליחה לפענח את השדות במסמך' }}
                                                </div>

                                                <div
                                                        *ngIf="
                          userService.appData && userService.appData.isAdmin
                        "
                                                        class="iconPic uniqueId"
                                                >
                                                    <div
                                                            [innerHTML]="
                            file.uniqueId || '-' | highlight: queryString
                          "
                                                            [ngStyle]="{
                            'margin-right': file.uniqueId !== null ? '0' : '12%'
                          }"
                                                            class="text-ellipsis"
                                                    ></div>
                                                </div>
                                                <div class="iconPic">
                                                    <mat-icon
                                                            (click)="showDocumentListStorageData(file)"
                                                            style="width: 17px; height: 17px; color: #939393"
                                                            svgIcon="picIcon"
                                                    ></mat-icon>
                                                </div>
                                                <div>
                                                    <div
                                                            (click)="updateOcrDocumentData(file)"
                                                            [ngClass]="'flag-' + (file.flag ? 'active' : 'none')"
                                                    ></div>
                                                    <div
                                                            (click)="journalTransComponent.docNote.show(file)"
                                                            (mouseleave)="file.note ? note.hide() : null"
                                                            (mouseover)="
                            file.note ? openNote(note, $event, file) : null
                          "
                                                            [ngClass]="'note-' + (file.note ? 'active' : 'none')"
                                                    ></div>
                                                    <i
                                                            (click)="
                            tooltipEditFile = file; panelEdit.toggle($event)
                          "
                                                            class="fas fa-ellipsis-v"
                                                    ></i>
                                                </div>
                                            </ng-template>
                                        </ng-template>
                                    </div>
                                </div>
                            </cdk-virtual-scroll-viewport>
                        </ng-scrollbar>

                        <p-overlayPanel
                            #note
                            [hideTransitionOptions]="'0ms'"
                            [showTransitionOptions]="'0ms'"
                            [style]="{
							'margin-left':  '47px',
							'margin-top':  tooltipEditFile && !tooltipEditFile?.isBottom ? '-137px' : '0'
            }"
                            appendTo="body"
                            styleClass="notePanel"
                        >
                            <p>
                                {{ tooltipEditFile?.note }}
                            </p>
                        </p-overlayPanel>
                        <p-overlayPanel
                            #panelEdit
                            [style]="{
									'margin-left': '21px',
                                'margin-top': '10px',
                                 width: 'auto' }"
                            appendTo="body"
                            styleClass="tooltip-bottom tooltip-acc-deviation tooltip-daily-edit overlayPanelRightClick"
                        >
                            <ul style="width: 185px">
                                <!--                                <li *ngIf="fileStatus === 'WAIT_FOR_CONFIRM' && tooltipEditFile && tooltipEditFile.quickApprove"-->
                                <!--                                    (click)="setFileStatus(tooltipEditFile.fileId); panelEdit.hide();">-->
                                <!--                                    <div class="p-helper-clearfix"-->
                                <!--                                         style="display: flex; display: -ms-flexbox;">-->
                                <!--                                        <div style="align-self: center; flex: 20;-ms-flex:20;">-->
                                <!--                                            <mat-icon svgIcon="tick"-->
                                <!--                                                      style="width: 14px;vertical-align: middle;"></mat-icon>-->
                                <!--                                        </div>-->
                                <!--                                        <p class="nameAcc"-->
                                <!--                                           style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;flex: 85;-ms-flex:85;">-->
                                <!--                                            אישור מסמך-->
                                <!--                                        </p>-->
                                <!--                                    </div>-->
                                <!--                                </li>-->
                                <li
                                        (click)="
                    journalTransComponent.docFolders.show(
                      userService.appData?.userData?.companySelect?.companyId
                    );
                    panelEdit.hide()
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="bizibox_archive"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            העברה לארכיון
                                        </p>
                                    </div>
                                </li>
                                <li (click)="getDocumentStorageData(); panelEdit.hide()">
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="bizibox_download"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            הורדה למחשב
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="
                    journalTransComponent.docCompanyReplacement.show();
                    panelEdit.hide()
                  "
                                        *ngIf="
                    fileStatus !== 'WAIT_FOR_CARE' &&
                    userService.appData?.userData?.companies &&
                    userService.appData?.userData?.companies.length > 1
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="swap"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            מעבר לחברה אחרת
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="
                    journalTransComponent.docToSend.show(
                      tooltipEditFile.fileId
                    );
                    panelEdit.hide()
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="send"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            שליחת הודעה ללקוח
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="
                    journalTransComponent.docToRemove.show(
                      tooltipEditFile.fileId
                    );
                    panelEdit.hide()
                  "
                                        *ngIf="fileStatus === 'WAIT_FOR_CONFIRM'"
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="deleteInvoice"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            הסרת מסמך
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="getDocumentStorageData(null, true); panelEdit.hide()"
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="print"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            הדפסה
                                        </p>
                                    </div>
                                </li>
                            </ul>
                        </p-overlayPanel>
                    </ng-container>

                    <div
                            *ngIf="documentsDataSave && !documentsDataSave.length"
                            class="noData"
                    >
                        <mat-icon
                                style="
                vertical-align: middle;
                width: auto;
                height: 61px;
                margin-bottom: 10px;
              "
                                svgIcon="export2"
                        ></mat-icon>

                        <h1>לא קיימים מסמכים שדורשים טיפול</h1>
                    </div>
                    <div
                            *ngIf="
              documentsDataSave &&
              documentsDataSave.length &&
              documentsData &&
              !documentsData.length
            "
                            class="noData"
                    >
                        <mat-icon
                                style="
                vertical-align: middle;
                width: auto;
                height: 61px;
                margin-bottom: 10px;
              "
                                svgIcon="interface"
                        ></mat-icon>

                        <h1>לא נמצאו מסמכים לחיפוש המבוקש</h1>
                    </div>
                </div>
            </div>

            <div
                    *ngIf="
          (!viewAsList && fileStatus === 'WAIT_FOR_CONFIRM') ||
          fileStatus === 'WAIT_FOR_CARE'
        "
            >
                <div
                        *ngIf="!loader && fileStatus === 'WAIT_FOR_CARE'"
                        class="showEmptyFields"
                        style="
            margin-left: 26px;
            display: flex;
            z-index: 9;
            justify-content: flex-end;
            position: absolute;
            left: 0;
            top: 74px;
          "
                >
                    <p style="padding-left: 12px; color: #022258; font-size: 16px">
                        רק דגלים
                    </p>
                    <label class="switchBtn">
                        <input [formControl]="showNote" type="checkbox"/>
                        <span class="slider round"></span>
                    </label>
                    <p style="padding-right: 12px; color: #022258; font-size: 16px">
                        כולל פתקים
                    </p>
                </div>
                <!--            [appScrollHeight]="-->
                <!--            (userService.appData?.userData?.topSideMesagges || (journalTransComponent.reportService.reportIsProcessing$| async) || (journalTransComponent.reportService.reportIsProcessingPrint$| async) || (journalTransComponent.reportService.postponed && !journalTransComponent.reportService.postponed.fired && !!journalTransComponent.reportService.postponed.message) || (journalTransComponent.reportService.forLogic && !journalTransComponent.reportService.forLogic.fired && !!journalTransComponent.reportService.forLogic.message)) ? 330 : 380-->
                <!--            "-->

                <!--            [ngStyle]="{height: (-->
                <!--                 window['innerHeight'] -  ( (userService.appData?.userData?.topSideMesagges || (journalTransComponent.reportService.reportIsProcessing$| async) || (journalTransComponent.reportService.reportIsProcessingPrint$| async) || (journalTransComponent.reportService.postponed && !journalTransComponent.reportService.postponed.fired && !!journalTransComponent.reportService.postponed.message) || (journalTransComponent.reportService.forLogic && !journalTransComponent.reportService.forLogic.fired && !!journalTransComponent.reportService.forLogic.message)) ? 330 : 280)-->
                <!--                 ) + 'px'}"-->
                <div
                    #scroll
                    (scroll)="onScrollCubes()"
                    [appScrollHeight]="baseFilters.getBoundingClientRect().bottom + 20"
                    [class.WAIT_FOR_CARE]="fileStatus === 'WAIT_FOR_CARE'"
                    class="scrollbar-dynamic containerList viewAsGrid scroll-chrome"
                    style="position: relative; padding-top: 4px; overflow: auto"
                >
                    <div *ngIf="loader" class="loader">
                        <div class="circle"></div>
                    </div>

                    <ng-container *ngIf="documentsData && documentsData.length">
                        <div *ngFor="let group of documentsData" class="row" tabindex="0">
                            <div *ngIf="group && group.length">
                                <div class="title_dateCreated">
                                    <h1>
                                        {{
                                        translate.translations[translate.currentLang].langCalendar
                                            .monthNamesShort[getMonthNum(group[0].dateCreated)]
                                        }}
                                        {{ group[0].dateCreated | date: 'yyyy' }}
                                    </h1>
                                    <div>&nbsp;</div>
                                </div>

                                <div
                                    #containerCubes
                                    style="
                    display: flex;
                    flex-direction: row-reverse;
                    flex-wrap: wrap;
                    margin-left: 15px;
                  "
                                >
                                    <ng-container
                                            *ngFor="
                      let file of group;
                      let i = index;
                      last as isLast;
                      trackBy: trackById
                    "
                                    >
                                        <!--                            <div *ngIf=" (i > 0) && (i % 6 === 0)"-->
                                        <!--                                 style="flex-basis: 100%;height: 0; margin: 0; border:none;"></div>-->

                                        <div
                                            #element
                                            (click)="
                                             onScrollCubes();
                        fileStatus !== 'WAIT_FOR_CARE'
                          ? onKeydownMain($event, file)
                          : null
                      "
                                            (contextmenu)="
                        onScrollCubes();
                        tooltipEditFile = file;
                        elemToEdit = element;
                        tooltipEdit.toggle($event, actualTarget);
                        onRightClick($event)
                      "
                                            (dblclick)="
                        fileStatus !== 'WAIT_FOR_CARE'
                          ? goToInvoice(file)
                          : null
                      "
                                            [style.zoom.%]="
                        fileStatus === 'WAIT_FOR_CARE'
                          ? 100
                          : zoomCube === 1
                          ? 100
                          : zoomCube === 2
                          ? 100 + (containerCubes.clientWidth / 5 - 192) / 1.92
                          : 100 + (containerCubes.clientWidth / 4 - 192) / 1.92
                      "
                                            class="cube"
                                        >
                                            <div
                                                #actualTarget
                                                [hidden]="!file.finishedLoaded"
                                                class="date"
                                            >
                                                {{ file?.idx }}
                                            </div>

                                            <ng-container
                                                    *ngIf="
                          scroll.scrollTop + scroll.offsetHeight >
                          element.offsetTop - 100
                        "
                                            >
                                                <ng-container
                                                        *ngIf="
                            scroll.scrollTop + scroll.offsetHeight >
                              element.offsetTop &&
                              !file.urlImgProgress &&
                              !file.urlImg;
                            else loading
                          "
                                                >
                                                    <ng-container
                                                            *ngIf="onLoad(file) | async; else loading"
                                                    ></ng-container>
                                                </ng-container>

                                                <ng-template #loading>
                                                    <div
                                                            *ngIf="!file.finishedLoaded"
                                                            class="loaderPercent"
                                                            style="background: transparent; opacity: 1"
                                                    >
                                                        <div class="circle"></div>
                                                    </div>
                                                    <div
                                                            [class.finishedLoaded]="file.finishedLoaded"
                                                            class="prepareFile"
                                                    >
                                                        <div class="image">
                                                            <div
                                                                    *ngIf="file.flag && file.finishedLoaded"
                                                                    class="flag-active"
                                                            ></div>

                                                            <div
                                                                    *ngIf="file.note && file.finishedLoaded"
                                                                    [innerHTML]="file.note | highlight: queryString"
                                                                    [pTooltip]="file.note"
                                                                    class="note"
                                                            ></div>

                                                            <button
                                                                    (click)="
                                  showDocumentStorageDataViewAsGrid(file);
                                  $event.stopPropagation()
                                "
                                                                    *ngIf="file.finishedLoaded"
                                                                    class="viewPhoto"
                                                            >
                                                                <mat-icon
                                                                        style="
                                    color: white;
                                    width: 18px;
                                    height: 18px;
                                    display: block;
                                    align-self: center;
                                  "
                                                                        svgIcon="pictureLines"
                                                                ></mat-icon>
                                                            </button>

                                                            <div
                                                                    [style.border-width]="
                                  !file.finishedLoaded
                                    ? '0'
                                    : file.selcetFile
                                    ? '3px'
                                    : '1px'
                                "
                                                                    style="
                                  border: 1px solid #0f2d61;
                                  position: absolute;
                                  z-index: 99;
                                  right: 0;
                                  left: 0;
                                  bottom: 0;
                                  top: 0;
                                  width: 100%;
                                  height: 100%;
                                "
                                                            ></div>
                                                            <ng-container *ngIf="file.urlImg">
                                                                <img
                                                                        (load)="file.finishedLoaded = true"
                                                                        (loadstart)="file.finishedLoaded = false"
                                                                        [class.zoomImg]="
                                  fileStatus !== 'WAIT_FOR_CARE' &&
                                  zoomCube !== 1
                                "
                                                                        [src]="file.urlImg"
                                                                        [style.visibility]="
                                  file.finishedLoaded && file.urlImg
                                    ? 'visible'
                                    : 'hidden'
                                "

                                                                        style="height: 221px; width: auto; position: relative;"

                                                                />
                                                            </ng-container>
                                                            <ng-container *ngIf="file.multipaged">
                                                                <app-folded-corner
                                                                        fontSize="40px"
                                                                        shadowOpacity="0.65"
                                                                ></app-folded-corner>
                                                            </ng-container>
                                                        </div>
                                                        <div class="text-ellipsis">
                                                            <ng-container
                                                                    *ngIf="file.finishedLoaded; else empty"
                                                            >
                                                                <div
                                                                        [innerHTML]="
                                    file.name || '-' | highlight: queryString
                                  "
                                                                        [pTooltip]="file.name"
                                                                        class="text-ellipsis"
                                                                ></div>
                                                            </ng-container>
                                                            <ng-template #empty> &nbsp;</ng-template>
                                                        </div>
                                                        <div
                                                                *ngIf="fileStatus === 'WAIT_FOR_CARE'"
                                                                class="text-ellipsis"
                                                        >
                                                            <ng-container
                                                                    *ngIf="file.finishedLoaded; else empty"
                                                            >
                                                                <div
                                                                        [innerHTML]="
                                    file.folderName || '-'
                                      | highlight: queryString
                                  "
                                                                        [pTooltip]="file.folderName"
                                                                        class="text-ellipsis"
                                                                ></div>
                                                            </ng-container>
                                                            <ng-template #empty> &nbsp;</ng-template>
                                                        </div>
                                                        <div>
                                                            <ng-container
                                                                    *ngIf="file.finishedLoaded; else empty"
                                                            >
                                                                <div
                                                                        [innerHTML]="
                                    (file.dateCreated | date: 'dd/MM/yy') || '-'
                                      | highlight: queryString
                                  "
                                                                        class="text-ellipsis"
                                                                ></div>
                                                            </ng-container>
                                                            <ng-template #empty> &nbsp;</ng-template>
                                                        </div>
                                                    </div>
                                                </ng-template>
                                            </ng-container>
                                        </div>

                                        <!--                            <div [style.flex]="(isLast && (6-(group.length%6)) !== 6)? (0.1 + ((6-(group.length%6)) * 0.1)) : (0.1)"></div>-->

                                        <!--                            <div *ngIf="isLast && (6-(group.length%6)) !== 6"-->
                                        <!--                                 [style.flex]="(6-(group.length%6))"></div>-->
                                    </ng-container>
                                </div>
                            </div>
                        </div>
                    </ng-container>
                    <p-overlayPanel
                        #tooltipEdit
                        [style]="{
              'margin-left': calcLeft(elemToEdit) + calcMinus(
                  (185 - (elemToEdit ? elemToEdit.offsetWidth : 0)) / 2
                ) + 'px',
              'margin-top': calcTop(elemToEdit) + 35 + 'px'
            }"
                        appendTo="body"
                        styleClass="tooltip-bottom tooltip-acc-deviation tooltip-daily-edit overlayPanelRightClick {{
              zoomCube !== 1 ? 'zoomleft' : ''
            }}"
                    >
                        <ul style="width: 185px">
                            <li
                                    (click)="
                  journalTransComponent.docNote.show(tooltipEditFile);
                  tooltipEdit.hide()
                "
                            >
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="color: #022258; height: 14px; width: 14px"
                                                svgIcon="note"
                                        >
                                        </mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        {{ tooltipEditFile?.note ? 'עריכת' : 'הוספת' }}
                                        פיתקית
                                    </p>
                                </div>
                            </li>
                            <li
                                    (click)="
                  updateOcrDocumentData(tooltipEditFile); tooltipEdit.hide()
                "
                            >
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="
                        color: #022258;
                        width: 14px;
                        align-self: center;
                        vertical-align: middle;
                      "
                                                svgIcon="flag"
                                        >
                                        </mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        {{ tooltipEditFile?.flag ? 'מחיקת' : 'הוספת' }}
                                        דגל
                                    </p>
                                </div>
                            </li>
                            <!--                                        <li style="flex:1; height: 1px; background: #dddbdb; margin: 0px 7px;"></li>-->
                            <li
                                    (click)="
                  journalTransComponent.docFolders.show(
                    userService.appData?.userData?.companySelect?.companyId
                  );
                  tooltipEdit.hide()
                "
                            >
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="width: 14px; vertical-align: middle"
                                                svgIcon="bizibox_archive"
                                        ></mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        העברה לארכיון
                                    </p>
                                </div>
                            </li>
                            <li (click)="getDocumentStorageData(); tooltipEdit.hide()">
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="width: 14px; vertical-align: middle"
                                                svgIcon="bizibox_download"
                                        ></mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        הורדה למחשב
                                    </p>
                                </div>
                            </li>
                            <!--                                        <li style="flex:1; height: 1px; background: #dddbdb; margin: 0px 7px;"></li>-->
                            <li
                                    (click)="
                  journalTransComponent.docCompanyReplacement.show();
                  tooltipEdit.hide()
                "
                                    *ngIf="
                  fileStatus !== 'WAIT_FOR_CARE' &&
                  userService.appData?.userData?.companies &&
                  userService.appData?.userData?.companies.length > 1
                "
                            >
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="width: 14px; vertical-align: middle"
                                                svgIcon="swap"
                                        ></mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        מעבר לחברה אחרת
                                    </p>
                                </div>
                            </li>
                            <li
                                    (click)="
                  journalTransComponent.docToSend.show(tooltipEditFile.fileId);
                  tooltipEdit.hide()
                "
                                    *ngIf="fileStatus === 'WAIT_FOR_CONFIRM'"
                            >
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="width: 14px; vertical-align: middle"
                                                svgIcon="send"
                                        ></mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        שליחת הודעה ללקוח
                                    </p>
                                </div>
                            </li>
                            <li
                                    (click)="
                  journalTransComponent.docToRemove.show(
                    tooltipEditFile.fileId
                  );
                  tooltipEdit.hide()
                "
                                    *ngIf="fileStatus === 'WAIT_FOR_CONFIRM'"
                            >
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="width: 14px; vertical-align: middle"
                                                svgIcon="deleteInvoice"
                                        ></mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        הסרת מסמך
                                    </p>
                                </div>
                            </li>
                            <li
                                    (click)="getDocumentStorageData(null, true); tooltipEdit.hide()"
                            >
                                <div
                                        class="p-helper-clearfix"
                                        style="display: flex; display: -ms-flexbox"
                                >
                                    <div style="align-self: center; flex: 20; -ms-flex: 20">
                                        <mat-icon
                                                style="width: 14px; vertical-align: middle"
                                                svgIcon="print"
                                        ></mat-icon>
                                    </div>
                                    <p
                                            class="nameAcc"
                                            style="
                      overflow: hidden;
                      white-space: nowrap;
                      text-overflow: ellipsis;
                      flex: 85;
                      -ms-flex: 85;
                    "
                                    >
                                        הדפסה
                                    </p>
                                </div>
                            </li>
                        </ul>
                    </p-overlayPanel>

                    <div
                            *ngIf="documentsDataSave && !documentsDataSave.length"
                            class="noData"
                    >
                        <mat-icon
                                style="
                vertical-align: middle;
                width: auto;
                height: 61px;
                margin-bottom: 10px;
              "
                                svgIcon="export2"
                        ></mat-icon>

                        <h1>לא קיימים מסמכים שדורשים טיפול</h1>
                    </div>
                    <div
                            *ngIf="
              documentsDataSave &&
              documentsDataSave.length &&
              documentsData &&
              !documentsData.length
            "
                            class="noData"
                    >
                        <mat-icon
                                style="
                vertical-align: middle;
                width: auto;
                height: 61px;
                margin-bottom: 10px;
              "
                                svgIcon="interface"
                        ></mat-icon>

                        <h1>לא נמצאו מסמכים לחיפוש המבוקש</h1>
                    </div>
                </div>
            </div>

            <div
                    [class.show]="showFloatNav"
                    class="bottomNavAction"
                    style="width: 340px; margin-left: -170px"
            >
                <!--                <div *ngIf="fileStatus === 'WAIT_FOR_CONFIRM' && showFloatNav?.selcetedQuickApproveRows">-->
                <!--                    <mat-icon svgIcon="check-solid"-->
                <!--                              (click)="setFileStatusSelected();"-->
                <!--                              [pTooltip]="'אישור מסמכים'"-->
                <!--                              tooltipPosition="top"-->
                <!--                              style="color: #ffffff;-->
                <!--    height: 100%;-->
                <!--    width: 21px;"></mat-icon>-->
                <!--                </div>-->
                <div>
                    <mat-icon
                            (click)="
              journalTransComponent.docFolders.show(
                userService.appData?.userData?.companySelect?.companyId
              )
            "
                            [pTooltip]="'העברה לארכיון'"
                            style="color: #ffffff; height: 100%; width: 21px"
                            svgIcon="bizibox_archive"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div>
                    <mat-icon
                            (click)="mergeFiles = true"
                            [ngStyle]="
              showFloatNav &&
              showFloatNav?.selcetedFiles.length === 1 && {
                opacity: '0.4',
                cursor: 'default'
              }
            "
                            [pTooltip]="'איחוד מסמכים'"
                            [tooltipDisabled]="
              showFloatNav && showFloatNav?.selcetedFiles.length === 1
            "
                            style="color: #ffffff; height: 100%; width: 20px"
                            svgIcon="bizibox_merge"
                            tooltipPosition="top"
                    >
                    </mat-icon>
                </div>
                <div>
                    <mat-icon
                            (click)="getDocumentStorageDataForAllSelectedFiles()"
                            [pTooltip]="'הורדה'"
                            style="color: #ffffff; height: 100%; width: 19px"
                            svgIcon="bizibox_download"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div
                        *ngIf="
            fileStatus !== 'WAIT_FOR_CARE' &&
            userService.appData?.userData?.companies &&
            userService.appData?.userData?.companies.length > 1
          "
                >
                    <mat-icon
                            (click)="journalTransComponent.docCompanyReplacement.show()"
                            [pTooltip]="'מעבר לחברה אחרת'"
                            style="color: #ffffff; height: 100%; width: 23px"
                            svgIcon="swap"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div *ngIf="fileStatus === 'WAIT_FOR_CONFIRM'">
                    <mat-icon
                            (click)="journalTransComponent.docToSend.show(null, showFloatNav)"
                            [pTooltip]="'שליחת הודעה ללקוח'"
                            style="color: #ffffff; height: 100%; width: 23px"
                            svgIcon="send"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div *ngIf="fileStatus === 'WAIT_FOR_CONFIRM'">
                    <mat-icon
                            (click)="journalTransComponent.docToRemove.show(null, showFloatNav)"
                            [pTooltip]="'הסרת מסמכים'"
                            style="color: #ffffff; height: 100%; width: 23px"
                            svgIcon="deleteInvoice"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div>
                    <mat-icon
                            (click)="updateOcrDocumentDataForAllSelectedFiles()"
                            [pTooltip]="
              showFloatNav && showFloatNav?.selcetedFilesFlag
                ? 'מסומן בדגל'
                : 'לא מסומן דגל'
            "
                            [svgIcon]="
              showFloatNav && showFloatNav?.selcetedFilesFlag
                ? 'flagBg'
                : 'flag'
            "
                            style="color: #ffffff; height: 100%; width: 20px"
                            tooltipPosition="top"
                    >
                    </mat-icon>
                </div>
                <div>
                    <mat-icon
                            (click)="journalTransComponent.docNote.show(null, showFloatNav)"
                            [pTooltip]="
              showFloatNav && showFloatNav?.selcetedFilesNote
                ? 'קיים פתק'
                : 'ללא פתקית'
            "
                            [svgIcon]="
              showFloatNav && showFloatNav?.selcetedFilesNote
                ? 'noteBg'
                : 'note'
            "
                            style="color: #ffffff; height: 100%; width: 20px"
                            tooltipPosition="top"
                    >
                    </mat-icon>
                </div>
                <div>
                    <mat-icon
                            (click)="getDocumentStorageDataForAllSelectedFiles(true)"
                            [pTooltip]="'הדפסה'"
                            style="width: 21px; color: #ffffff"
                            svgIcon="print"
                            tooltipPosition="top"
                    >
                    </mat-icon>
                </div>
            </div>
        </ng-container>

        <ng-template #CREATE_JOURNAL_TRANS>
            <div
                    (click)="handleClick($event)"
                    [class.esderMaamNone]="
          userService.appData?.userData?.companySelect?.esderMaam === 'NONE'
        "
                    class="documentsDataTable journalTransData"
            >
                <div #header [class.scrollContainerHasScroll]="scrollContainerHasScroll"
                     class="header">
                    <div>&nbsp;</div>
                    <div (click)="toggleCompanyFilesOrderTo('invoiceDate')">
                        ת.מסמך

                        <mat-icon
                                *ngIf="journalTransData && journalTransData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'invoiceDate'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'invoiceDate'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('asmachta')">
                        אסמכתא

                        <mat-icon
                                *ngIf="journalTransData && journalTransData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'asmachta'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'asmachta'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div>
                        <!--                    <app-tooltip-category [title]="'להמשך טיפול'"-->
                        <!--                                          [type]="'edit'"-->
                        <!--                                          [data]="editArr"-->
                        <!--                                          (changed)="filterCategoryJournalTransData($event)">-->
                        <!--                    </app-tooltip-category>-->

                        <app-tooltip-category
                                (changed)="filterCategoryJournalTransData($event)"
                                [data]="
                typeOfStatus === 'maamPrc' ? maamPrcArr : transTypeCodeArr
              "
                                [title]="
                typeOfStatus
                  ? typeOfStatus === 'maamPrc'
                    ? '%מע״מ'
                    : 'ס.תנועה'
                  : ''
              "
                                [type]="typeOfStatus"
                        >
                        </app-tooltip-category>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('name')">
                        שם ספק/ לקוח

                        <mat-icon
                                *ngIf="journalTransData && journalTransData.length"
                                [class.active]="companyFilesSortControl.value?.orderBy === 'name'"
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'name'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('oppositeCust')">
                        כרטיס נגדי

                        <mat-icon
                                *ngIf="journalTransData && journalTransData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'oppositeCust'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'oppositeCust'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>

                    <!--                <div (click)="toggleCompanyFilesOrderTo('totalMaam')">-->
                    <!--                    מע"מ מדווח-->

                    <!--                    <mat-icon class="sort-icon"-->
                    <!--                              [class.active]="companyFilesSortControl.value?.orderBy === 'totalMaam'"-->
                    <!--                              *ngIf="journalTransData && journalTransData.length"-->
                    <!--                              [svgIcon]="(companyFilesSortControl.value?.orderBy === 'totalMaam' ? companyFilesSortControl.value.order : null) | sortIcon">-->
                    <!--                    </mat-icon>-->
                    <!--                </div>-->

                    <div (click)="toggleCompanyFilesOrderTo('totalIncludeMaam')">
                        סכום כולל

                        <mat-icon
                                *ngIf="journalTransData && journalTransData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'totalIncludeMaam'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'totalIncludeMaam'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div (click)="toggleCompanyFilesOrderTo('totalIncludeMaamMatah')">
                        סכום מט"ח

                        <mat-icon
                                *ngIf="journalTransData && journalTransData.length"
                                [class.active]="
                companyFilesSortControl.value?.orderBy ===
                'totalIncludeMaamMatah'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy ===
                'totalIncludeMaamMatah'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>

                    <div>
                        <app-tooltip-category
                                (changed)="filterCategoryJournalTransData($event)"
                                [data]="monthsJournalTransArr"
                                [title]="'חודשי מע״מ'"
                                [type]="'maamMonth'"
                        >
                        </app-tooltip-category>
                    </div>
                    <div class="iconPic">&nbsp;</div>
                    <div
                            *ngIf="userService.appData && userService.appData.isAdmin"
                            class="iconPic uniqueId"
                    >
                        unique_id
                    </div>
                    <div class="iconPic">&nbsp;</div>
                </div>

                <div
                        [ngStyle]="{'height': (getPageHeightFunc(header.getBoundingClientRect().bottom + 10)) +'px'}"
                        class="body containerList containerListData scrollbar-dynamic"
                        style="position: relative"
                >


                    <div *ngIf="loader" class="loader">
                        <div class="circle"></div>
                    </div>
                    <ng-container *ngIf="journalTransData && journalTransData.length">

                        <cdk-virtual-scroll-viewport #scrollContainerVirtual #virtualScroll
                                                     [ngStyle]="{'height': (getPageHeightFunc(header.getBoundingClientRect().bottom + 10)) +'px'}"
                                                     class="scroll-chrome"
                                                     itemSize="35">
                            <div *cdkVirtualFor="let parent of allTransData; let iParent = index; trackBy: trackByIdJournalTransData"
                                 [ngStyle]="{ height: '35px' }"
                                 style="position: relative">
                                <div
                                        (click)="colsAct(journalTransData[parent.idx], parent.idx)"
                                        *ngIf="!parent.fileId"
                                        [class.active]="journalTransData[parent.idx].showChildren"
                                        [class.pettyCash]="journalTransData[parent.idx].pettyCash"
                                        [class]="'group-rows ' + journalTransData[parent.idx].status"
                                        class="group-rows"
                                >
                                    <div>
                                        <img
                                                [src]="
                        journalTransData[parent.idx].showChildren
                          ? '/assets/images/stateOpen.png'
                          : '/assets/images/stateClose.png'
                      "
                                                height="9"
                                                style="
                        width: 14px;
                        height: 9px;
                        vertical-align: middle;
                        cursor: pointer;
                      "
                                                width="14"
                                        />

                                        <div>
                                            <p-checkbox (click)="$event.stopPropagation()"
                                                        (onChange)="
                          journalTransData[parent.idx].selcetFiles =
                            !journalTransData[parent.idx].selcetFiles;
                          checkAllChildSelectedJournalTransData(
                            journalTransData[parent.idx]
                          );
                          checkSelect(
                            journalTransData[parent.idx],
                            journalTransData[parent.idx].fileData
                          );
                          checkSelectedJournalTransData()
                        "
                                                        *ngIf="
                          journalTransData[parent.idx].status !==
                          'PERMANENT_COMMAND'

                          &&
                            journalTransData[parent.idx].status !==
                          'FOLDER_PLUS_ISSUE'

                        "
                                                        [binary]="true"
                                                        [disabled]="
                          journalTransData[parent.idx].disabledSelcetFile
                        "
                                                        [ngModel]="journalTransData[parent.idx].selcetFiles"
                                                        checkboxIcon="fa fa-check"
                                            >
                                            </p-checkbox>
                                        </div>
                                    </div>

                                    <!--                                maamComponentsArray-->
                                    <!--                                allManualCustIdsArray-->

                                    <ng-container
                                            [ngSwitch]="journalTransData[parent.idx].status">
                                        <ng-container *ngSwitchCase="'CREATE_JOURNAL_TRANS'">
                                            <div
                                                    *ngIf="
                          journalTransData[parent.idx].vatDateFrom ||
                          journalTransData[parent.idx].vatDateTill
                        "
                                                    class="text-ellipsis"
                                            >
                        <span style="position: relative">
                          {{ journalTransData[parent.idx].numOfFiles }}

                            חשבוניות

                          <ng-container
                                  *ngIf="!journalTransData[parent.idx].pettyCash"
                          >
                            ע״ס
                            <span
                                    style="display: inline-block; direction: ltr"
                            >{{
                                journalTransData[parent.idx].totalIncludeMaam
                                    | sum
                                }}</span
                            >
                              <!--                                                        <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(journalTransData[parent.idx].totalIncludeMaam)}}</span>-->

                            ש״ח
                          </ng-container>
                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            של
                            <strong> קופה קטנה </strong>
                            לא מזוהות
                          </ng-container>

                          מחכות לקליטה עבור

                          <ng-container
                                  *ngIf="
                              journalTransData[parent.idx]
                                .exportFileVatPeriod !== 'NONE'
                            "
                          >
                            מע"מ

                            <span
                                    (mouseleave)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? maamComponentsArray.hide()
                                  : null
                              "
                                    (mouseover)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? openOverlayPanel(
                                      maamComponentsArray,
                                      $event,
                                      journalTransData[parent.idx]
                                        .maamComponentsArray,
                                      true
                                    )
                                  : null
                              "
                                    [class.link]="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                              "
                            >
                              {{ journalTransData[parent.idx].monthName }}
                            </span>
                          </ng-container>
                          <ng-container
                                  *ngIf="
                              journalTransData[parent.idx]
                                .exportFileVatPeriod === 'NONE'
                            "
                          >
                            <span
                                    (mouseleave)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? maamComponentsArray.hide()
                                  : null
                              "
                                    (mouseover)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? openOverlayPanel(
                                      maamComponentsArray,
                                      $event,
                                      journalTransData[parent.idx]
                                        .maamComponentsArray,
                                      true
                                    )
                                  : null
                              "
                                    [class.link]="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                              "
                            >
                              מע"מ
                            </span>
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].batchNumber"
                          >
                            במנה
                              {{ journalTransData[parent.idx].batchNumber }}
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            - סך מע"מ מדווח
                              {{
                              journalTransData[parent.idx].totalMaam | sum: true
                              }}
                              &nbsp;{{ 'ILS' | currencySymbol }}

                              <img
                                      height="16"
                                      matTooltip='מומלץ לקלוט את הקובץ בסוף חודש דיווח ע"מ לוודא שסכום המע"מ הכולל לא יעבור את ה5% מסך הדיווח ב-PCN'
                                      matTooltipPosition="below"
                                      src="/assets/images/infoBudgetCreate.png"
                                      style="
                                position: absolute;
                                top: 0;
                                bottom: 0;
                                margin: auto;
                                left: -20px;
                              "
                                      width="16"
                              />
                          </ng-container>
                        </span>

                                                <ng-container
                                                        *ngIf="journalTransData[parent.idx].dateLastModified"
                                                >
                          <span
                                  [ngStyle]="{
                              'margin-right': !journalTransData[parent.idx]
                                .pettyCash
                                ? '1em'
                                : '2em'
                            }"
                          >
                            ({{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'H:mm') || ''
                              }}
                              )
                              {{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'd/M/yy') || ''
                              }}
                          </span>
                                                </ng-container>

                                                <i
                                                        (mouseleave)="
                            journalTransData[parent.idx].allManualCustIdsArray
                              .length
                              ? allManualCustIdsArray.hide()
                              : null
                          "
                                                        (mouseover)="
                            journalTransData[parent.idx].allManualCustIdsArray
                              .length
                              ? openOverlayPanel(
                                  allManualCustIdsArray,
                                  $event,
                                  journalTransData[parent.idx]
                                    .allManualCustIdsArray
                                )
                              : null
                          "
                                                        *ngIf="
                            journalTransData[parent.idx].allManualCustIdsArray
                              .length
                          "
                                                        class="fas fa-fw fa-exclamation-triangle"
                                                        style="color: #df0000; margin-right: 10px"
                                                ></i>
                                            </div>
                                            <div
                                                    *ngIf="
                          !journalTransData[parent.idx].vatDateFrom &&
                          !journalTransData[parent.idx].vatDateTill
                        "
                                                    class="text-ellipsis"
                                            >
                        <span style="position: relative">
                          {{ journalTransData[parent.idx].numOfFiles }}

                            חשבוניות

                          <ng-container
                                  *ngIf="!journalTransData[parent.idx].pettyCash"
                          >
                            ע״ס

                            <span
                                    style="display: inline-block; direction: ltr"
                            >{{
                                journalTransData[parent.idx].totalIncludeMaam
                                    | sum
                                }}</span
                            >
                              <!--                                                     <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(journalTransData[parent.idx].totalIncludeMaam)}}</span>-->

                            ש״ח
                          </ng-container>
                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            של
                            <strong> קופה קטנה </strong>
                            לא מזוהות
                          </ng-container>

                          מחכות לקליטה

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].batchNumber"
                          >
                            במנה
                              {{ journalTransData[parent.idx].batchNumber }}
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            - סך מע"מ מדווח
                              {{
                              journalTransData[parent.idx].totalMaam | sum: true
                              }}
                              &nbsp;{{ 'ILS' | currencySymbol }}

                              <img
                                      height="16"
                                      matTooltip='מומלץ לקלוט את הקובץ בסוף חודש דיווח ע"מ לוודא שסכום המע"מ הכולל לא יעבור את ה5% מסך הדיווח ב-PCN'
                                      matTooltipPosition="below"
                                      src="/assets/images/infoBudgetCreate.png" style="
                                position: absolute;
                                top: 0;
                                bottom: 0;
                                margin: auto;
                                left: -20px;
                              "
                                      width="16"
                              />
                          </ng-container>
                        </span>
                                                <ng-container
                                                        *ngIf="journalTransData[parent.idx].dateLastModified"
                                                >
                          <span
                                  [ngStyle]="{
                              'margin-right': !journalTransData[parent.idx]
                                .pettyCash
                                ? '1em'
                                : '2em'
                            }"
                          >
                            ({{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'H:mm') || ''
                              }}
                              )
                              {{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'd/M/yy') || ''
                              }}
                          </span>
                                                </ng-container>

                                                <i
                                                        (mouseleave)="
                            journalTransData[parent.idx].allManualCustIdsArray
                              .length
                              ? allManualCustIdsArray.hide()
                              : null
                          "
                                                        (mouseover)="
                            journalTransData[parent.idx].allManualCustIdsArray
                              .length
                              ? openOverlayPanel(
                                  allManualCustIdsArray,
                                  $event,
                                  journalTransData[parent.idx]
                                    .allManualCustIdsArray
                                )
                              : null
                          "
                                                        *ngIf="
                            journalTransData[parent.idx].allManualCustIdsArray
                              .length
                          "
                                                        class="fas fa-fw fa-exclamation-triangle"
                                                        style="color: #df0000; margin-right: 10px"
                                                ></i>
                                            </div>
                                            <div class="text-ellipsis" style="flex: 162">
                                                <div
                                                        (click)="
                            createDocFile(
                              journalTransData[parent.idx].ocrExportFileId
                            );
                            $event.stopPropagation()
                          "
                                                        *ngIf="
                            userService.appData && userService.appData.isAdmin
                          "
                                                        class="alert"
                                                        style="margin-left: 15px"
                                                >
                                                    הורדת קובץ
                                                </div>

                                                <ng-container
                                                        *ngIf="!journalTransData[parent.idx].pettyCash"
                                                >
                                                    <ng-container
                                                            *ngIf="
                              journalTransData[parent.idx].collapseText;
                              else noCollapseText;
                              let collapseText
                            "
                                                    >
                                                        <div style="padding: 0 3ch">{{ collapseText }}</div>
                                                        <div
                                                                (click)="
                                cancelExportFileFor(
                                  journalTransData[parent.idx]
                                );
                                $event.stopPropagation()
                              "
                                                                class="alert"
                                                        >
                                                            ביטול הקובץ
                                                        </div>
                                                    </ng-container>
                                                    <ng-template #noCollapseText>
                                                        <!--															(userService?.appData?.userData?.companySelect?.folderPlus ?-->
                                                        <!--															createExportFileForFolder(journalTransData[parent.idx]) :-->

                                                        <!--															journalTransData[parent.idx]-->
                                                        <!--															.manualCustIdsArray &&-->
                                                        <!--															journalTransData[parent.idx].manualCustIdsArray-->
                                                        <!--															.length-->
                                                        <!--															? createExportFileForPrevModal(-->
                                                        <!--															journalTransData[parent.idx]-->
                                                        <!--															)-->
                                                        <!--															: createExportFileFor(-->
                                                        <!--															journalTransData[parent.idx]-->
                                                        <!--															));-->

                                                        <div
                                                                (click)="createExportFileForFolder(journalTransData[parent.idx]);
                                $event.stopPropagation()
                              "
                                                                class="alert"
                                                        >

                                                            {{!userService?.appData?.userData?.companySelect?.folderPlus ? 'ליצירת קובץ הנה"ח' : 'קלוט קובץ בתוכנת הנה”ח'}}

                                                        </div>
                                                    </ng-template>
                                                </ng-container>

                                                <div
                                                        (click)="
                            changePettyCashPress(
                              journalTransData[parent.idx].fileData,
                              journalTransData[parent.idx].monthName,
                              true
                            );
                            $event.stopPropagation()
                          "
                                                        *ngIf="journalTransData[parent.idx].pettyCash"
                                                        class="alert"
                                                >
                                                    הוספה לקובץ קליטה
                                                </div>
                                            </div>
                                            <!--                                    <div>-->
                                            <!--                                        &nbsp;-->
                                            <!--                                        &lt;!&ndash;                                        <div class="trash">&ndash;&gt;-->
                                            <!--                                        &lt;!&ndash;                                            <i class="fas fa-trash"&ndash;&gt;-->
                                            <!--                                        &lt;!&ndash;                                               (click)="ocrExportFileToRemove = {ocrExportFileId: parent.ocrExportFileId, numOfFiles: parent.numOfFiles}; $event.stopPropagation();"></i>&ndash;&gt;-->
                                            <!--                                        &lt;!&ndash;                                        </div>&ndash;&gt;-->
                                            <!--                                    </div>-->
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'JOURNAL_TRANS_PROCESS'">
                                            <div class="text-ellipsis">
                        <span>
                          {{ journalTransData[parent.idx].numOfFiles }}

                            חשבוניות בתהליך קליטה
                        </span>
                                            </div>
                                            <div class="text-ellipsis" style="flex: 162">
                                                <div
                                                        (click)="
                            createDocFile(
                              journalTransData[parent.idx].ocrExportFileId
                            );
                            $event.stopPropagation()
                          "
                                                        *ngIf="userService.appData?.isAdmin"
                                                        class="alert"
                                                        style="margin-left: 15px"
                                                >
                                                    הורדת קובץ
                                                </div>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'TEMP_COMMAND'">
                                            <div class="text-ellipsis">
                        <span style="position: relative">
                          {{ journalTransData[parent.idx].numOfFiles }}
                            חשבוניות
                          <ng-container
                                  *ngIf="!journalTransData[parent.idx].pettyCash"
                          >
                            ע״ס
                            <span
                                    style="display: inline-block; direction: ltr"
                            >{{
                                journalTransData[parent.idx].totalIncludeMaam
                                    | sum
                                }}</span
                            >
                              <!--                                                <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(journalTransData[parent.idx].totalIncludeMaam)}}</span>-->

                            ש״ח
                          </ng-container>
                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            של
                            <strong> קופה קטנה </strong>
                            לא מזוהות
                          </ng-container>
                          נקלטו עבור

                          <ng-container
                                  *ngIf="
                              journalTransData[parent.idx]
                                .exportFileVatPeriod !== 'NONE'
                            "
                          >
                            מע"מ

                            <span
                                    (mouseleave)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? maamComponentsArray.hide()
                                  : null
                              "
                                    (mouseover)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? openOverlayPanel(
                                      maamComponentsArray,
                                      $event,
                                      journalTransData[parent.idx]
                                        .maamComponentsArray,
                                      true
                                    )
                                  : null
                              "
                                    [class.link]="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                              "
                            >
                              {{ journalTransData[parent.idx].monthName }}
                            </span>
                          </ng-container>
                          <ng-container
                                  *ngIf="
                              journalTransData[parent.idx]
                                .exportFileVatPeriod === 'NONE'
                            "
                          >
                            <span
                                    (mouseleave)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? maamComponentsArray.hide()
                                  : null
                              "
                                    (mouseover)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? openOverlayPanel(
                                      maamComponentsArray,
                                      $event,
                                      journalTransData[parent.idx]
                                        .maamComponentsArray,
                                      true
                                    )
                                  : null
                              "
                                    [class.link]="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                              "
                            >מע"מ</span
                            >
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].batchNumber"
                          >
                            במנה
                              {{ journalTransData[parent.idx].batchNumber }}
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            - סך מע"מ מדווח
                              {{
                              journalTransData[parent.idx].totalMaam | sum: true
                              }}
                              &nbsp;{{ 'ILS' | currencySymbol }}

                              <img
                                      height="16"
                                      matTooltip='מומלץ לקלוט את הקובץ בסוף חודש דיווח ע"מ לוודא שסכום המע"מ הכולל לא יעבור את ה5% מסך הדיווח ב-PCN'
                                      matTooltipPosition="below"
                                      src="/assets/images/infoBudgetCreate.png" style="
                                position: absolute;
                                top: 0;
                                bottom: 0;
                                margin: auto;
                                left: -20px;
                              "
                                      width="16"
                              />
                          </ng-container>
                        </span>
                                                <ng-container
                                                        *ngIf="journalTransData[parent.idx].dateLastModified"
                                                >
                          <span
                                  [ngStyle]="{
                              'margin-right': !journalTransData[parent.idx]
                                .pettyCash
                                ? '1em'
                                : '2em'
                            }"
                          >
                            ({{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'H:mm') || ''
                              }}
                              )
                              {{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'd/M/yy') || ''
                              }}
                          </span>
                                                </ng-container>
                                            </div>

                                            <div class="text-ellipsis">
                                                <div
                                                        *ngIf="!journalTransData[parent.idx].pettyCash"
                                                        class="alert"
                                                        style="color: #df0000"
                                                >
                                                    הקובץ נקלט במנה זמנית
                                                </div>
                                                <div
                                                        (click)="
                            changePettyCashPress(
                              journalTransData[parent.idx].fileData,
                              journalTransData[parent.idx].monthName,
                              true
                            );
                            $event.stopPropagation()
                          "
                                                        *ngIf="journalTransData[parent.idx].pettyCash"
                                                        class="alert"
                                                >
                                                    הוספה לקובץ קליטה
                                                </div>
                                            </div>
                                            <!--                                    <div>-->
                                            <!--                                        &nbsp;-->
                                            <!--                                    </div>-->
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'NOT_TEMP_COMMAND'">
                                            <div class="text-ellipsis">
                        <span style="position: relative">
                          {{ journalTransData[parent.idx].numOfFiles }}

                            {{
                            journalTransData[parent.idx].numOfFiles === 1
                                ? ' חשבונית '
                                : ' חשבוניות '
                            }}

                            <ng-container
                                    *ngIf="journalTransData[parent.idx].pettyCash"
                            >
                            של
                            <strong> קופה קטנה </strong>
                            לא
                                {{
                                journalTransData[parent.idx].numOfFiles === 1
                                    ? ' מזוהה '
                                    : ' מזוהות '
                                }}
                          </ng-container>

                            {{
                            journalTransData[parent.idx].numOfFiles === 1
                                ? ' נמחקה '
                                : ' נמחקו '
                            }}

                            ממנה זמנית

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].batchNumber"
                          >
                            {{ journalTransData[parent.idx].batchNumber }}
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            - סך מע"מ מדווח
                              {{
                              journalTransData[parent.idx].totalMaam | sum: true
                              }}
                              &nbsp;{{ 'ILS' | currencySymbol }}

                              <img
                                      height="16"
                                      matTooltip='מומלץ לקלוט את הקובץ בסוף חודש דיווח ע"מ לוודא שסכום המע"מ הכולל לא יעבור את ה5% מסך הדיווח ב-PCN'
                                      matTooltipPosition="below"
                                      src="/assets/images/infoBudgetCreate.png" style="
                                position: absolute;
                                top: 0;
                                bottom: 0;
                                margin: auto;
                                left: -20px;
                              "
                                      width="16"
                              />
                          </ng-container>
                        </span>
                                            </div>

                                            <div>
                                                <div
                                                        (click)="
                            prepareFileDataVar(
                              journalTransData[parent.idx].fileData
                            );
                            journalTransComponent.docFolders.show(
                              userService.appData?.userData?.companySelect
                                ?.companyId
                            );
                            $event.stopPropagation()
                          "
                                                        class="alert"
                                                >
                                                    העברה לארכיון
                                                </div>
                                                <span style="margin: 0px 6px"> | </span>
                                                <div
                                                        (click)="
                            changePettyCashPress(
                              journalTransData[parent.idx].fileData,
                              journalTransData[parent.idx].monthName,
                              true
                            );
                            $event.stopPropagation()
                          "
                                                        class="alert"
                                                >
                                                    הוספה לקובץ קליטה
                                                </div>
                                            </div>
                                            <!--                                    <div>-->
                                            <!--                                        &nbsp;-->
                                            <!--                                    </div>-->
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'NOT_PERMANENT_COMMAND'">
                                            <div class="text-ellipsis">
                        <span style="position: relative">
                          {{ journalTransData[parent.idx].numOfFiles }}
                            {{
                            journalTransData[parent.idx].numOfFiles === 1
                                ? ' חשבונית '
                                : ' חשבוניות '
                            }}

                            <ng-container
                                    *ngIf="journalTransData[parent.idx].pettyCash"
                            >
                            של
                            <strong> קופה קטנה </strong>
                            לא
                                {{
                                journalTransData[parent.idx].numOfFiles === 1
                                    ? ' מזוהה '
                                    : ' מזוהות '
                                }}
                          </ng-container>
                            {{
                            journalTransData[parent.idx].numOfFiles === 1
                                ? ' נמחקה '
                                : ' נמחקו '
                            }}

                            ממנה קבועה
                          <ng-container
                                  *ngIf="journalTransData[parent.idx].batchNumber"
                          >
                            {{ journalTransData[parent.idx].batchNumber }}
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].pettyCash"
                          >
                            - סך מע"מ מדווח
                              {{
                              journalTransData[parent.idx].totalMaam | sum: true
                              }}
                              &nbsp;{{ 'ILS' | currencySymbol }}

                              <img
                                      height="16"
                                      matTooltip='מומלץ לקלוט את הקובץ בסוף חודש דיווח ע"מ לוודא שסכום המע"מ הכולל לא יעבור את ה5% מסך הדיווח ב-PCN'
                                      matTooltipPosition="below"
                                      src="/assets/images/infoBudgetCreate.png" style="
                                position: absolute;
                                top: 0;
                                bottom: 0;
                                margin: auto;
                                left: -20px;
                              "
                                      width="16"
                              />
                          </ng-container>
                        </span>
                                            </div>

                                            <div>
                                                <div
                                                        (click)="
                            prepareFileDataVar(
                              journalTransData[parent.idx].fileData
                            );
                            journalTransComponent.docFolders.show(
                              userService.appData?.userData?.companySelect
                                ?.companyId
                            );
                            $event.stopPropagation()
                          "
                                                        class="alert"
                                                >
                                                    העברה לארכיון
                                                </div>
                                                <span style="margin: 0px 6px"> | </span>
                                                <div
                                                        (click)="
                            changePettyCashPress(
                              journalTransData[parent.idx].fileData,
                              journalTransData[parent.idx].monthName,
                              journalTransData[parent.idx].pettyCash
                            );
                            $event.stopPropagation()
                          "
                                                        class="alert"
                                                >
                                                    הוספה לקובץ קליטה
                                                </div>
                                            </div>
                                            <!--                                    <div>-->
                                            <!--                                        &nbsp;-->
                                            <!--                                    </div>-->
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'PERMANENT_COMMAND'">
                                            <div class="text-ellipsis">
                        <span style="position: relative">
                          {{ journalTransData[parent.idx].numOfFiles }}

                            חשבוניות

                          <ng-container
                                  *ngIf="!journalTransData[parent.idx].pettyCash"
                          >
                            ע״ס
                            <span
                                    style="display: inline-block; direction: ltr"
                            >{{
                                journalTransData[parent.idx].totalIncludeMaam
                                    | sum
                                }}</span
                            >
                              <!--                                               <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(journalTransData[parent.idx].totalIncludeMaam)}}</span>-->
                            ש״ח
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].vatDateFrom"
                          >
                            נקלטו עבור

                            <ng-container
                                    *ngIf="
                                journalTransData[parent.idx]
                                  .exportFileVatPeriod !== 'NONE'
                              "
                            >
                              מע"מ

                              <span
                                      (mouseleave)="
                                  journalTransData[parent.idx]
                                    .maamComponentsArray.length
                                    ? maamComponentsArray.hide()
                                    : null
                                "
                                      (mouseover)="
                                  journalTransData[parent.idx]
                                    .maamComponentsArray.length
                                    ? openOverlayPanel(
                                        maamComponentsArray,
                                        $event,
                                        journalTransData[parent.idx]
                                          .maamComponentsArray,
                                        true
                                      )
                                    : null
                                "
                                      [class.link]="
                                  journalTransData[parent.idx]
                                    .maamComponentsArray.length
                                "
                              >
                                {{ journalTransData[parent.idx].monthName }}
                              </span>
                            </ng-container>
                            <ng-container
                                    *ngIf="
                                journalTransData[parent.idx]
                                  .exportFileVatPeriod === 'NONE'
                              "
                            >
                              <span
                                      (mouseleave)="
                                  journalTransData[parent.idx]
                                    .maamComponentsArray.length
                                    ? maamComponentsArray.hide()
                                    : null
                                "
                                      (mouseover)="
                                  journalTransData[parent.idx]
                                    .maamComponentsArray.length
                                    ? openOverlayPanel(
                                        maamComponentsArray,
                                        $event,
                                        journalTransData[parent.idx]
                                          .maamComponentsArray,
                                        true
                                      )
                                    : null
                                "
                                      [class.link]="
                                  journalTransData[parent.idx]
                                    .maamComponentsArray.length
                                "
                              >מע"מ</span
                              >
                            </ng-container>
                          </ng-container>

                          <ng-container
                                  *ngIf="
                              !journalTransData[parent.idx].vatDateFrom &&
                              journalTransData[parent.idx].dateLastModified
                            "
                          >
                            נקלטו בחודש

                              {{
                              journalTransData[parent.idx].dateLastModifiedName
                              }}
                          </ng-container>

                          <ng-container
                                  *ngIf="journalTransData[parent.idx].batchNumber"
                          >
                            במנה
                              {{ journalTransData[parent.idx].batchNumber }}
                          </ng-container>
                        </span>

                                                <ng-container
                                                        *ngIf="journalTransData[parent.idx].dateLastModified"
                                                >
                          <span [ngStyle]="{ 'margin-right': '1em' }">
                            ({{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'H:mm') || ''
                              }}
                              )
                              {{
                              (journalTransData[parent.idx].dateLastModified
                                  | date: 'd/M/yy') || ''
                              }}
                          </span>
                                                </ng-container>
                                            </div>

                                            <div class="text-ellipsis">
                                                <mat-icon
                                                        style="color: #022258; height: 18px; width: 35px"
                                                        svgIcon="tick"
                                                ></mat-icon>
                                                <div>הקובץ נקלט במנה קבועה בהנה"ח</div>
                                            </div>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'FOLDER_PLUS_ISSUE'">
                                            <div class="text-ellipsis">
                        <span style="position: relative">
                          {{ journalTransData[parent.idx].numOfFiles }}

                            חשבוניות


                            ע״ס
                            <span
                                    style="display: inline-block; direction: ltr"
                            >{{
                                journalTransData[parent.idx].totalIncludeMaam
                                    | sum
                                }}</span
                            >
                            <!--                                               <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(journalTransData[parent.idx].totalIncludeMaam)}}</span>-->
                            ש״ח

לא נקלטו בחשבשבת

                        </span>
                                                <ng-container
                                                        *ngIf="
                              journalTransData[parent.idx]
                                .exportFileVatPeriod !== 'NONE'
                            "
                                                >
                                                    עבור מע"מ

                                                    <span
                                                            (mouseleave)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? maamComponentsArray.hide()
                                  : null
                              "
                                                            (mouseover)="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                                  ? openOverlayPanel(
                                      maamComponentsArray,
                                      $event,
                                      journalTransData[parent.idx]
                                        .maamComponentsArray,
                                      true
                                    )
                                  : null
                              "
                                                            [class.link]="
                                journalTransData[parent.idx].maamComponentsArray
                                  .length
                              "
                                                    >
                              {{ journalTransData[parent.idx].monthName }}
                            </span>
                                                </ng-container>

                                            </div>

                                            <div class="text-ellipsis" style="flex: 162">
                                                <div
                                                        (click)="
                    cancelExportFileFor(
                      journalTransData[parent.idx]
                    );
                    $event.stopPropagation()
                  "
                                                        *ngIf="
                userService.appData && userService.appData.isAdmin
              "
                                                        class="alert"
                                                        style="
    margin-left: 20px;
"
                                                >
                                                    ביטול הקובץ
                                                </div>
                                                <div class="text-ellipsis" style="
    display: flex;
    align-items: center;
    justify-content: flex-end;
">
                                                    <img
                                                            [pTooltip]="journalTransData[parent.idx].folderErrorDesc"
                                                            [tooltipDisabled]="!journalTransData[parent.idx].folderErrorDesc"
                                                            height="15"
                                                            src="/assets/images/infoTooltip.png"
                                                            style="margin-left: 5px"
                                                            tooltipPosition="top"
                                                            width="15"
                                                    />
                                                    <div class="red" style="text-decoration:underline;color: #df0000;">
                                                        קיימת בעיה בקליטת הקובץ לתוכנת הנה״ח
                                                    </div>
                                                </div>
                                            </div>

                                        </ng-container>

                                    </ng-container>

                                    <button
                                            (click)="
                      printPage(journalTransData[parent.idx]);
                      $event.stopPropagation()
                    "
                                            [matTooltip]="
                      'appWalk.customers.report.printBtn' | translate
                    "
                                            matTooltipPosition="above"
                                            style="
                      outline: none;
                      border: none;
                      padding: 0;
                      margin: 0;
                      margin-right: 15px;
                      cursor: pointer;
                    "
                                    >
                                        <img
                                                height="17"
                                                src="/assets/images/printIcon.png"
                                                width="19"
                                        />
                                    </button>
                                </div>
                                <div
                                        *ngIf="
                    parent.fileId &&
                    journalTransData[parent.idxParent].showChildren
                  "
                                        [class.activeRowBack]="
                    journalTransData[parent.idxParent].fileData[parent.idx]
                      .fileId === fileIdToToActive
                  "
                                        [class.active]="
                    (tooltipEdit.overlayVisible &&
                      tooltipEditFile.fileId === parent.fileId) ||
                    dropdownMaam.overlayVisible
                  "
                                        [class.disabled]="
                    journalTransData[parent.idxParent].status ===
                    'PERMANENT_COMMAND' ||  journalTransData[parent.idxParent].status ===
                    'FOLDER_PLUS_ISSUE'
                  "
                                        [class.gray]="
                    journalTransData[parent.idxParent].status ===
                    'JOURNAL_TRANS_PROCESS'
                  "
                                        class="row"
                                >
                                    <div>
                                        <p-checkbox (onChange)="
                        journalTransData[parent.idxParent].fileData[
                          parent.idx
                        ].selcetFile =
                          !journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].selcetFile;
                        checkSelect(
                          journalTransData[parent.idxParent],
                          journalTransData[parent.idxParent].fileData
                        );
                        checkSelectedJournalTransData()
                      "
                                                    *ngIf="
                        journalTransData[parent.idxParent].status !==
                        'PERMANENT_COMMAND'
                        &&
                             journalTransData[parent.idxParent].status !==
                        'FOLDER_PLUS_ISSUE'

                      "
                                                    [binary]="true"
                                                    [disabled]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .disabledSelcetFile
                      "
                                                    [ngModel]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .selcetFile
                      "
                                                    checkboxIcon="fa fa-check"
                                        >
                                        </p-checkbox>
                                    </div>
                                    <div style="display: flex">
                                        <div
                                                [innerHTML]="
                        (journalTransData[parent.idxParent].fileData[parent.idx]
                          .invoiceDate | date: 'dd/MM/y') || '-'
                          | highlight: queryString
                      "
                                                [ngStyle]="{
                        'margin-right':
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].invoiceDate !== null
                            ? '0'
                            : '12%'
                      }"
                                                class="text-ellipsis"
                                                style="flex: 80; text-align: right; max-width: none"
                                        ></div>

                                        <!--                                    <div-->

                                        <!--                                            style="    -webkit-box-flex: 45;-->
                                        <!--                flex: 45;-->
                                        <!--                text-align: center;-->
                                        <!--                max-width: 40px;">-->
                                        <!--&lt;!&ndash;                                                    <span&ndash;&gt;-->
                                        <!--&lt;!&ndash;                                                            *ngIf="journalTransData[parent.idxParent].fileData[parent.idx].createdUser"&ndash;&gt;-->
                                        <!--&lt;!&ndash;                                                            [matTooltip]="journalTransData[parent.idxParent].fileData[parent.idx].createdUser"&ndash;&gt;-->
                                        <!--&lt;!&ndash;                                                            matTooltipPosition="below"&ndash;&gt;-->
                                        <!--&lt;!&ndash;                                                            [class]="journalTransData[parent.idxParent].fileData[parent.idx].accountant ? 'icon-user-circle' : 'icon-user-circle-o'"&ndash;&gt;-->
                                        <!--&lt;!&ndash;                                                            style="color:#abaaaa; vertical-align: middle;cursor: pointer;font-size: 16px;"></span>&ndash;&gt;-->

                                        <!--                                        <span-->
                                        <!--                                                *ngIf="journalTransData[parent.idxParent].fileData[parent.idx].uploadSource === 'mail' && journalTransData[parent.idxParent].fileData[parent.idx].mail"-->
                                        <!--                                                [matTooltip]="journalTransData[parent.idxParent].fileData[parent.idx].mail"-->
                                        <!--                                                matTooltipPosition="below"-->
                                        <!--                                                [class]="'icon-user-circle'"-->
                                        <!--                                                style="color:#abaaaa; vertical-align: middle;cursor: pointer;font-size: 16px;"></span>-->
                                        <!--                                    </div>-->

                                        <div
                                                style="
                        margin-left: 15px;
                        flex: 45;
                        text-align: center;
                        max-width: 40px;
                      "
                                        >
                      <span
                              *ngIf="
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].uploadSource
                        "
                              [class]="
                          'icon-' +
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].uploadSource
                        "
                              [matTooltip]="
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].createdUser
                        "
                              matTooltipPosition="below"
                              style="
                          color: #7f7e7e;
                          vertical-align: middle;
                          cursor: pointer;
                          font-size: 18px;
                        "
                      ></span>
                                        </div>
                                    </div>
                                    <div class="text-ellipsis">
                                        <div
                                            #elementTooltip
                                            [innerHTML]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .asmachta || '-' | highlight: queryString
                      "
                                            [ngStyle]="{
                        'margin-right':
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].asmachta !== null
                            ? '0'
                            : '12%'
                      }"
                                            [pTooltip]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .asmachta
                      "
                                            [tooltipDisabled]="
                        elementTooltip.offsetWidth >= elementTooltip.scrollWidth
                      "
                                            class="text-ellipsis"
                                        ></div>
                                    </div>
                                    <div>
                                        <div
                                            #elementTooltip
                                            [innerHTML]="
                        (typeOfStatus === 'transTypeCode'
                          ? journalTransData[parent.idxParent].fileData[
                              parent.idx
                            ].transTypeCode
                          : journalTransData[parent.idxParent].fileData[
                              parent.idx
                            ].maamPrcDesc) || '-' | highlight: queryString
                      "
                                            [ngStyle]="{
                        'margin-right': (
                          typeOfStatus === 'transTypeCode'
                            ? journalTransData[parent.idxParent].fileData[
                                parent.idx
                              ].transTypeCode !== null
                            : journalTransData[parent.idxParent].fileData[
                                parent.idx
                              ].maamPrcDesc !== null
                        )
                          ? '0'
                          : '12%'
                      }"
                                            [pTooltip]="
                        typeOfStatus === 'transTypeCode'
                          ? journalTransData[parent.idxParent].fileData[
                              parent.idx
                            ].transTypeCode
                          : journalTransData[parent.idxParent].fileData[
                              parent.idx
                            ].maamPrcDesc
                      "
                                            [tooltipDisabled]="
                        elementTooltip.offsetWidth >= elementTooltip.scrollWidth
                      "
                                            class="text-ellipsis"
                                        ></div>

                                        <!--                                    <div>-->
                                        <!--                                        {{journalTransData[parent.idxParent].fileData[parent.idx].maamPrcDesc}}-->
                                        <!--                                    </div>-->
                                        <!--                                <div [ngClass]="'flag-' + (file.flag ? 'active' : 'none')"-->
                                        <!--                                     (click)="updateOcrDocumentData(file);"></div>-->
                                        <!--                                <div [ngClass]="'note-' + (file.note ? 'active' : 'none')"-->
                                        <!--                                     (click)="journalTransComponent.docNote.show(file); "></div>-->
                                    </div>
                                    <div class="text-ellipsis">
                                        <div
                                            #elementTooltip
                                            [innerHTML]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .name || '-' | highlight: queryString
                      "
                                            [ngStyle]="{
                        'margin-right':
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].name !== null
                            ? '0'
                            : '12%'
                      }"
                                            [pTooltip]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .name
                      "
                                            [tooltipDisabled]="
                        elementTooltip.offsetWidth >= elementTooltip.scrollWidth
                      "
                                            class="text-ellipsis"
                                        ></div>
                                    </div>
                                    <div class="text-ellipsis">
                                        <div
                                            #elementTooltip
                                            [innerHTML]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .oppositeCust || '-' | highlight: queryString
                      "
                                            [ngStyle]="{
                        'margin-right':
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].oppositeCust !== null
                            ? '0'
                            : '12%'
                      }"
                                            [pTooltip]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .oppositeCust
                      "
                                            [tooltipDisabled]="
                        elementTooltip.offsetWidth >= elementTooltip.scrollWidth
                      "
                                            class="text-ellipsis"
                                        ></div>
                                    </div>
                                    <div
                                            class="text-ellipsis"
                                            style="display: flex; justify-content: space-between"
                                    >
                                        <div
                                                [ngStyle]="{
                        'margin-right':
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].totalIncludeMaam !== null
                            ? '0'
                            : '12%'
                      }"
                                                class="text-ellipsis"
                                        >
                                            <ng-container
                                                    *ngIf="
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].totalIncludeMaam !== null;
                          else empty
                        "
                                            >
                                                <app-sum-view
                                                        [highlight]="queryString"
                                                        [sum]="
                            journalTransData[parent.idxParent].fileData[
                              parent.idx
                            ].totalIncludeMaam
                          "
                                                ></app-sum-view>
                                                &nbsp;{{ 'ILS' | currencySymbol }}
                                            </ng-container>
                                            <ng-template #empty> -</ng-template>
                                        </div>
                                    </div>
                                    <div
                                            class="text-ellipsis"
                                            style="display: flex; justify-content: space-between"
                                    >
                                        <div
                                                [ngStyle]="{
                        'margin-right':
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].totalIncludeMaamMatah !== null
                            ? '0'
                            : '12%'
                      }"
                                                class="text-ellipsis"
                                        >
                                            <ng-container
                                                    *ngIf="
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].totalIncludeMaamMatah !== null;
                          else empty
                        "
                                            >
                                                <app-sum-view
                                                        [highlight]="queryString"
                                                        [sum]="
                            journalTransData[parent.idxParent].fileData[
                              parent.idx
                            ].totalIncludeMaamMatah
                          "
                                                ></app-sum-view>
                                                &nbsp;{{
                                                journalTransData[parent.idxParent].fileData[
                                                    parent.idx
                                                    ].currencySign
                                                }}
                                                <!--                                            &nbsp;{{'ILS'| currencySymbol}}-->
                                            </ng-container>
                                            <ng-template #empty> -</ng-template>
                                        </div>
                                    </div>
                                    <div>
                                        <!--                                    <div class="text-ellipsis maamMonth"-->
                                        <!--                                         [ngStyle]="{'margin-right': file.maamMonth!== null ? '0' : '12%'}"-->
                                        <!--                                         [innerHTML]="(file.maamMonth || '-')| highlight: queryString"></div>-->

                                        <p-dropdown
                                            #dropdownMaam
                                            (onChange)="
                        maamMonthChange(
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ]
                        )
                      "
                                            [(ngModel)]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .maamMonthVal
                      "

                                            [autoDisplayFirst]="false"
                                            [disabled]="
                        !!journalTransData[parent.idxParent].collapseText
                      "
                                            [dropdownIcon]="'p-dropdown-icon'"
                                            [options]="vatList"
                                            [style]="{ width: '100%' }"
                                            appendTo="body"
                                            class="maamMonthDD"
                                            placeholder="בחירה"
                                        >
                                        </p-dropdown>
                                    </div>
                                    <div class="iconPic">
                                        <div
                                                (click)="
                        showDocumentListStorageData(
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ]
                        )
                      "
                                                *ngIf="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .childrenNum
                      "
                                                [class.isChanged]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .isChanged
                      "
                                                [class.isDeleted]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .isDeleted
                      "
                                                [matTooltip]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .isDeleted
                          ? 'ביטולי פקודות בחשבשבת'
                          : journalTransData[parent.idxParent].fileData[
                              parent.idx
                            ].isChanged
                          ? 'שינוי פקודות בחשבשבת'
                          : 'פקודה מפוצלת'
                      "
                                                class="childrenNum"
                                                matTooltipPosition="below"
                                                style="margin-left: 1ch; margin-right: 1ch"
                                        >
                      <span>{{
                          journalTransData[parent.idxParent].fileData[parent.idx]
                              .childrenNum
                          }}</span>
                                        </div>
                                    </div>
                                    <div
                                            *ngIf="userService.appData && userService.appData.isAdmin"
                                            class="iconPic uniqueId"
                                    >
                                        <div
                                                [innerHTML]="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .uniqueId || '-' | highlight: queryString
                      "
                                                [ngStyle]="{
                        'margin-right':
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ].uniqueId !== null
                            ? '0'
                            : '12%'
                      }"
                                                class="text-ellipsis"
                                        ></div>
                                    </div>
                                    <div class="iconPic">
                                        <mat-icon
                                                (click)="
                        showDocumentListStorageData(
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ]
                        )
                      "
                                                style="width: 17px; height: 17px; color: #939393"
                                                svgIcon="picIcon"
                                        ></mat-icon>

                                        <div
                                                (click)="
                        updateOcrDocumentData(
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ]
                        )
                      "
                                                *ngIf="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .flag
                      "
                                                [ngClass]="
                        'flag-' +
                        (journalTransData[parent.idxParent].fileData[parent.idx]
                          .flag
                          ? 'active'
                          : 'none')
                      "
                                                style="margin-right: 15px; margin-left: 0 !important"
                                        ></div>
                                        <div
                                                (click)="
                        journalTransComponent.docNote.show(
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ]
                        )
                      "
                                                (mouseleave)="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .note
                          ? note.hide()
                          : null
                      "
                                                (mouseover)="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .note
                          ? openNote(
                              note,
                              $event,
                              journalTransData[parent.idxParent].fileData[
                                parent.idx
                              ]
                            )
                          : null
                      "
                                                *ngIf="
                        journalTransData[parent.idxParent].fileData[parent.idx]
                          .note
                      "
                                                [ngClass]="
                        'note-' +
                        (journalTransData[parent.idxParent].fileData[parent.idx]
                          .note
                          ? 'active'
                          : 'none')
                      "
                                                style="margin-right: 15px; margin-left: 0 !important"
                                        ></div>

                                        <i
                                                (click)="
                        tooltipEditFile =
                          journalTransData[parent.idxParent].fileData[
                            parent.idx
                          ];
                        tooltipEditParentFile =
                          journalTransData[parent.idxParent];
                        tooltipEdit.toggle($event)
                      "
                                                *ngIf="
                        journalTransData[parent.idxParent].status !==
                        'PERMANENT_COMMAND' &&   journalTransData[parent.idxParent].status !==
                        'FOLDER_PLUS_ISSUE'
                      "
                                                class="fas fa-ellipsis-v"
                                        ></i>
                                    </div>

                                    <p-overlayPanel
                                        #note
                                        [hideTransitionOptions]="'0ms'"
                                        [showTransitionOptions]="'0ms'"
                                        [style]="{
							'margin-left':  '47px',
							'margin-top':  tooltipEditFile && !tooltipEditFile?.isBottom ? '-137px' : '0'
            }"
                                        appendTo="body"
                                        styleClass="notePanel"
                                    >
                                        <p>
                                            {{
                                            journalTransData[parent.idxParent].fileData[parent.idx]
                                                .note
                                            }}
                                        </p>
                                    </p-overlayPanel>
                                </div>
                            </div>
                        </cdk-virtual-scroll-viewport>
                        <p-overlayPanel
                            #tooltipEdit
                            [style]="{
								        'margin-left': '21px',
              'margin-top': '10px',

								 width: 'auto' }"
                            appendTo="body"
                            styleClass="tooltip-bottom tooltip-acc-deviation tooltip-daily-edit overlayPanelRightClick"
                        >
                            <ul *ngIf="tooltipEditParentFile" style="width: 185px">
                                <li
                                        (click)="
                    tooltipEditParentFile.status !== 'TEMP_COMMAND' &&
                    tooltipEditParentFile.status !== 'JOURNAL_TRANS_PROCESS' &&
                    !(
                      tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash
                    )
                      ? updateOcrDocumentStatus()
                      : null;
                    tooltipEdit.hide()
                  "
                                        [class.p-disabled]="
                    !!tooltipEditParentFile.collapseText ||
                    tooltipEditParentFile.status === 'TEMP_COMMAND' ||
                    tooltipEditParentFile.status === 'JOURNAL_TRANS_PROCESS' ||
                    (tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash)
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="bizibox_visibility_button"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            חזרה לאישור
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="
                    tooltipEditParentFile.status === 'JOURNAL_TRANS_PROCESS' ||
                    (tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash)
                      ? null
                      : journalTransComponent.docFolders.show(
                          userService.appData?.userData?.companySelect
                            ?.companyId
                        );
                    tooltipEdit.hide()
                  "
                                        [class.p-disabled]="
                    !!tooltipEditParentFile.collapseText ||
                    tooltipEditParentFile.status === 'JOURNAL_TRANS_PROCESS' ||
                    (tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash)
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="bizibox_archive"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            העברה לארכיון
                                        </p>
                                    </div>
                                </li>
                                <li (click)="getDocumentStorageData(); tooltipEdit.hide()">
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="bizibox_download"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            הורדה למחשב
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="
                    tooltipEditParentFile.status === 'JOURNAL_TRANS_PROCESS' ||
                    (tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash)
                      ? null
                      : journalTransComponent.docCompanyReplacement.show();
                    tooltipEdit.hide()
                  "
                                        *ngIf="
                    userService.appData?.userData?.companies &&
                    userService.appData?.userData?.companies.length > 1
                  "
                                        [class.p-disabled]="
                    !!tooltipEditParentFile.collapseText ||
                    tooltipEditParentFile.status === 'JOURNAL_TRANS_PROCESS' ||
                    (tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash)
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="swap"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            מעבר לחברה אחרת
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="
                    journalTransComponent.docNote.show(tooltipEditFile);
                    tooltipEdit.hide()
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    [svgIcon]="tooltipEditFile.note ? 'noteBg' : 'note'"
                                                    style="width: 14px; vertical-align: middle"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            {{ tooltipEditFile.note ? 'קיים פתק' : 'הוספת פתק' }}
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="
                    updateOcrDocumentData(tooltipEditFile); tooltipEdit.hide()
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    [svgIcon]="tooltipEditFile.flag ? 'flagBg' : 'flag'"
                                                    style="width: 14px; vertical-align: middle"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            {{ tooltipEditFile.flag ? 'מסומן בדגל' : 'להמשך טיפול' }}
                                        </p>
                                    </div>
                                </li>
                                <li
                                        (click)="changePettyCash(tooltipEditFile); tooltipEdit.hide()"
                                        *ngIf="
                    (tooltipEditParentFile.pettyCash ||
                      tooltipEditParentFile.status ===
                        'NOT_PERMANENT_COMMAND' ||
                      tooltipEditParentFile.status === 'NOT_TEMP_COMMAND') &&
                    tooltipEditParentFile.status !== 'JOURNAL_TRANS_PROCESS'
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="addPettyCash"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            הוסף לקובץ לקליטה
                                        </p>
                                    </div>
                                </li>
                                <!--                                        <li (click)="getDocumentStorageData(null, true); tooltipEdit.hide();">-->
                                <!--                                            <div class="p-helper-clearfix"-->
                                <!--                                                 style="display: flex; display: -ms-flexbox;">-->
                                <!--                                                <div style="align-self: center; flex: 20;-ms-flex:20;">-->
                                <!--                                                    <mat-icon svgIcon="print"-->
                                <!--                                                              style="width: 14px;vertical-align: middle;"></mat-icon>-->
                                <!--                                                </div>-->
                                <!--                                                <p class="nameAcc"-->
                                <!--                                                   style="overflow: hidden; white-space: nowrap; text-overflow: ellipsis;flex: 85;-ms-flex:85;">-->
                                <!--                                                    הדפסה-->
                                <!--                                                </p>-->
                                <!--                                            </div>-->
                                <!--                                        </li>-->
                                <li
                                        (click)="
                    tooltipEditParentFile.status === 'JOURNAL_TRANS_PROCESS' ||
                    (tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash)
                      ? null
                      : (fileToRemove = true);
                    tooltipEdit.hide()
                  "
                                        [class.p-disabled]="
                    !!tooltipEditParentFile.collapseText ||
                    tooltipEditParentFile.status === 'JOURNAL_TRANS_PROCESS' ||
                    (tooltipEditParentFile.status === 'TEMP_COMMAND' &&
                      !tooltipEditParentFile.pettyCash)
                  "
                                >
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div style="align-self: center; flex: 20; -ms-flex: 20">
                                            <mat-icon
                                                    style="width: 14px; vertical-align: middle"
                                                    svgIcon="trash"
                                            ></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            מחיקה
                                        </p>
                                    </div>
                                </li>
                            </ul>
                        </p-overlayPanel>
                    </ng-container>

                    <div
                            *ngIf="journalTransDataSave && !journalTransDataSave.length"
                            class="noData"
                    >
                        <mat-icon
                                style="
                vertical-align: middle;
                width: auto;
                height: 61px;
                margin-bottom: 10px;
              "
                                svgIcon="export2"
                        ></mat-icon>

                        <h1>לא קיימים מסמכים לפקודות יומן</h1>
                    </div>
                    <div
                            *ngIf="
              journalTransDataSave &&
              journalTransDataSave.length &&
              journalTransData &&
              !journalTransData.length
            "
                            class="noData"
                    >
                        <mat-icon
                                style="
                vertical-align: middle;
                width: auto;
                height: 61px;
                margin-bottom: 10px;
              "
                                svgIcon="interface"
                        ></mat-icon>

                        <h1>לא נמצאו מסמכים לחיפוש המבוקש</h1>
                    </div>
                </div>
            </div>

            <p-overlayPanel
                #maamComponentsArray
                [hideTransitionOptions]="'0ms'"
                [showTransitionOptions]="'0ms'"
                [style]="{
              'margin-top': '0px',

		 'width': 'auto' }"
                appendTo="body"
                styleClass="maamComponentsArrayPanel"
            >
                <ng-container *ngIf="data_overlayPanel && data_overlayPanel.length">
                    <p style="font-weight: bold; margin-bottom: 3px">רכיבי המע״מ:</p>
                    <div
                            *ngFor="let item of data_overlayPanel"
                            style="margin-bottom: 3px"
                    >
                        <!--                    {{item.countAll}}-->
                        <!--                    {{item.countAll === 1 ? ' חשבונית ' : ' חשבוניות '}}-->
                        {{ item.custMaamText }}
                        ע״ס
                        <span style="display: inline-block; direction: ltr">{{
                            roundAndAddCommaFunc(item.sumMaam)
                            }}</span>
                        ₪
                    </div>
                </ng-container>
            </p-overlayPanel>
            <p-overlayPanel
                #allManualCustIdsArray
                [hideTransitionOptions]="'0ms'"
                [showTransitionOptions]="'0ms'"
                [style]="{
              'margin-top': '0px',
			 width: 'auto' }"
                appendTo="body"
                styleClass="allManualCustIdsArrayPanel"
            >
                <ng-container *ngIf="data_overlayPanel && data_overlayPanel.length">
                    <p style="margin-bottom: 3px">
                        כרטיסים שהוזנו ידנית לביזיבוקס ולא מופיעים בחשבשבת
                    </p>
                    <div
                            *ngFor="let item of data_overlayPanel"
                            style="margin-bottom: 3px"
                    >
                        {{ item }}
                    </div>
                </ng-container>
            </p-overlayPanel>

            <div [class.show]="showFloatNav" class="bottomNavAction">
                <div
                        [class.disabled]="
            showFloatNav?.containsCollapseText ||
            showFloatNav?.statusTEMPCOMMAND ||
            showFloatNav?.statusJOURNAL_TRANS_PROCESS
          "
                >
                    <div
                            (click)="updateOcrDocumentStatus()"
                            [pTooltip]="'חזרה לאישור'"
                            style="height: 100%; width: 21px"
                            tooltipPosition="top"
                    >
                        <svg
                                fit=""
                                focusable="false"
                                height="100%"
                                id="Capa_1"
                                preserveAspectRatio="xMidYMid meet"
                                style="enable-background: new 0 0 561 561; fill: white"
                                version="1.1"
                                viewBox="0 0 561 561"
                                width="100%"
                                x="0px"
                                xml:space="preserve"
                                xmlns="http://www.w3.org/2000/svg"
                                y="0px"
                        >
              <g>
                <g id="visibility">
                  <path
                          d="M280.5,89.25C153,89.25,43.35,168.3,0,280.5c43.35,112.2,153,191.25,280.5,191.25S517.65,392.7,561,280.5
			C517.65,168.3,408,89.25,280.5,89.25z M280.5,408C209.1,408,153,351.9,153,280.5c0-71.4,56.1-127.5,127.5-127.5
			c71.4,0,127.5,56.1,127.5,127.5C408,351.9,351.9,408,280.5,408z M280.5,204c-43.35,0-76.5,33.15-76.5,76.5
			c0,43.35,33.15,76.5,76.5,76.5c43.35,0,76.5-33.15,76.5-76.5C357,237.15,323.85,204,280.5,204z"
                          fill="#ffffff"
                  ></path>
                </g>
              </g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
                            <g></g>
            </svg>
                    </div>
                </div>
                <div
                        [class.disabled]="
            showFloatNav?.containsCollapseText ||
            showFloatNav?.statusJOURNAL_TRANS_PROCESS
          "
                >
                    <mat-icon
                            (click)="
              journalTransComponent.docFolders.show(
                userService.appData?.userData?.companySelect?.companyId
              )
            "
                            [pTooltip]="'העברה לארכיון'"
                            style="color: #ffffff; height: 100%; width: 21px"
                            svgIcon="bizibox_archive"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div
                        [class.disabled]="
            showFloatNav?.containsCollapseText ||
            showFloatNav?.statusJOURNAL_TRANS_PROCESS
          "
                >
                    <i
                            (click)="fileToRemove = true"
                            [pTooltip]="'מחיקה'"
                            class="fas fa-trash"
                            style="color: #ffffff; font-size: 20px"
                            tooltipPosition="top"
                    ></i>
                </div>
                <div>
                    <mat-icon
                            (click)="getDocumentStorageDataForAllSelectedFiles()"
                            [pTooltip]="'הורדה'"
                            style="color: #ffffff; height: 100%; width: 19px"
                            svgIcon="bizibox_download"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div
                        *ngIf="
            userService.appData?.userData?.companies &&
            userService.appData?.userData?.companies.length > 1
          "
                        [class.disabled]="
            showFloatNav?.containsCollapseText ||
            showFloatNav?.statusJOURNAL_TRANS_PROCESS
          "
                >
                    <mat-icon
                            (click)="journalTransComponent.docCompanyReplacement.show()"
                            [pTooltip]="'מעבר לחברה אחרת'"
                            style="color: #ffffff; height: 100%; width: 23px"
                            svgIcon="swap"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div [class.disabled]="showFloatNav?.containsCollapseText">
                    <mat-icon
                            (click)="selectedValueMaam = null; showModalChangeMaamMonth = true"
                            [pTooltip]="'חודש מע״מ'"
                            style="color: #ffffff; height: 100%; width: 19px"
                            svgIcon="calendar"
                            tooltipPosition="top"
                    >
                    </mat-icon>
                </div>
                <div *ngIf="showFloatNav && showFloatNav.selcetedFilesPettyCash">
                    <mat-icon
                            (click)="changePettyCash()"
                            [pTooltip]="'הוספה לקובץ קליטה'"
                            style="color: #ffffff; height: 100%; width: 19px"
                            svgIcon="addPettyCash"
                            tooltipPosition="top"
                    ></mat-icon>
                </div>
                <div>
                    <mat-icon
                            (click)="updateOcrDocumentDataForAllSelectedFiles()"
                            [pTooltip]="
              showFloatNav && showFloatNav?.selcetedFilesFlag
                ? 'מסומן בדגל'
                : 'לא מסומן דגל'
            "
                            [svgIcon]="
              showFloatNav && showFloatNav?.selcetedFilesFlag
                ? 'flagBg'
                : 'flag'
            "
                            style="color: #ffffff; height: 100%; width: 20px"
                            tooltipPosition="top"
                    >
                    </mat-icon>
                </div>
                <div>
                    <mat-icon
                            (click)="journalTransComponent.docNote.show(null, showFloatNav)"
                            [pTooltip]="
              showFloatNav && showFloatNav?.selcetedFilesNote
                ? 'קיים פתק'
                : 'ללא פתקית'
            "
                            [svgIcon]="
              showFloatNav && showFloatNav?.selcetedFilesNote
                ? 'noteBg'
                : 'note'
            "
                            style="color: #ffffff; height: 100%; width: 20px"
                            tooltipPosition="top"
                    >
                    </mat-icon>
                </div>
                <!--            <div>-->
                <!--                <mat-icon (click)="getDocumentStorageDataForAllSelectedFiles(true)"-->
                <!--                          [pTooltip]="'הדפסה'"-->
                <!--                          tooltipPosition="top"-->
                <!--                          svgIcon="print"-->
                <!--                          style="width: 21px; color: #ffffff;">-->
                <!--                </mat-icon>-->
                <!--            </div>-->
            </div>
        </ng-template>
    </ng-container>

    <ng-template #fileScanViewTemp>
        <ng-container
                *ngIf="
        viewAsList
          ? documentsData && documentsData.length
          : documentsDataSave && documentsDataSave.length;
        else loader
      "
        >
            <app-accountants-doc
                    (docFoldersShow)="journalTransComponent.docFolders.show($event)"
                    (docNoteShow)="journalTransComponent.docNote.show($event)"
                    (docRemoveFileShow)="journalTransComponent.docToRemove.show($event)"
                    (docToSend)="journalTransComponent.docToSend.show($event)"
                    (goToRow)="journalTransComponent.fileScanView = false; goToRow($event)"
                    (goTo_JOURNAL_TRANS)="journalTransComponent.fileScanView = false;setStatus('CREATE_JOURNAL_TRANS')"
                    (refreshBack)="refreshBack(true)"
                    (returnBack)="journalTransComponent.fileScanView = false; refreshBack($event)"

                    [isTransTypeStatus]="
          countStatusDataFixed &&
          countStatusDataFixed['transTypeStatus'] &&
          (countStatusDataFixed['transTypeStatus'] === 'DEFINED' ||
            countStatusDataFixed['transTypeStatus'] === 'NOT_DEFINED')
        "
                    [selectedCompanyFiles]="viewAsList ? documentsData : documentsDataSave"
                    [zFileScanView]="journalTransComponent.fileScanView"></app-accountants-doc>
        </ng-container>
        <ng-template #loader>
            <div class="loader" style="height: 75vh">
                <div class="circle"></div>
            </div>
        </ng-template>
    </ng-template>

    <ng-container *ngIf="mergeFiles">
        <p-dialog (onHide)="mergeFiles = false"
                  (visibleChange)="mergeFiles = false"
                  [modal]="true"

                  [resizable]="false"
                  [visible]="(mergeFiles)"
                  appendTo="body"
                  styleClass="fileViewer mergeFiles"
        >
            <p-header>
                <h1>איחוד מסמכים</h1>
            </p-header>

            <p class="text">
                <strong> המסמכים שבחרת יאוחדו וישלחו לפענוח מחדש, </strong>
                ניתן לשנות את סדר איחוד המסמכים ע”י גרירת המסמך עם העכבר. למחיקת מסמך
                מהאיחוד יש ללחוץ קליק ימני בעכבר
            </p>

            <div>
                <ul
                    #scroll
                    (scroll)="onScrollCubes()"
                    class="scrollbar-dynamic scroll-chrome containerList viewAsGrid"
                    style="
            position: relative;
            display: flex;
            list-style-type: none;
            flex-direction: row-reverse;
            flex-wrap: wrap;
            margin-left: 15px;
            border-top: 1px solid #bebcbc;
            border-bottom: 1px solid #bebcbc;
            padding-top: 12px;
            padding-bottom: 12px;
          "
                >
                    <li
                        #element
                        (click)="selectItem(file)"
                        (contextmenu)="
              tooltipEdit.toggle($event, actualTarget); onRightClick($event)
            "
                        (dragover)="allowDrop($event, i)"
                        (dragstart)="onDragStart($event, i)"
                        (drop)="onDrop($event, i)"
                        *ngFor="
              let file of showFloatNav?.selcetedFiles;
              let i = index;
              trackBy: trackById
            "
                        [draggable]="true"
                        class="cube"
                    >
                        <div *ngIf="onDragOverIndex == i" class="drop-zone"></div>
                        <div #actualTarget class="date">{{ i + 1 }}</div>

                        <ng-container
                                *ngIf="
                scroll.scrollTop + scroll.offsetHeight > element.offsetTop &&
                  !file.urlImgProgress &&
                  !file.urlImg;
                else loading
              "
                        >
                            <ng-container
                                    *ngIf="onLoad(file) | async; else loading"
                            ></ng-container>
                        </ng-container>

                        <ng-template #loading>
                            <div
                                    *ngIf="!file.finishedLoaded"
                                    class="loaderPercent"
                                    style="background: transparent; opacity: 1"
                            >
                                <div class="circle"></div>
                            </div>
                            <div
                                    [class.finishedLoaded]="file.finishedLoaded"
                                    class="prepareFile"
                            >
                                <div class="image">
                                    <div
                                            *ngIf="file.flag && file.finishedLoaded"
                                            class="flag-active"
                                    ></div>

                                    <div
                                            *ngIf="file.note && file.finishedLoaded"
                                            [innerHTML]="file.note | highlight: queryString"
                                            [pTooltip]="file.note"
                                            class="note"
                                    ></div>

                                    <button
                                            (click)="
                      journalTransComponent.showDocumentStorageDataViewAsGrid(
                        file.urlImg,
                        false
                      );
                      $event.stopPropagation()
                    "
                                            *ngIf="file.finishedLoaded && file.urlImg"
                                            class="viewPhoto"
                                    >
                                        <mat-icon
                                                style="
                        color: white;
                        width: 18px;
                        height: 18px;
                        display: block;
                        align-self: center;
                      "
                                                svgIcon="pictureLines"
                                        ></mat-icon>
                                    </button>

                                    <div
                                            [style.border-width]="
                      file?.fileId == selectedItem?.fileId ? '3px' : '1px'
                    "
                                            style="
                      border: 1px solid #0f2d61;
                      position: absolute;
                      z-index: 99;
                      right: 0;
                      left: 0;
                      bottom: 0;
                      top: 0;
                      width: 100%;
                      height: 100%;
                    "
                                    ></div>

                                    <ng-container *ngIf="file.urlImg">
                                        <img
                                                (load)="file.finishedLoaded = true"
                                                (loadstart)="file.finishedLoaded = false"
                                                [src]="file.urlImg"

                                                [style.visibility]="
                      file.finishedLoaded && file.urlImg ? 'visible' : 'hidden'
                    "
                                                style="height: 221px; width: auto; position: relative;"

                                        />
                                    </ng-container>

                                </div>
                                <div>
                                    <ng-container *ngIf="file.finishedLoaded; else empty">
                                        <div
                                                [innerHTML]="file.name || '-'"
                                                [pTooltip]="file.name"
                                                class="text-ellipsis"
                                        ></div>
                                    </ng-container>
                                    <ng-template #empty> &nbsp;</ng-template>
                                </div>
                                <div>
                                    <ng-container *ngIf="file.finishedLoaded; else empty">
                                        <div
                                                [innerHTML]="(file.dateCreated | date: 'dd/MM/yy') || '-'"
                                                class="text-ellipsis"
                                        ></div>
                                    </ng-container>
                                    <ng-template #empty> &nbsp;</ng-template>
                                </div>
                            </div>
                        </ng-template>
                        <p-overlayPanel
                            #tooltipEdit
                            [hideTransitionOptions]="'0ms'"
                            [showTransitionOptions]="'0ms'"
                            [style]="{
								'margin-left': calcMinus((185 - element.offsetWidth) / 2) + 'px',
                                'margin-top': '35px'
                                }"
                            appendTo="body"
                            styleClass="tooltip-bottom tooltip-acc-deviation tooltip-daily-edit overlayPanelRightClick"
                        >
                            <ul style="width: 185px">
                                <li (click)="removeFromSelcetedFiles(file); tooltipEdit.hide()">
                                    <div
                                            class="p-helper-clearfix"
                                            style="display: flex; display: -ms-flexbox"
                                    >
                                        <div
                                                style="
                        align-self: center;
                        flex: 20;
                        -ms-flex: 20;
                        display: flex;
                        align-items: center;
                      "
                                        >
                                            <mat-icon style="width: 16px" svgIcon="trash"></mat-icon>
                                        </div>
                                        <p
                                                class="nameAcc"
                                                style="
                        overflow: hidden;
                        white-space: nowrap;
                        text-overflow: ellipsis;
                        flex: 85;
                        -ms-flex: 85;
                      "
                                        >
                                            מחיקה
                                        </p>
                                    </div>
                                </li>
                            </ul>
                        </p-overlayPanel>
                    </li>
                </ul>
            </div>

            <p-footer>
                <button (click)="mergeFiles = false" class="button-link">
                    {{ 'actions.cancellation' | translate }}
                </button>
                <button (click)="filesUnion()" class="button-dark">אישור</button>
            </p-footer>
        </p-dialog>
    </ng-container>
</ng-container>
<ng-container
        *ngIf="
    userService?.appData?.userData?.companySelect &&
    !userService?.appData?.userData?.companySelect?.supplierJournalItem
  "
>
    <div class="wrap_content_banner">
        <h1>פקודות יומן אוטומטיות לחשבוניות של ספקים ולקוחות</h1>
        <p class="text">
            המערכת תיצור עבורכם פקודות יומן לחשבוניות שהועלו ל-bizibox ולכל תנועה בבנק
            ובכרטיס האשראי
        </p>
        <ul>
            <li>
                <div>
                    <img fill ngSrc="/assets/images/tazrim-example-1.png"
                         style="height: auto; width: auto; position: relative;"/>
                </div>
                <p>
                    יצירת פ.יומן אוטומטיות
                    <br/>
                    לחשבוניות/ קבלות בכל
                    <br/>
                    מטבע ושיערוך אוטומטי
                </p>
            </li>
            <li>
                <div>
                    <img fill ngSrc="/assets/images/tazrim-example-2.png"
                         style="height: auto; width: auto; position: relative;"/>
                </div>
                <p>
                    שמירת תנועות הבנק וכ.
                    <br/>
                    אשראי ללא מגבלת זמן,
                    <br/>
                    כולל צפייה בצילומי שיקים
                </p>
            </li>
            <li>
                <div>
                    <img fill ngSrc="/assets/images/tazrim-example-4.png"
                         style="height: auto; width: auto; position: relative;"/>
                </div>
                <p>
                    מערכת חכמה המתריאה
                    <br/>
                    על חשבוניות כפולות
                    <br/>
                    או ישנות
                </p>
            </li>
        </ul>
        <ul style="margin-bottom: 50px">
            <li>
                <div>
                    <img fill ngSrc="/assets/images/tazrim-example-44.png"
                         style="height: auto; width: auto; position: relative;"/>
                </div>
                <p>
                    המערכת מציגה תמיד
                    <br/>
                    את החשבוניות והפקודות
                    <br/>
                    ושומרת הכל בארכיון
                </p>
            </li>
            <li>
                <div>
                    <img fill ngSrc="/assets/images/tazrim-example-5.png"
                         style="height: auto; width: auto; position: relative;"/>
                </div>
                <p>
                    פיצול פקודות (מספר
                    <br/>
                    שיקים, העברות מרובות,
                    <br/>
                    מזומן)
                </p>
            </li>
            <li>
                <div>
                    <img fill ngSrc="/assets/images/tazrim-example-6.png"
                         style="height: auto; width: auto; position: relative;"/>
                </div>
                <p>
                    אפליקציה ללקוחות
                    <br/>
                    לצילום החשבוניות
                    <br/>
                    ישירות למערכת
                </p>
            </li>
        </ul>

        <button (click)="createLeadOcr()">
            <span> הצטרפות למוצר פ.יומן ספקים ולקוחות </span>
        </button>
    </div>
</ng-container>

<p-sidebar
        (onHide)="hideDocumentStorageData()"
        [modal]="true"
        [position]="'left'"
        [styleClass]="'sidebar-show-imgs'"
        [visible]="(
showDocumentStorageDataFired
        )"
        appendTo="body">
    <div class="zoom-controls-inside">
        <button (click)="imageScaleNewInvoice = 1" mat-icon-button>
            <mat-icon class="rotate-90">height</mat-icon>
        </button>
        <button (click)="rotateInside(); $event.stopPropagation()" mat-icon-button>
            <mat-icon style="width: 17px; height: 17px" svgIcon="rotate"></mat-icon>
        </button>
        <button (click)="zoomStepInside(1, 'imageScaleNewInvoice')" mat-icon-button>
            <mat-icon>add</mat-icon>
        </button>
        <button
                (click)="zoomStepInside(-1, 'imageScaleNewInvoice')"
                mat-icon-button
        >
            <mat-icon>remove</mat-icon>
        </button>
    </div>
    <div
            [ngStyle]="{ height: window['innerHeight'] - 10 + 'px' }"
            class="scrollbar-dynamic scroll-chrome"
            style="overflow: auto"
    >
        <div *ngIf="!sidebarImgs" class="loader">
            <div class="circle"></div>
        </div>

        <ng-container
                *ngIf="sidebarImgs && isArray(sidebarImgs) && sidebarImgs.length"
        >
            <!--            <h1 *ngIf="sidebarImgs?.length > 1" style="background: white; text-align: center; padding: 5px 0px;">-->
            <!--                תמונה 1 מתוך {{sidebarImgs?.length}}-->
            <!--            </h1>-->
            <ng-container *ngIf="sidebarImgs.length > 1">
                <app-folded-corner [right]="0" [top]="0"></app-folded-corner>
            </ng-container>
            <ng-container *ngIf="!finishedLoadedImgView">
                <div class="loader">
                    <div class="circle"></div>
                </div>
            </ng-container>
            <img
                    (load)="finishedLoadedImgView = true"
                    (loadstart)="finishedLoadedImgView = false"
                    [hidden]="!finishedLoadedImgView"
                    [ngStyle]="{ transform: 'rotate(' + degRotateImg + 'deg)' }"
                    [src]="sidebarImgs[0]?.contentUrl"
                    [style.zoom.%]="imageScaleNewInvoice * 100"

                    style="height: auto; width: 680px; position: relative;display: block; margin: 0 auto"

            />
            <ng-container *ngIf="sidebarImgs.length > 1">
                <ng-container *ngFor="let pageImg of sidebarImgs.slice(1)">
                    <img
                            [ngSrc]="pageImg.contentUrl"
                            [ngStyle]="{ transform: 'rotate(' + degRotateImg + 'deg)' }"
                            [style.zoom.%]="imageScaleNewInvoice * 100"

                            fill style="height: auto; width: 680px; position: relative;display: block; margin: 0 auto"

                    />
                </ng-container>
            </ng-container>
        </ng-container>

        <div *ngIf="sidebarImgs && !isArray(sidebarImgs)" style="margin: 5px 0px">
            <img
                    [ngSrc]="sidebarImgs"
                    [ngStyle]="{ transform: 'rotate(' + degRotateImg + 'deg)' }"
                    [style.zoom.%]="imageScaleNewInvoice * 100"

                    fill style="height: auto; width: 680px; position: relative;display: block; margin: 0 auto"

            />
        </div>
    </div>
</p-sidebar>

<p-sidebar
        (onHide)="hideDocumentListStorageData()"
        [modal]="true"
        [position]="'left'"
        [styleClass]="'sidebar-show-imgs list-imgs'"
        [visible]="(
showDocumentListStorageDataFired
        )"
        appendTo="body"
>
    <div
        #imgTopOrder
        style="
      position: relative;
      box-shadow: 0px 0px 2px 2px #cacaca;
      z-index: 99999999999;
    "
    >
        <div
                [class.isMatah]="isMatah"
                class="imgTopOrder editOrderModal"
                style="
        width: auto;
        z-index: 99;
        overflow: hidden;
        left: 0;
        right: 0;
        top: 0;
      "
        >
            <div class="table" style="margin: 0; border-bottom: 1px solid #cdcdcd">
                <div class="header">
                    <div>תאריך</div>
                    <div class="border"></div>
                    <div>
                        {{ typeOfStatus === 'maamPrc' ? 'אחוז מע"מ' : 'ס.תנועה' }}
                    </div>
                    <div class="border"></div>
                    <div>חובה</div>
                    <div class="border"></div>
                    <div>זכות</div>
                    <ng-container *ngIf="isMatah">
                        <div class="border"></div>
                        <div>(₪)</div>
                        <div>(₪)</div>
                        <div class="border"></div>
                        <div>({{ currencySign }})</div>
                        <div>({{ currencySign }})</div>
                    </ng-container>
                    <div class="border"></div>
                    <div>פרטים נוספים</div>
                </div>

                <div
                        [ngStyle]="{
            height:
              sidebarImgsDescList &&
              (((!sidebarImgsDescList.payments ||
                (sidebarImgsDescList.payments &&
                  !sidebarImgsDescList.payments.length)) &&
                sidebarImgsDescList.invoices &&
                sidebarImgsDescList.invoices.length === 1) ||
                ((!sidebarImgsDescList.invoices ||
                  (sidebarImgsDescList.invoices &&
                    !sidebarImgsDescList.invoices.length)) &&
                  sidebarImgsDescList.payments &&
                  sidebarImgsDescList.payments.length === 1))
                ? '93px'
                : sidebarImgsDescList &&
                  (((!sidebarImgsDescList.payments ||
                    (sidebarImgsDescList.payments &&
                      !sidebarImgsDescList.payments.length)) &&
                    sidebarImgsDescList.invoices &&
                    sidebarImgsDescList.invoices.length === 2) ||
                    ((!sidebarImgsDescList.invoices ||
                      (sidebarImgsDescList.invoices &&
                        !sidebarImgsDescList.invoices.length)) &&
                      sidebarImgsDescList.payments &&
                      sidebarImgsDescList.payments.length === 2) ||
                    (sidebarImgsDescList.invoices &&
                      sidebarImgsDescList.invoices.length === 1 &&
                      sidebarImgsDescList.payments &&
                      sidebarImgsDescList.payments.length === 1))
                ? 'auto'
                : 'auto'
          }"
                        style="max-height: 295px; position: relative; overflow: hidden"
                >
                    <div>
                        <div
                                [appScrollHeight]="93"
                                appendTo="parent"
                                class="scroll-chrome scrollbar-dynamic"
                        >
                            <ng-template #loaders>
                                <div style="height: 84px">
                                    <div class="loaderPercent">
                                        <div class="circle"></div>
                                    </div>
                                </div>
                            </ng-template>
                            <ng-container *ngIf="sidebarImgsDescList; else loaders">
                                <ng-container *ngIf="sidebarImgsDescList.invoices">
                                    <div
                                            *ngFor="
                      let item of sidebarImgsDescList.invoices;
                      let i = index
                    "
                                            [class.isChanged]="item.isChanged"
                                            [class.isDeleted]="item.isDeleted"
                                            [matTooltip]="
                      item.isDeleted
                        ? 'הפקודה בוטלה בחשבשבת'
                        : item.isChanged
                        ? item.tooltipText
                        : null
                    "
                                            class="row"
                                            matTooltipClass="tooltipTextChanged"
                                            matTooltipPosition="below"
                                    >
                                        <div>
                                            <div class="date flex bold" style="margin-bottom: 10px">
                                                <p>חשבונית</p>
                                            </div>
                                            <div
                                                    (click)="item.opened = !item.opened"
                                                    class="date flex"
                                                    style="
                          margin-bottom: 10px;
                          justify-content: space-between;
                        "
                                            >
                                                <img
                                                        *ngIf="item.dateValue || item.thirdDate"
                                                        [src]="
                            item.opened
                              ? '/assets/images/stateOpen.png'
                              : '/assets/images/stateClose.png'
                          "
                                                        height="7"
                                                        style="
                            width: 11px;
                            height: 7px;
                            vertical-align: middle;
                            cursor: pointer;
                            margin-left: 1px;
                          "
                                                        width="11"
                                                />
                                                <p>תאריך</p>

                                                <div>
                                                    {{ item.invoiceDate | date: 'dd/MM/yy' }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.opened && item.dateValue"
                                                    class="date flex"
                                                    style="
                          margin-bottom: 10px;
                          justify-content: space-between;
                        "
                                            >
                                                <p>תאריך ערך</p>

                                                <div>
                                                    {{ item.dateValue | date: 'dd/MM/yy' }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.opened && item.thirdDate"
                                                    class="date flex"
                                                    style="
                          margin-bottom: 10px;
                          justify-content: space-between;
                        "
                                            >
                                                <p>תאריך נוסף</p>

                                                <div>
                                                    {{ item.thirdDate | date: 'dd/MM/yy' }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="border"></div>
                                        <div>
                                            <ng-container *ngIf="typeOfStatus === 'maamPrc'">
                                                <div *ngIf="item.maamPrc; else empty">
                                                    {{ item.maamPrc.label }}
                                                </div>
                                            </ng-container>

                                            <ng-container *ngIf="typeOfStatus !== 'maamPrc'">
                                                <div *ngIf="item.transTypeCode; else empty">
                                                    {{ item.transTypeCode }}
                                                </div>
                                            </ng-container>
                                        </div>
                                        <div class="border"></div>

                                        <ng-container
                                                *ngTemplateOutlet="
                        (!sidebarImgsDescList.showUpside &&
                          item.invoiceType === 1) ||
                        (sidebarImgsDescList.showUpside &&
                          item.invoiceType === 0)
                          ? expenseTemp
                          : incomeTemp
                      "
                                        >
                                        </ng-container>
                                        <div class="border"></div>
                                        <ng-container
                                                *ngTemplateOutlet="
                        (!sidebarImgsDescList.showUpside &&
                          item.invoiceType === 1) ||
                        (sidebarImgsDescList.showUpside &&
                          item.invoiceType === 0)
                          ? incomeTemp
                          : expenseTemp
                      "
                                        >
                                        </ng-container>

                                        <ng-container *ngIf="isMatah">
                                            <div class="border"></div>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? expenseTempSums
                            : incomeTempSums
                        "
                                            >
                                            </ng-container>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? incomeTempSums
                            : expenseTempSums
                        "
                                            >
                                            </ng-container>

                                            <div class="border"></div>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? expenseMatahTemp
                            : incomeMatahTemp
                        "
                                            >
                                            </ng-container>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? incomeMatahTemp
                            : expenseMatahTemp
                        "
                                            >
                                            </ng-container>
                                        </ng-container>

                                        <div class="border"></div>
                                        <div style="position: relative">
                                            <div
                                                    (click)="item.openedAsm = !item.openedAsm"
                                                    class="flex"
                                                    style="margin-bottom: 10px"
                                            >
                                                <img
                                                        *ngIf="item.asmachta2 || item.asmachta3"
                                                        [src]="
                            item.openedAsm
                              ? '/assets/images/stateOpen.png'
                              : '/assets/images/stateClose.png'
                          "
                                                        height="7"
                                                        style="
                            width: 11px;
                            height: 7px;
                            vertical-align: middle;
                            cursor: pointer;
                            margin-right: -16px;
                            margin-left: 4px;
                          "
                                                        width="11"
                                                />
                                                <p style="width: 64px">אסמכתא</p>
                                                <div style="width: 65px; margin-left: 20px">
                                                    {{ item.asmachta }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.asmachta2 && item.openedAsm"
                                                    class="flex"
                                                    style="margin-bottom: 10px"
                                            >
                                                <p style="width: 64px">אסמכ. 2</p>
                                                <div style="width: 65px; margin-left: 20px">
                                                    {{ item.asmachta2 }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.asmachta3 && item.openedAsm"
                                                    class="flex"
                                                    style="margin-bottom: 10px"
                                            >
                                                <p style="width: 64px">אסמכ. 3</p>
                                                <div style="width: 65px; margin-left: 20px">
                                                    {{ item.asmachta3 }}
                                                </div>
                                            </div>

                                            <div class="flex">
                                                <p style="width: 64px">פרטים</p>
                                                <div
                                                    #inputElement
                                                    [pTooltip]="item.details"
                                                    [tooltipDisabled]="
                            inputElement.offsetWidth >= inputElement.scrollWidth
                          "
                                                    class="text-ellipsis"
                                                    style="max-width: 200px"
                                                    tooltipPosition="top"
                                                >
                                                    {{ item.details }}
                                                </div>
                                            </div>
                                        </div>

                                        <ng-template #expenseTemp>
                                            <div>
                                                <div
                                                        class="flex"
                                                        style="
                            margin-bottom: 10px;
                            justify-content: space-between;
                          "
                                                >
                                                    <div
                                                            [ngStyle]="{
                              width: isMatah ? '105px' : '170px',
                              'min-width': isMatah ? '105px' : '170px'
                            }"
                                                    >
                                                        <div
                                                            #inputElement
                                                            [pTooltip]="
                                item.oppositeCust
                                  ? item.oppositeCust.cartisName
                                  : ''
                              "
                                                            [tooltipDisabled]="
                                inputElement.offsetWidth >=
                                inputElement.scrollWidth
                              "
                                                            class="text-ellipsis"
                                                            tooltipPosition="top"
                                                        >
                                                            <ng-container *ngIf="item.oppositeCust; else empty">
                                                                {{
                                                                item.oppositeCust
                                                                    ? item.oppositeCust.cartisName
                                                                    : ''
                                                                }}
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                    <div
                                                            style="
                              align-self: stretch;
                              width: 11px;
                              height: auto;
                            "
                                                    ></div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            class="input disabled"
                                                            style="width: 83px"
                                                    >
                                                        <app-sum-view
                                                                *ngIf="item.totalBeforeMaam"
                                                                [sum]="item.totalBeforeMaam"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.totalBeforeMaam"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>

                                                <div
                                                        *ngIf="
                            ((!item.maamPrc || item.maamPrc.value === 'NONE') &&
                              item.totalMaam) ||
                            (item.maamPrc && item.maamPrc.value !== 'NONE')
                          "
                                                        class="flex"
                                                        style="justify-content: space-between"
                                                >
                                                    <div
                                                            [ngStyle]="{
                              width: isMatah ? '105px' : '170px',
                              'min-width': isMatah ? '105px' : '170px'
                            }"
                                                    >
                                                        <div
                                                            #inputElement
                                                            [pTooltip]="
                                item.cartisMaam
                                  ? item.cartisMaam.cartisName
                                  : ''
                              "
                                                            [tooltipDisabled]="
                                inputElement.offsetWidth >=
                                inputElement.scrollWidth
                              "
                                                            class="text-ellipsis"
                                                            tooltipPosition="top"
                                                        >
                                                            <ng-container *ngIf="item.cartisMaam; else empty">
                                                                {{
                                                                item.cartisMaam
                                                                    ? item.cartisMaam.cartisName
                                                                    : ''
                                                                }}
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            style="
                              align-self: stretch;
                              width: 11px;
                              height: auto;
                            "
                                                    ></div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            class="input disabled"
                                                            style="width: 83px"
                                                    >
                                                        <app-sum-view
                                                                *ngIf="item.totalMaam"
                                                                [sum]="item.totalMaam"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.totalMaam"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>

                                        <ng-template #incomeTemp>
                                            <div>
                                                <div
                                                        class="flex"
                                                        style="
                            margin-bottom: 10px;
                            justify-content: space-between;
                          "
                                                >
                                                    <div
                                                            [ngStyle]="{
                              width: isMatah ? '105px' : '170px',
                              'min-width': isMatah ? '105px' : '170px'
                            }"
                                                    >
                                                        <div
                                                            #inputElement
                                                            [pTooltip]="
                                item.custId ? item.custId.cartisName : ''
                              "
                                                            [tooltipDisabled]="
                                inputElement.offsetWidth >=
                                inputElement.scrollWidth
                              "
                                                            class="text-ellipsis"
                                                            tooltipPosition="top"
                                                        >
                                                            <ng-container *ngIf="item.custId; else empty">
                                                                {{ item.custId ? item.custId.cartisName : '' }}
                                                            </ng-container>
                                                        </div>
                                                    </div>

                                                    <div
                                                            *ngIf="!isMatah"
                                                            style="
                              align-self: stretch;
                              width: 11px;
                              height: auto;
                            "
                                                    ></div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            class="input disabled"
                                                            style="width: 83px"
                                                    >
                                                        <app-sum-view
                                                                *ngIf="item.totalIncludeMaam"
                                                                [sum]="item.totalIncludeMaam"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.totalIncludeMaam"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>

                                        <ng-template #expenseTempSums>
                                            <div>
                                                <div>
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.totalBeforeMaam"
                                                                [sum]="item.totalBeforeMaam"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.totalBeforeMaam"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                                <div
                                                        *ngIf="
                            ((!item.maamPrc || item.maamPrc.value === 'NONE') &&
                              item.totalMaam) ||
                            (item.maamPrc && item.maamPrc.value !== 'NONE')
                          "
                                                >
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.totalMaam"
                                                                [sum]="item.totalMaam"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.totalMaam"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>
                                        <ng-template #incomeTempSums>
                                            <div>
                                                <div>
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.totalIncludeMaam"
                                                                [sum]="item.totalIncludeMaam"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.totalIncludeMaam"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>

                                        <ng-template #expenseMatahTemp>
                                            <div style="position: relative; align-self: stretch">
                                                <div>
                                                    <div>
                                                        <div class="input disabled" style="width: 83px">
                                                            <app-sum-view
                                                                    *ngIf="item.totalBeforeMaamMatah"
                                                                    [sum]="item.totalBeforeMaamMatah"
                                                                    class="text-item text-ellipsis"
                                                            ></app-sum-view>

                                                            <p
                                                                    *ngIf="!item.totalBeforeMaamMatah"
                                                                    class="text-item text-ellipsis"
                                                            >
                                                                0
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.totalMaamMatah"
                                                                [sum]="item.totalMaamMatah"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.totalMaamMatah"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>

                                                <i
                                                        *ngIf="
                            !(
                              (!sidebarImgsDescList.showUpside &&
                                item.invoiceType === 1) ||
                              (sidebarImgsDescList.showUpside &&
                                item.invoiceType === 0)
                            )
                          "
                                                        [matTooltip]="'לפי שער יציג של ' + rate + ' ₪'"
                                                        class="fas fa-globe"
                                                        matTooltipPosition="below"
                                                        style="
                            position: absolute;
                            bottom: 5px;
                            left: 0px;
                            cursor: pointer;
                          "
                                                ></i>
                                            </div>
                                        </ng-template>
                                        <ng-template #incomeMatahTemp>
                                            <div style="position: relative; align-self: stretch">
                                                <div class="input disabled" style="width: 83px">
                                                    <app-sum-view
                                                            *ngIf="item.matahAmount"
                                                            [sum]="item.matahAmount"
                                                            class="text-item text-ellipsis"
                                                    ></app-sum-view>

                                                    <p
                                                            *ngIf="!item.matahAmount"
                                                            class="text-item text-ellipsis"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <i
                                                        *ngIf="
                            (!sidebarImgsDescList.showUpside &&
                              item.invoiceType === 1) ||
                            (sidebarImgsDescList.showUpside &&
                              item.invoiceType === 0)
                          "
                                                        [matTooltip]="'לפי שער יציג של ' + rate + ' ₪'"
                                                        class="fas fa-globe"
                                                        matTooltipPosition="below"
                                                        style="
                            position: absolute;
                            bottom: 5px;
                            left: 0px;
                            cursor: pointer;
                          "
                                                ></i>
                                            </div>
                                        </ng-template>
                                        <ng-template #empty>
                                            <div>&nbsp;</div>
                                        </ng-template>
                                    </div>
                                </ng-container>
                                <ng-container *ngIf="sidebarImgsDescList.payments">
                                    <div
                                            *ngFor="
                      let item of sidebarImgsDescList.payments;
                      let i = index
                    "
                                            [class.isChanged]="item.isChanged"
                                            [class.isDeleted]="item.isDeleted"
                                            [matTooltip]="
                      item.isDeleted
                        ? 'הפקודה בוטלה בחשבשבת'
                        : item.isChanged
                        ? 'הפקודה שונתה בחשבשבת'
                        : null
                    "
                                            class="row"
                                            matTooltipClass="tooltipTextChanged"
                                            matTooltipPosition="below"
                                    >
                                        <div>
                                            <div class="date flex bold" style="margin-bottom: 10px">
                                                <p>קבלה</p>
                                            </div>
                                            <div
                                                    (click)="item.opened = !item.opened"
                                                    class="date flex"
                                                    style="
                          margin-bottom: 10px;
                          justify-content: space-between;
                        "
                                            >
                                                <img
                                                        *ngIf="item.dateValue || item.thirdDate"
                                                        [src]="
                            item.opened
                              ? '/assets/images/stateOpen.png'
                              : '/assets/images/stateClose.png'
                          "
                                                        height="7"
                                                        style="
                            width: 11px;
                            height: 7px;
                            vertical-align: middle;
                            cursor: pointer;
                            margin-left: 1px;
                          "
                                                        width="11"
                                                />
                                                <p>תאריך</p>

                                                <div>
                                                    {{ item.invoiceDate | date: 'dd/MM/yy' }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.opened && item.dateValue"
                                                    class="date flex"
                                                    style="
                          margin-bottom: 10px;
                          justify-content: space-between;
                        "
                                            >
                                                <p>תאריך ערך</p>

                                                <div>
                                                    {{ item.dateValue | date: 'dd/MM/yy' }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.opened && item.thirdDate"
                                                    class="date flex"
                                                    style="
                          margin-bottom: 10px;
                          justify-content: space-between;
                        "
                                            >
                                                <p>תאריך נוסף</p>

                                                <div>
                                                    {{ item.thirdDate | date: 'dd/MM/yy' }}
                                                </div>
                                            </div>
                                        </div>
                                        <div class="border"></div>
                                        <div>
                                            <ng-container *ngIf="typeOfStatus === 'maamPrc'">
                                                <div>&nbsp;</div>
                                            </ng-container>

                                            <ng-container *ngIf="typeOfStatus !== 'maamPrc'">
                                                <div *ngIf="item.transTypeReceiptCode; else empty">
                                                    {{ item.transTypeReceiptCode }}
                                                </div>
                                            </ng-container>
                                        </div>
                                        <div class="border"></div>

                                        <ng-container
                                                *ngTemplateOutlet="
                        (!sidebarImgsDescList.showUpside &&
                          item.invoiceType === 1) ||
                        (sidebarImgsDescList.showUpside &&
                          item.invoiceType === 0)
                          ? expenseTemp
                          : incomeTemp
                      "
                                        >
                                        </ng-container>
                                        <div class="border"></div>
                                        <ng-container
                                                *ngTemplateOutlet="
                        (!sidebarImgsDescList.showUpside &&
                          item.invoiceType === 1) ||
                        (sidebarImgsDescList.showUpside &&
                          item.invoiceType === 0)
                          ? incomeTemp
                          : expenseTemp
                      "
                                        >
                                        </ng-container>

                                        <!--                                        <ng-container *ngIf="isMatah">-->
                                        <!--                                            <div class="border"></div>-->
                                        <!--                                            <ng-container-->
                                        <!--                                                    *ngTemplateOutlet="((showDocumentListStorageDataFile.invoiceType === 1 && showDocumentListStorageDataFile.documentType  !== 'חשבונית זיכוי')-->
                                        <!--            ||-->
                                        <!--            (showDocumentListStorageDataFile.invoiceType !== 1 && showDocumentListStorageDataFile.documentType  === 'חשבונית זיכוי')) ? expenseMatahTemp: incomeMatahTemp">-->

                                        <!--                                            </ng-container>-->
                                        <!--                                            <ng-container-->
                                        <!--                                                    *ngTemplateOutlet="((showDocumentListStorageDataFile.invoiceType === 1 && showDocumentListStorageDataFile.documentType  !== 'חשבונית זיכוי')-->
                                        <!--            ||-->
                                        <!--            (showDocumentListStorageDataFile.invoiceType !== 1 && showDocumentListStorageDataFile.documentType  === 'חשבונית זיכוי')) ? incomeMatahTemp : expenseMatahTemp">-->

                                        <!--                                            </ng-container>-->
                                        <!--                                        </ng-container>-->

                                        <ng-container *ngIf="isMatah">
                                            <div class="border"></div>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? expenseTempSums
                            : incomeTempSums
                        "
                                            >
                                            </ng-container>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? incomeTempSums
                            : expenseTempSums
                        "
                                            >
                                            </ng-container>

                                            <div class="border"></div>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? expenseMatahTemp
                            : incomeMatahTemp
                        "
                                            >
                                            </ng-container>
                                            <ng-container
                                                    *ngTemplateOutlet="
                          (!sidebarImgsDescList.showUpside &&
                            item.invoiceType === 1) ||
                          (sidebarImgsDescList.showUpside &&
                            item.invoiceType === 0)
                            ? incomeMatahTemp
                            : expenseMatahTemp
                        "
                                            >
                                            </ng-container>
                                        </ng-container>

                                        <div class="border"></div>
                                        <div style="position: relative">
                                            <div
                                                    (click)="item.openedAsm = !item.openedAsm"
                                                    class="flex"
                                                    style="margin-bottom: 10px"
                                            >
                                                <img
                                                        *ngIf="item.asmachta2 || item.asmachta3"
                                                        [src]="
                            item.openedAsm
                              ? '/assets/images/stateOpen.png'
                              : '/assets/images/stateClose.png'
                          "
                                                        height="7"
                                                        style="
                            width: 11px;
                            height: 7px;
                            vertical-align: middle;
                            cursor: pointer;
                            margin-right: -16px;
                            margin-left: 4px;
                          "
                                                        width="11"
                                                />
                                                <p style="width: 64px">אסמכתא</p>
                                                <div style="width: 65px; margin-left: 20px">
                                                    {{ item.asmachta }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.asmachta2 && item.openedAsm"
                                                    class="flex"
                                                    style="margin-bottom: 10px"
                                            >
                                                <p style="width: 64px">אסמכ. 2</p>
                                                <div style="width: 65px; margin-left: 20px">
                                                    {{ item.asmachta2 }}
                                                </div>
                                            </div>
                                            <div
                                                    *ngIf="item.asmachta3 && item.openedAsm"
                                                    class="flex"
                                                    style="margin-bottom: 10px"
                                            >
                                                <p style="width: 64px">אסמכ. 3</p>
                                                <div style="width: 65px; margin-left: 20px">
                                                    {{ item.asmachta3 }}
                                                </div>
                                            </div>

                                            <div class="flex">
                                                <p style="width: 64px">פרטים</p>
                                                <div
                                                    #inputElement
                                                    [pTooltip]="item.details"
                                                    [tooltipDisabled]="
                            inputElement.offsetWidth >= inputElement.scrollWidth
                          "
                                                    class="text-ellipsis"
                                                    style="max-width: 200px"
                                                    tooltipPosition="top"
                                                >
                                                    {{ item.details }}
                                                </div>
                                            </div>
                                        </div>
                                        <ng-template #expenseTemp>
                                            <div>
                                                <div
                                                        class="flex"
                                                        style="
                            margin-bottom: 10px;
                            justify-content: space-between;
                          "
                                                >
                                                    <div
                                                            [ngStyle]="{
                              width: isMatah ? '105px' : '170px',
                              'min-width': isMatah ? '105px' : '170px'
                            }"
                                                    >
                                                        <div
                                                            #inputElement
                                                            [pTooltip]="
                                item.custId ? item.custId.cartisName : ''
                              "
                                                            [tooltipDisabled]="
                                inputElement.offsetWidth >=
                                inputElement.scrollWidth
                              "
                                                            class="text-ellipsis"
                                                            tooltipPosition="top"
                                                        >
                                                            <ng-container *ngIf="item.custId; else empty">
                                                                {{ item.custId ? item.custId.cartisName : '' }}
                                                            </ng-container>
                                                        </div>
                                                    </div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            style="
                              align-self: stretch;
                              width: 11px;
                              height: auto;
                            "
                                                    ></div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            class="input disabled"
                                                            style="width: 83px"
                                                    >
                                                        <app-sum-view
                                                                *ngIf="item.total"
                                                                [sum]="item.total"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.total"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>
                                        <ng-template #incomeTemp>
                                            <div>
                                                <div
                                                        class="flex"
                                                        style="
                            margin-bottom: 10px;
                            justify-content: space-between;
                          "
                                                >
                                                    <div
                                                            [ngStyle]="{
                              width: isMatah ? '105px' : '170px',
                              'min-width': isMatah ? '105px' : '170px'
                            }"
                                                    >
                                                        <div
                                                            #inputElement
                                                            [pTooltip]="
                                item.paymentCustId
                                  ? item.paymentCustId.cartisName
                                  : ''
                              "
                                                            [tooltipDisabled]="
                                inputElement.offsetWidth >=
                                inputElement.scrollWidth
                              "
                                                            class="text-ellipsis"
                                                            tooltipPosition="top"
                                                        >
                                                            <ng-container *ngIf="item.paymentCustId; else empty">
                                                                {{
                                                                item.paymentCustId
                                                                    ? item.paymentCustId.cartisName
                                                                    : ''
                                                                }}
                                                            </ng-container>
                                                        </div>
                                                    </div>

                                                    <div
                                                            *ngIf="!isMatah"
                                                            style="
                              align-self: stretch;
                              width: 11px;
                              height: auto;
                            "
                                                    ></div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            class="input disabled"
                                                            style="width: 83px"
                                                    >
                                                        <app-sum-view
                                                                *ngIf="item.paymentTotal"
                                                                [sum]="item.paymentTotal"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.paymentTotal"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>

                                                <div
                                                        *ngIf="item.taxDeductionCustId"
                                                        class="flex text-ellipsis"
                                                        style="justify-content: space-between"
                                                >
                                                    <div
                                                            [ngStyle]="{
                              width: isMatah ? '105px' : '170px',
                              'min-width': isMatah ? '105px' : '170px'
                            }"
                                                    >
                                                        <div
                                                            #inputElement
                                                            [pTooltip]="
                                item.taxDeductionCustId
                                  ? item.taxDeductionCustId.cartisName
                                  : ''
                              "
                                                            [tooltipDisabled]="
                                inputElement.offsetWidth >=
                                inputElement.scrollWidth
                              "
                                                            class="text-ellipsis"
                                                            tooltipPosition="top"
                                                        >
                                                            <ng-container *ngIf="item.taxDeductionCustId; else empty">
                                                                {{
                                                                item.taxDeductionCustId
                                                                    ? item.taxDeductionCustId.cartisName
                                                                    : ''
                                                                }}
                                                            </ng-container>
                                                        </div>
                                                    </div>

                                                    <div
                                                            *ngIf="!isMatah"
                                                            style="
                              align-self: stretch;
                              width: 11px;
                              height: auto;
                            "
                                                    ></div>
                                                    <div
                                                            *ngIf="!isMatah"
                                                            class="input disabled"
                                                            style="width: 83px"
                                                    >
                                                        <app-sum-view
                                                                *ngIf="item.paymentNikui"
                                                                [sum]="item.paymentNikui"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.paymentNikui"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>

                                        <ng-template #expenseTempSums>
                                            <div>
                                                <div>
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.total"
                                                                [sum]="item.total"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.total"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>
                                        <ng-template #incomeTempSums>
                                            <div>
                                                <div>
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.paymentTotal"
                                                                [sum]="item.paymentTotal"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.paymentTotal"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.paymentNikui"
                                                                [sum]="item.paymentNikui"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.paymentNikui"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </ng-template>

                                        <ng-template #expenseMatahTemp>
                                            <div style="position: relative; align-self: stretch">
                                                <div class="input disabled" style="width: 83px">
                                                    <app-sum-view
                                                            *ngIf="item.totalMatah"
                                                            [sum]="item.totalMatah"
                                                            class="text-item text-ellipsis"
                                                    ></app-sum-view>

                                                    <p
                                                            *ngIf="!item.totalMatah"
                                                            class="text-item text-ellipsis"
                                                    >
                                                        0
                                                    </p>
                                                </div>
                                                <i
                                                        *ngIf="
                            !(
                              (!sidebarImgsDescList.showUpside &&
                                item.invoiceType === 1) ||
                              (sidebarImgsDescList.showUpside &&
                                item.invoiceType === 0)
                            )
                          "
                                                        [matTooltip]="'לפי שער יציג של ' + rate + ' ₪'"
                                                        class="fas fa-globe"
                                                        matTooltipPosition="below"
                                                        style="
                            position: absolute;
                            bottom: 0px;
                            left: 0px;
                            cursor: pointer;
                          "
                                                ></i>
                                            </div>
                                        </ng-template>

                                        <ng-template #incomeMatahTemp>
                                            <div style="position: relative; align-self: stretch">
                                                <div>
                                                    <div>
                                                        <div class="input disabled" style="width: 83px">
                                                            <app-sum-view
                                                                    *ngIf="item.paymentTotalMatah"
                                                                    [sum]="item.paymentTotalMatah"
                                                                    class="text-item text-ellipsis"
                                                            ></app-sum-view>

                                                            <p
                                                                    *ngIf="!item.paymentTotalMatah"
                                                                    class="text-item text-ellipsis"
                                                            >
                                                                0
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div>
                                                    <div class="input disabled" style="width: 83px">
                                                        <app-sum-view
                                                                *ngIf="item.paymentNikuiMatah"
                                                                [sum]="item.paymentNikuiMatah"
                                                                class="text-item text-ellipsis"
                                                        ></app-sum-view>

                                                        <p
                                                                *ngIf="!item.paymentNikuiMatah"
                                                                class="text-item text-ellipsis"
                                                        >
                                                            0
                                                        </p>
                                                    </div>
                                                </div>

                                                <i
                                                        *ngIf="
                            (!sidebarImgsDescList.showUpside &&
                              item.invoiceType === 1) ||
                            (sidebarImgsDescList.showUpside &&
                              item.invoiceType === 0)
                          "
                                                        [matTooltip]="'לפי שער יציג של ' + rate + ' ₪'"
                                                        class="fas fa-globe"
                                                        matTooltipPosition="below"
                                                        style="
                            position: absolute;
                            bottom: 0px;
                            left: 0px;
                            cursor: pointer;
                          "
                                                ></i>
                                            </div>
                                        </ng-template>

                                        <ng-template #empty>
                                            <div>&nbsp;</div>
                                        </ng-template>
                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div
                *ngIf="
        showDocumentListStorageDataFile.quickApprove &&
        !showDocumentListStorageDataFile.titleQuickApproveArray
      "
                class="setFileStatusBtn"
        >
            <button
                    (click)="
          setFileStatus(showDocumentListStorageDataFile.fileId);
          hideDocumentListStorageData()
        "
            >
                <mat-icon
                        style="color: #ffffff; height: 21px; width: 21px; margin-left: 6px"
                        svgIcon="check-solid"
                ></mat-icon>
                אישור מסמך
            </button>
        </div>
    </div>
    <div class="zoom-controls-inside">
        <button (click)="imageScaleNewInvoice = 1" mat-icon-button>
            <mat-icon class="rotate-90">height</mat-icon>
        </button>
        <button (click)="rotateInside(); $event.stopPropagation()" mat-icon-button>
            <mat-icon style="width: 17px; height: 17px" svgIcon="rotate"></mat-icon>
        </button>
        <button (click)="zoomStepInside(1, 'imageScaleNewInvoice')" mat-icon-button>
            <mat-icon>add</mat-icon>
        </button>
        <button
                (click)="zoomStepInside(-1, 'imageScaleNewInvoice')"
                mat-icon-button
        >
            <mat-icon>remove</mat-icon>
        </button>
    </div>
    <div
            [ngStyle]="{
      height: window['innerHeight'] - imgTopOrder.clientHeight - 10 + 'px'
    }"
            class="scrollbar-dynamic scroll-chrome"
            style="overflow: auto"
    >
        <div *ngIf="!sidebarImgs" class="loader">
            <div class="circle"></div>
        </div>
        <ng-container *ngIf="sidebarImgs && isArray(sidebarImgs)">
            <ng-container *ngFor="let imgLink of sidebarImgs; index as i">
                <ng-container *ngIf="!finishedLoadedImgView">
                    <div class="loader">
                        <div class="circle"></div>
                    </div>
                </ng-container>
                <img
                        (load)="finishedLoadedImgView = true"
                        (loadstart)="finishedLoadedImgView = false"
                        [hidden]="!finishedLoadedImgView"
                        [ngStyle]="{ transform: 'rotate(' + degRotateImg + 'deg)' }"
                        [src]="imgLink.contentUrl"
                        [style.zoom.%]="imageScaleNewInvoice * 100"

                        style="height: auto; width: 1100px; position: relative;display: block; margin: 0 auto"

                />
            </ng-container>
        </ng-container>
    </div>
</p-sidebar>

<p-dialog (onHide)="ocrExportFileToRemove = false"
          (visibleChange)="ocrExportFileToRemove = false"
          [modal]="true"
          [resizable]="false"
          [visible]="(
ocrExportFileToRemove
        )"
          appendTo="body"
          styleClass="ocrExportFileToRemove"
>
    <p-header>
        <h1>מחיקת קובץ פקודות יומן</h1>
    </p-header>

    <p class="text">
        הקובץ ימחק והחשבוניות יועברו לסטטוס ״לאישור״.
        <br/>
        האם ברצונכם להמשיך?
    </p>

    <p-footer>
        <button (click)="ocrExportFileToRemove = false" class="button-link">
            {{ 'actions.cancellation' | translate }}
        </button>
        <button
                (click)="deleteExportFile(ocrExportFileToRemove)"
                class="button-dark"
                style="width: 89px; height: 33px !important; padding: 0"
        >
            מחיקה
        </button>
    </p-footer>
</p-dialog>

<ng-container *ngIf="fileToRemove">
    <p-dialog (onHide)="fileToRemove = false"
              (visibleChange)="fileToRemove = false"
              [modal]="true"
              [resizable]="false"
              [visible]="(
fileToRemove
        )"
              appendTo="body"
              styleClass="ocrExportFileToRemove"
    >
        <p-header>
            <h1>
                מחיקת
                {{
                tooltipEditFile ||
                (showFloatNav && showFloatNav?.selcetedFiles.length === 1)
                    ? ' מסמך'
                    : ' מסמכים'
                }}
            </h1>
        </p-header>

        <p
                *ngIf="
        tooltipEditFile ||
          (showFloatNav && showFloatNav?.selcetedFiles.length === 1);
        else many
      "
                class="text"
        >
            המסמך

            <strong>{{
                tooltipEditFile
                    ? tooltipEditFile?.name
                    : showFloatNav?.selcetedFiles[0].name
                }}</strong>

            ימחק ללא יצירת פקודת יומן וללא אפשרות שחזור.
            <br/>
            האם למחוק?
        </p>
        <ng-template #many>
            <p class="text">
                המסמכים ימחקו ללא יצירת פקודת יומן וללא אפשרות שחזור.
                <br/>
                האם למחוק?
            </p>
        </ng-template>

        <p-footer>
            <button (click)="fileToRemove = false" class="button-link">
                {{ 'actions.cancellation' | translate }}
            </button>
            <button (click)="deleteFile()" class="button-dark">
                {{ 'actions.approve' | translate }}
            </button>
        </p-footer>
    </p-dialog>
</ng-container>

<ng-container *ngIf="showModalChangeMaamMonth">
    <p-dialog (onHide)="showModalChangeMaamMonth = false"
              (visibleChange)="showModalChangeMaamMonth = false"
              [modal]="true"
              [resizable]="false"
              [visible]="(
showModalChangeMaamMonth
        )"
              appendTo="body"
              styleClass="modalChangeMaamMonth"
    >
        <p-header>
            <h1>חודש מע״מ</h1>
        </p-header>

        <p>יש לבחור מהרשימה את חודש המע״מ שאליו תרצו לשייך את החשבוניות</p>

        <ul>
            <li *ngFor="let opt of vatList; index as i">
                <p-radioButton
                        [(ngModel)]="selectedValueMaam"
                        [inputId]="'maamOption' + i"
                        [label]="opt.label"
                        [value]="opt.value"
                        name="changeOption"
                ></p-radioButton>
            </li>
        </ul>
        <p-footer>
            <button (click)="showModalChangeMaamMonth = false" class="button-link">
                {{ 'actions.cancellation' | translate }}
            </button>
            <button
                    (click)="maamMonthChangeForSelected(selectedValueMaam)"
                    [disabled]="!selectedValueMaam"
                    class="button-dark"
                    style="width: 121px; height: 33px !important; padding: 0"
            >
                {{ 'actions.approve' | translate }}
            </button>
        </p-footer>
    </p-dialog>
</ng-container>

<ng-container *ngIf="exportFileCancelPrompt">
    <p-dialog (visibleChange)="exportFileCancelPrompt.visible = false"
              [modal]="true"
              [resizable]="false"
              [visible]="(
exportFileCancelPrompt.visible
        )"
              appendTo="body"
              styleClass="exportFileCancelPrompt"
    >
        <p-header>
            <h1>ביטל קובץ</h1>
        </p-header>

        <p>
            הקובץ יימחק מהתקייה של {{ exportFileCancelPrompt.prompt }} ויהיה ניתן
            ליצור קובץ חדש
        </p>
        <p>האם להמשיך?</p>

        <p-footer>
            <button (click)="exportFileCancelPrompt.decline()" class="button-link">
                {{ 'actions.cancellation' | translate }}
            </button>
            <button
                    (click)="exportFileCancelPrompt.approve()"
                    class="button-dark"
                    style="width: 121px; height: 33px !important; padding: 0"
            >
                {{ 'actions.approve' | translate }}
            </button>
        </p-footer>
    </p-dialog>
</ng-container>

<ng-container *ngIf="exportFileFolderCreatePrompt">
    <p-dialog
            #exportFileFolderBothFilesNeededDialog
            (onHide)="onHide_exportFileFolderCreatePrompt(false, true)"
            (visibleChange)="onHide_exportFileFolderCreatePrompt(true, true)"
            [modal]="true"
            [resizable]="false"
            [visible]="(exportFileFolderCreatePrompt.alertDownloadedOneFileOnly)"
            appendTo="body"
            styleClass="exportFileFolderCreatePromptContentDownloadAgain">
        <p
                style="
            text-align: center;
            font-size: 16px;
            font-weight: 600;
          "
        >
            שני הקבצים נחוצים לקליטה בחשבשבת
        </p>
        <div class="btnDownloadBtn">
            <button (click)="downloadFiles('enabledDownloadLink_docfile');
                             exportFileFolderBothFilesNeededDialog.close($event)"
                    *ngIf="enabledDownloadLink_docfile"
                    [class.disabledDownloadLink]="!enabledDownloadLink_docfile"
                    [disabled]="!enabledDownloadLink_docfile"
                    class="button-dark"
                    style="font-weight: 600; font-size: 18px"
            >
                קובץ 1
            </button>
            <button (click)="downloadFiles('enabledDownloadLink_paramsfile');
                             exportFileFolderBothFilesNeededDialog.close($event)"
                    *ngIf="enabledDownloadLink_paramsfile"
                    [class.disabledDownloadLink]="!enabledDownloadLink_paramsfile"
                    [disabled]="!enabledDownloadLink_paramsfile"
                    class="button-dark"
                    style="font-weight: 600; font-size: 18px"
            >
                קובץ 2
            </button>
        </div>
    </p-dialog>
    <p-dialog #exportFileFolderCreatePromptDlg
              (onHide)="onHide_exportFileFolderCreatePrompt()"
              (visibleChange)="onHide_exportFileFolderCreatePrompt(true)"
              [modal]="true"
              [resizable]="false"
              [visible]="(exportFileFolderCreatePrompt.visible)"
              appendTo="body"
              styleClass="exportFileFolderCreatePromptContentFlex exportFileFolderCreatePrompt {{
     (( !(
        !exportFileFolderCreatePrompt.approveSubscription &&
        responseRestPath.folderState === 'NOT_EXIST'
      ) && !exportFileFolderCreatePrompt.approveSubscription?.closed) || (exportFileFolderCreatePrompt.approveSubscription?.closed && responseRestPath.folderState === 'NOT_EXIST'))
        ? 'hideFooter'
        : ''
    }}"
    >
        <p-header>
            <h1>
                {{
                responseRestPath.folderState !== 'NOT_EXIST'
                    ? 'תקלה בתיקיית bizibox'
                    : 'התקנת תיקיית bizibox'
                }}
            </h1>
        </p-header>


        <ng-container *ngIf="!exportFileFolderCreatePrompt.approveSubscription">
            <ng-container *ngIf="responseRestPath.folderState === 'NOT_EXIST'">
                <p style="width: 358px;">
                    על מנת להוריד ולשמור את הקובץ, יש לבצע תהליך ראשוני של התקנת התיקייה
                    הראשית בשולחן העבודה.
                </p>
                <p>התיקייה תכיל את כל התיקיות לכל החברות שמשויכות אלייך</p>
            </ng-container>
            <ng-container *ngIf="responseRestPath.folderState === 'NOT_OK'">
                <div class="folderStateNOT_OKFilesModal">
                    <p class="generalTitle">
                        זיהינו שיש תקלה בתיקיית bizibox
                    </p>
                    <ul>
                        <li>
                            <div class="titleWithIcon">
                                <img src="/assets/images/install.png">
                                <p>
                                    לתיקון והתקנה
                                    <br>
                                    מחדש
                                </p>
                            </div>
                            <div class="btnDownloadInstall" style="justify-content: center;">
                                <a
                                        [href]="FOLDER_REPAIR_URL"
                                        class="button-dark"
                                        download
                                >
                                    התקנה
                                </a>
                            </div>

                        </li>

                        <li>
                            <div class="titleWithIcon">
                                <img src="/assets/images/download-files.png">
                                <p>
                                    להורדה ידנית
                                    <br>
                                    של הקבצים
                                </p>
                            </div>
                            <div class="btnDownloadInstall">
                                <button
                                        (click)="downloadFiles('enabledDownloadLink_docfile')"
                                        [class.disabledDownloadLink]="!enabledDownloadLink_docfile"
                                        [disabled]="!enabledDownloadLink_docfile"
                                        class="button-dark"
                                >
                                    קובץ 1
                                </button>
                                <button
                                        (click)="downloadFiles('enabledDownloadLink_paramsfile')"
                                        [class.disabledDownloadLink]="!enabledDownloadLink_paramsfile"
                                        [disabled]="!enabledDownloadLink_paramsfile"
                                        class="button-dark"
                                >
                                    קובץ 2
                                </button>
                            </div>

                        </li>
                    </ul>
                    <p class="linkOpenTicket">
                        <a
                                (click)="sharedComponent.showOpenTicket()"
                                class="button-link"
                        >לפרטים נוספים ניתן לפתוח קריאת שרות</a>
                        <mat-icon
                                [svgIcon]="'icon_support'"
                                style="width: 25px;height: 25px;display: inline-block;margin-right: 10px;">
                        </mat-icon>
                    </p>
                    <div
                            *ngIf="!enabledDownloadLink"
                            class="loaderPercent"
                            style="opacity: 1; flex-direction: column"
                    >
                        <div
                                style="
              position: relative;
              margin: 0 auto 10px auto;
              width: 50px;
              height: 50px;
            "
                        >
                            <div
                                    class="loaderPercent blueCircleBig"
                                    style="background: transparent; opacity: 1"
                            >
                                <div class="circle"></div>
                            </div>
                        </div>

                        <p style="text-align: center; margin-bottom: 15px; font-size: 20px">
                            הקובץ בהכנה
                        </p>
                    </div>
                </div>


                <!--                <p style="text-align: center">-->
                <!--                    ניתן להוריד את-->
                <!--                    <a class="button-link"-->
                <!--                       (click)="enabledDownloadLink ? exportFileFolderCreatePrompt.manualDownloadLink() : null"-->
                <!--                       [class.disabledDownloadLink]="!enabledDownloadLink">2 הקבצים בצורה ידנית</a></p>-->
                <!--                <p style="text-align: center">-->
                <!--                    יש לשמור כל קובץ בנפרד.-->
                <!--                </p>-->
                <!--                <p style="text-align: center; font-size: 17px;">-->
                <!--                    שימו לב, יש לקלוט לחשבשבת את שני הקבצים.-->
                <!--                </p>-->

                <!--                <p>לפתרון התקלה <a [href]="FOLDER_REPAIR_URL" download class="button-link"-->
                <!--                                   (click)="exportFileFolderCreatePrompt.onAnchorClick()">לחצו כאן</a></p>-->
            </ng-container>
        </ng-container>
        <ng-container *ngIf="exportFileFolderCreatePrompt.pending">
            <mat-spinner
                    color="primary"
                    diameter="48"
                    style="margin: auto"
            ></mat-spinner>
        </ng-container>
        <ng-container
                *ngIf="exportFileFolderCreatePrompt.approveSubscription?.closed">
            <ng-container *ngIf="responseRestPath.folderState === 'OK'">
                <p>התקלה תוקנה.</p>
                <p>הקובץ ממתין בתיקייה שבמחשב לקליטה בהנה"ח</p>
            </ng-container>
            <ng-container *ngIf="responseRestPath.folderState === 'NOT_OK'">
                <p style="text-align: center">התקלה לא נפתרה, אנו מטפלים בנושא.</p>

                <p style="text-align: center">ניתן להוריד את הקבצים בצורה ידנית</p>
                <p
                        style="
            text-align: center;
            margin-bottom: 10px;
            font-size: 18px;
            text-decoration: underline;
            font-weight: 600;
          "
                >
                    חייבים להוריד את שני הקבצים לקליטה בחשבשבת
                </p>
                <div
                        style="
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-top: 30px;
            margin-bottom: 10px;
          "
                >
                    <button
                            (click)="downloadFiles('enabledDownloadLink_docfile')"
                            [class.disabledDownloadLink]="!enabledDownloadLink_docfile"
                            [disabled]="!enabledDownloadLink_docfile"
                            class="button-dark"
                            style="font-weight: 600; font-size: 18px"
                    >
                        קובץ 1
                    </button>
                    <button
                            (click)="downloadFiles('enabledDownloadLink_paramsfile')"
                            [class.disabledDownloadLink]="!enabledDownloadLink_paramsfile"
                            [disabled]="!enabledDownloadLink_paramsfile"
                            class="button-dark"
                            style="font-weight: 600; font-size: 18px"
                    >
                        קובץ 2
                    </button>
                </div>
                <!--                <p style="text-align: center">-->
                <!--                    ניתן להוריד את-->
                <!--                    <a class="button-link"-->
                <!--                       (click)="enabledDownloadLink ? exportFileFolderCreatePrompt.manualDownloadLink() : null"-->
                <!--                       [class.disabledDownloadLink]="!enabledDownloadLink">2 הקבצים בצורה ידנית</a></p>-->
                <!--                <p style="text-align: center">-->
                <!--                    יש לשמור כל קובץ בנפרד.-->
                <!--                </p>-->
                <!--                <p style="text-align: center; font-size: 17px;">-->
                <!--                    שימו לב, יש לקלוט לחשבשבת את שני הקבצים.-->
                <!--                </p>-->

                <div
                        *ngIf="!enabledDownloadLink"
                        class="loaderPercent"
                        style="opacity: 1; flex-direction: column"
                >
                    <div
                            style="
              position: relative;
              margin: 0 auto 10px auto;
              width: 50px;
              height: 50px;
            "
                    >
                        <div
                                class="loaderPercent blueCircleBig"
                                style="background: transparent; opacity: 1"
                        >
                            <div class="circle"></div>
                        </div>
                    </div>

                    <p style="text-align: center; margin-bottom: 15px; font-size: 20px">
                        הקובץ בהכנה
                    </p>
                </div>
            </ng-container>
            <ng-container *ngIf="responseRestPath.folderState === 'NOT_EXIST'">
                <div style="width: 503px;">
                    <h2 style="font-family: 'Assistant';
font-style: normal;
font-weight: 700;
font-size: 24px;
text-align: center;
color: #02225C;">
                        לא בוצעה התקנה
                    </h2>
                    <p style="font-family: Assistant;font-style: normal;font-weight: 400;font-size: 18px;line-height: 26px;text-align: center;color: #02225C;margin-top: 10px;margin-bottom: 20px;">
                        ניתן להוריד את הקבצים בצורה ידנית.
                        <br>
                        <span style="text-decoration: underline">
            חייבים להוריד את שני הקבצים לקליטה בחשבשבת
    </span>
                    </p>


                    <div class="footer"
                         style="display: flex; justify-content: space-between; align-items: center; margin: 60px 0px 5px 0px;"
                    >
                        <p class="colorBlueFill" style="display: flex;flex: 1;align-items: flex-end;">
                            <a
                                    (click)="
              exportFileFolderCreatePromptDlg.close($event);
              sharedComponent.showOpenTicket()
            "
                                    class="button-link"
                            >

                                לפרטים נוספים
                                <br>
                                ניתן לפתוח קריאת שרות
                            </a>
                            <mat-icon
                                    [svgIcon]="'icon_support'"
                                    style="width: 25px;height: 25px;display: inline-block;margin-right: 10px;margin-bottom: 5px;">
                            </mat-icon>
                        </p>

                        <div class="btnDownloadBtn" style="
    flex: 1;
    justify-content: flex-end;
    margin:0;
">
                            <button
                                    (click)="downloadFiles('enabledDownloadLink_docfile')"
                                    [class.disabledDownloadLink]="!enabledDownloadLink_docfile"
                                    [disabled]="!enabledDownloadLink_docfile"
                                    class="button-dark"
                                    style="font-weight: 600;font-size: 18px;width: 94px;height: 40px !important; display: flex;align-items: center;justify-content: center;"
                            >
                                קובץ 1

                                <img src="/assets/images/download-white.png" style="margin-right: 5px">
                            </button>
                            <button
                                    (click)="downloadFiles('enabledDownloadLink_paramsfile')"
                                    [class.disabledDownloadLink]="!enabledDownloadLink_paramsfile"
                                    [disabled]="!enabledDownloadLink_paramsfile"
                                    class="button-dark"
                                    style="font-weight: 600;font-size: 18px;width: 94px;height: 40px !important;display: flex;align-items: center;justify-content: center;margin-right: 19px;"
                            >
                                קובץ 2

                                <img src="/assets/images/download-white.png" style="margin-right: 5px">
                            </button>
                        </div>
                    </div>


                </div>


                <div
                        *ngIf="!enabledDownloadLink"
                        class="loaderPercent"
                        style="opacity: 1; flex-direction: column"
                >
                    <div
                            style="
              position: relative;
              margin: 0 auto 10px auto;
              width: 50px;
              height: 50px;
            "
                    >
                        <div
                                class="loaderPercent blueCircleBig"
                                style="background: transparent; opacity: 1"
                        >
                            <div class="circle"></div>
                        </div>
                    </div>

                    <p style="text-align: center; margin-bottom: 15px; font-size: 22px">
                        הקובץ בהכנה
                    </p>
                </div>
            </ng-container>
        </ng-container>
        <p-footer>
            <ng-container
                    *ngIf="
          !exportFileFolderCreatePrompt.approveSubscription &&
          responseRestPath.folderState === 'NOT_EXIST'
        "
            >
                <button
                        (click)="exportFileFolderCreatePromptDlg.close($event)"
                        class="button-link"
                >
                    {{ 'actions.cancellation' | translate }}
                </button>
                <a
                        (click)="exportFileFolderCreatePrompt.onAnchorClick()"
                        [href]="FOLDER_REPAIR_URL"
                        class="button-dark"
                        download
                        style="width: 121px; height: 33px !important; padding: 0"
                >
                    הורדה
                </a>
            </ng-container>
            <ng-container
                    *ngIf="exportFileFolderCreatePrompt.approveSubscription?.closed && responseRestPath.folderState !== 'NOT_EXIST'"
            >
                <button
                        (click)="exportFileFolderCreatePromptDlg.close($event)"
                        class="button-dark"
                        style="width: 121px; height: 33px !important; padding: 0"
                >
                    סיום
                </button>
            </ng-container>
        </p-footer>
    </p-dialog>
</ng-container>


<ng-container *ngIf="parentManualCustIdsArray">
    <p-dialog (onHide)="parentManualCustIdsArray = false"
              (visibleChange)="parentManualCustIdsArray = false"
              [modal]="true"
              [resizable]="false"
              [visible]="(
parentManualCustIdsArray
        )"
              appendTo="body"
              styleClass="parentManualCustIdsArray"
    >
        <div style="padding: 0px 10px 10px 10px">
            <h2 style="font-weight: 700; font-size: 20px">שימו לב,</h2>
            <p style="font-weight: 600; padding-bottom: 5px; font-size: 17px">
                את הכרטיסים הבאים הוספתם ידנית אבל עדיין לא פתחתם אותם בחשבשבת -
            </p>

            <p
                    *ngFor="let item of parentManualCustIdsArray.manualCustIdsArray"
                    style="font-size: 17px"
            >
                {{ item }}
            </p>

            <p style="font-weight: 600; font-size: 17px">
                אנו ממליצים להשלים את פתיחתם לפני הורדת הקובץ.
            </p>
        </div>

        <p-footer>
            <button (click)="parentManualCustIdsArray = false" class="button-link">
                {{ 'actions.cancellation' | translate }}
            </button>
            <button (click)="
          createExportFileFor(parentManualCustIdsArray);
          parentManualCustIdsArray = false
        "
                    class="button-dark"
                    style="width: 160px; height: 33px !important; padding: 0"
            >
                אישור יצירת הקובץ
            </button>
        </p-footer>
    </p-dialog>
</ng-container>

<ng-container *ngIf="showModalCheckFolderFile === true">
    <p-dialog (onHide)="exportFileFolderCreatePrompt.cancelFile()"
              (visibleChange)="showModalCheckFolderFile = false; exportFileFolderCreatePrompt.cancelFile()"
              [modal]="true"
              [resizable]="false"
              [visible]="(
showModalCheckFolderFile === true
        )"
              appendTo="body"
              styleClass="exportFileFolderCreatePrompt"
    >
        <p-header>
            <h1>התקנת תיקיית bizibox</h1>
        </p-header>

        <div
                style="
        position: relative;
        margin: 0 auto 10px auto;
        width: 50px;
        height: 50px;
      "
        >
            <div
                    class="loaderPercent blueCircleBig"
                    style="background: transparent; opacity: 1"
            >
                <div class="circle"></div>
            </div>
        </div>

        <p style="text-align: center; margin-bottom: 15px; font-size: 20px">
            הקובץ בהכנה
        </p>
    </p-dialog>
</ng-container>

<ng-container *ngIf="responseRestPath && showModalCheckFolderFile === 'OK'">
    <p-dialog (onHide)="responseRestPath = false; startChild()"
              (visibleChange)="responseRestPath = false; startChild()"
              [modal]="true"
              [resizable]="false"
              [visible]="(responseRestPath && showModalCheckFolderFile === 'OK')"
              appendTo="body"
              styleClass="responseRestPath"
    >
        <p-header>
            <h1>נתיב הקובץ</h1>
        </p-header>

        <p style="margin-top: 10px">הקובץ שירד נמצא במחשבכם בתיקיה -</p>

        <p
                style="
        direction: ltr;
        text-align: left;
        display: flex;
        align-content: center;
        align-items: flex-start;
        margin: 0px 15px;
      "
        >
            <mat-icon
                    (click)="copyText(responseRestPath.filePath)"
                    style="
          margin-right: 3px;
          width: 12px;
          vertical-align: middle;
          cursor: pointer;
          color: #007ebf;
          display: block;
        "
                    svgIcon="copy"
            ></mat-icon>
            {{ responseRestPath.filePath }}
        </p>

        <p>
            ניתן להעתיק את הנתיב בלחיצה על האייקון

            <mat-icon
                    style="
          margin-right: 3px;
          margin-left: 3px;
          width: 12px;
          color: #022258;
          vertical-align: text-top;
          height: 13px;
        "
                    svgIcon="copy"
            ></mat-icon>

            ולהדביקו בחשבשבת
        </p>

        <img
                src="/assets/images/psHash.png"
                style="text-align: center; margin: 15px auto 0 auto; display: block"
        />

        <p-footer>
            <button
                    (click)="responseRestPath = false; startChild()"
                    class="button-dark"
                    style="width: 115px; height: 33px !important; padding: 0"
            >
                סגירה
            </button>
        </p-footer>
    </p-dialog>
</ng-container>

<ng-container *ngIf="responseRestPath && showModalCheckFolderFile === 'ERROR'">
    <p-dialog (onHide)="responseRestPath = false; showModalCheckFolderFile = null;
                        onHide_exportFileFolderCreatePrompt(true);"
              (visibleChange)="responseRestPath = false; showModalCheckFolderFile = null;
                               onHide_exportFileFolderCreatePrompt(true);"
              [modal]="true"
              [resizable]="false"
              [visible]="(
responseRestPath && showModalCheckFolderFile === 'ERROR'
        )"
              appendTo="body"
              styleClass="exportFileFolderCreatePrompt"
    >
        <p-header>
            <h1>יצירת קובץ</h1>
        </p-header>

        <img
                src="/assets/images/logobiziboxTrialExpired.png"
                style="
        text-align: center;
        margin: 0px auto 0 auto;
        width: 40px;
        height: auto;
        display: block;
      "
        />

        <p style="text-align: center; margin-top: 10px; font-family: 'Assistant';
font-style: normal;
font-weight: 400;
font-size: 18px;
line-height: 24px;
color: #02225C;">
            קיימת שגיאה בהורדת הקובץ.
        </p>
        <p style="text-align: center; margin-bottom: 10px; font-family: 'Assistant';
font-style: normal;
font-weight: 400;
font-size: 18px;
line-height: 24px;
color: #02225C;">
            נפתחה קריאת שירות על מנת שנוכל לטפל בבעיה.
        </p>
    </p-dialog>
</ng-container>

<ng-container
        *ngIf="responseRestPath && showModalCheckFolderFile === 'SYNC_ERROR'"
>
    <p-dialog (onHide)="
      responseRestPath = false;
      startChild();
      enabledDownloadLink = true;
      enabledDownloadLink_docfile = true;
      enabledDownloadLink_paramsfile = true
    "
              (visibleChange)="      responseRestPath = false;
      startChild();
      enabledDownloadLink = true;
      enabledDownloadLink_docfile = true;
      enabledDownloadLink_paramsfile = true"
              [modal]="true"
              [resizable]="false"
              [visible]="(
responseRestPath && showModalCheckFolderFile === 'SYNC_ERROR'
        )"
              appendTo="body"
              styleClass="exportFileFolderCreatePrompt"
    >
        <p-header>
            <h1>יצירת קובץ</h1>
        </p-header>

        <!--        <img style="height: auto; width: auto; position: relative;" fill ngSrc="/assets/images/GENERAL_ERROR.png" style="    text-align: center;-->
        <!--    margin: 0px auto 0 auto;-->
        <!--    display: block;">-->

        <p style="text-align: center; margin-top: 10px; font-size: 18px">
            התעוררה תקלה בסנכרון הקובץ למחשב.
        </p>
        <p style="text-align: center; margin-bottom: 10px; font-size: 18px">
            ניתן להוריד את הקבצים בצורה ידנית
        </p>

        <p
                style="
        text-align: center;
        margin-bottom: 10px;
        font-size: 18px;
        text-decoration: underline;
        font-weight: 600;
      "
        >
            חייבים להוריד את שני הקבצים לקליטה בחשבשבת
        </p>
        <div
                style="
        display: flex;
        justify-content: space-around;
        align-items: center;
        margin-top: 30px;
        margin-bottom: 10px;
      "
        >
            <button
                    (click)="downloadFiles('enabledDownloadLink_docfile')"
                    [class.disabledDownloadLink]="!enabledDownloadLink_docfile"
                    [disabled]="!enabledDownloadLink_docfile"
                    class="button-dark"
                    style="font-weight: 600; font-size: 18px"
            >
                קובץ 1
            </button>
            <button
                    (click)="downloadFiles('enabledDownloadLink_paramsfile')"
                    [class.disabledDownloadLink]="!enabledDownloadLink_paramsfile"
                    [disabled]="!enabledDownloadLink_paramsfile"
                    class="button-dark"
                    style="font-weight: 600; font-size: 18px"
            >
                קובץ 2
            </button>
        </div>

        <div
                *ngIf="!enabledDownloadLink"
                class="loaderPercent"
                style="opacity: 1; flex-direction: column"
        >
            <div
                    style="
          position: relative;
          margin: 0 auto 10px auto;
          width: 50px;
          height: 50px;
        "
            >
                <div
                        class="loaderPercent blueCircleBig"
                        style="background: transparent; opacity: 1"
                >
                    <div class="circle"></div>
                </div>
            </div>

            <p style="text-align: center; margin-bottom: 15px; font-size: 20px">
                הקובץ בהכנה
            </p>
        </div>
    </p-dialog>
</ng-container>

<ng-container *ngIf="printData">
    <div #elemToPrint style="display: none">
        <style>
            @page {
                size: landscape;
            }

            .new-page {
                page-break-before: always;
            }
        </style>
        <div
                *ngFor="
        let parent of printData;
        let iParent = index;
        trackBy: trackByIdJournalTransData
      "
        >
            <div class="new-page documentsDataTable journalTransData">
                <div class="header">
                    <div>&nbsp;</div>
                    <div>
                        ת. חשבונית

                        <mat-icon
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'invoiceDate'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'invoiceDate'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div>
                        שם ספק/ לקוח

                        <mat-icon
                                [class.active]="companyFilesSortControl.value?.orderBy === 'name'"
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'name'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div>
                        כרטיס נגדי

                        <mat-icon
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'oppositeCust'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'oppositeCust'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div>חודשי מע״מ</div>

                    <div>
                        אסמכתא

                        <mat-icon
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'asmachta'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'asmachta'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>

                    <div>
                        סה"כ כולל מע"מ

                        <mat-icon
                                [class.active]="
                companyFilesSortControl.value?.orderBy === 'totalIncludeMaam'
              "
                                [svgIcon]="
                (companyFilesSortControl.value?.orderBy === 'totalIncludeMaam'
                  ? companyFilesSortControl.value.order
                  : null
                ) | sortIcon
              "
                                class="sort-icon"
                        >
                        </mat-icon>
                    </div>
                    <div
                            *ngIf="userService.appData && userService.appData.isAdmin"
                            class="iconPic uniqueId"
                    >
                        unique_id
                    </div>
                    <div>אחוז מע״מ</div>
                </div>

                <div class="body" style="position: relative">
                    <div>
                        <div
                                [class]="'group-rows ' + parent.status"
                                class="group-rows active"
                        >
                            <div>
                                <img
                                        [src]="'/assets/images/stateOpen.png'"
                                        height="9"
                                        style="
                    width: 14px;
                    height: 9px;
                    vertical-align: middle;
                    cursor: pointer;
                  "
                                        width="14"
                                />

                                <div>
                                    <p-checkbox
                                            *ngIf="parent.status !== 'PERMANENT_COMMAND' && parent.status !== 'FOLDER_PLUS_ISSUE'"
                                            [binary]="true"
                                            [disabled]="parent.disabledSelcetFile"
                                            [ngModel]="parent.selcetFiles"
                                            checkboxIcon="fa fa-check"
                                    >
                                    </p-checkbox>
                                </div>
                            </div>

                            <ng-container [ngSwitch]="parent.status">
                                <ng-container *ngSwitchCase="'CREATE_JOURNAL_TRANS'">
                                    <div
                                            *ngIf="parent.vatDateFrom || parent.vatDateTill"
                                            class="text-ellipsis"
                                    >
                    <span style="position: relative">
                      {{ parent.numOfFiles }}

                        חשבוניות

                      <ng-container *ngIf="!parent.pettyCash">
                        ע״ס
                        <span style="display: inline-block; direction: ltr">{{
                            parent.totalIncludeMaam | sum
                            }}</span>
                          <!--                                               <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(parent.totalIncludeMaam)}}</span>-->
                        ש״ח
                      </ng-container>
                      <ng-container *ngIf="parent.pettyCash">
                        של
                        <strong> קופה קטנה </strong>
                        לא מזוהות
                      </ng-container>

                      מחכות לקליטה עבור מע"מ
                        {{ parent.monthName }}

                        <ng-container *ngIf="parent.batchNumber">
                        במנה
                            {{ parent.batchNumber }}
                      </ng-container>

                      <ng-container *ngIf="parent.pettyCash">
                        - סך מע"מ מדווח
                          {{ parent.totalMaam | sum: true }}
                          &nbsp;{{ 'ILS' | currencySymbol }}

                          <img
                                  height="16"
                                  src="/assets/images/infoBudgetCreate.png"
                                  style="
                            position: absolute;
                            top: 0;
                            bottom: 0;
                            margin: auto;
                            left: -20px;
                          "
                                  width="16"
                          />
                      </ng-container>
                    </span>

                                        <ng-container *ngIf="parent.dateLastModified">
                      <span
                              [ngStyle]="{
                          'margin-right': !parent.pettyCash ? '1em' : '2em'
                        }"
                      >
                        ({{ (parent.dateLastModified | date: 'H:mm') || '' }}
                          )
                          {{ (parent.dateLastModified | date: 'd/M/yy') || '' }}
                      </span>
                                        </ng-container>
                                    </div>
                                    <div
                                            *ngIf="!parent.vatDateFrom && !parent.vatDateTill"
                                            class="text-ellipsis"
                                    >
                    <span style="position: relative">
                      {{ parent.numOfFiles }}

                        חשבוניות

                      <ng-container *ngIf="!parent.pettyCash">
                        ע״ס
                        <span style="display: inline-block; direction: ltr">{{
                            parent.totalIncludeMaam | sum
                            }}</span>
                          <!--                                               <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(parent.totalIncludeMaam)}}</span>-->
                        ש״ח
                      </ng-container>
                      <ng-container *ngIf="parent.pettyCash">
                        של
                        <strong> קופה קטנה </strong>
                        לא מזוהות
                      </ng-container>

                      מחכות לקליטה

                      <ng-container *ngIf="parent.batchNumber">
                        במנה
                          {{ parent.batchNumber }}
                      </ng-container>

                      <ng-container *ngIf="parent.pettyCash">
                        - סך מע"מ מדווח
                          {{ parent.totalMaam | sum: true }}
                          &nbsp;{{ 'ILS' | currencySymbol }}

                          <img
                                  height="16"
                                  src="/assets/images/infoBudgetCreate.png"
                                  style="
                            position: absolute;
                            top: 0;
                            bottom: 0;
                            margin: auto;
                            left: -20px;
                          "
                                  width="16"
                          />
                      </ng-container>
                    </span>
                                        <ng-container *ngIf="parent.dateLastModified">
                      <span
                              [ngStyle]="{
                          'margin-right': !parent.pettyCash ? '1em' : '2em'
                        }"
                      >
                        ({{ (parent.dateLastModified | date: 'H:mm') || '' }}
                          )
                          {{ (parent.dateLastModified | date: 'd/M/yy') || '' }}
                      </span>
                                        </ng-container>
                                    </div>

                                    <div class="text-ellipsis" style="flex: 162">
                                        <div
                                                *ngIf="userService.appData && userService.appData.isAdmin"
                                                class="alert"
                                                style="margin-left: 15px"
                                        >
                                            הורדת קובץ
                                        </div>

                                        <ng-container *ngIf="!parent.pettyCash">
                                            <ng-container
                                                    *ngIf="
                          parent.collapseText;
                          else noCollapseText;
                          let collapseText
                        "
                                            >
                                                <div style="padding: 0 3ch">{{ collapseText }}</div>
                                                <div class="alert">ביטול הקובץ</div>
                                            </ng-container>
                                            <ng-template #noCollapseText>
                                                <div class="alert">
                                                    {{!userService?.appData?.userData?.companySelect?.folderPlus ? 'ליצירת קובץ הנה"ח' : 'קלוט קובץ בתוכנת הנה”ח'}}
                                                </div>
                                            </ng-template>
                                        </ng-container>

                                        <div *ngIf="parent.pettyCash" class="alert">
                                            הוספה לקובץ קליטה
                                        </div>
                                    </div>
                                    <!--                                    <div>-->
                                    <!--                                        &nbsp;-->
                                    <!--                                        &lt;!&ndash;                                        <div class="trash">&ndash;&gt;-->
                                    <!--                                        &lt;!&ndash;                                            <i class="fas fa-trash"&ndash;&gt;-->
                                    <!--                                        &lt;!&ndash;                                               (click)="ocrExportFileToRemove = {ocrExportFileId: parent.ocrExportFileId, numOfFiles: parent.numOfFiles}; $event.stopPropagation();"></i>&ndash;&gt;-->
                                    <!--                                        &lt;!&ndash;                                        </div>&ndash;&gt;-->
                                    <!--                                    </div>-->
                                </ng-container>
                                <ng-container *ngSwitchCase="'TEMP_COMMAND'">
                                    <div class="text-ellipsis">
                    <span style="position: relative">
                      {{ parent.numOfFiles }}
                        חשבוניות
                      <ng-container *ngIf="!parent.pettyCash">
                        ע״ס
                        <span style="display: inline-block; direction: ltr">{{
                            parent.totalIncludeMaam | sum
                            }}</span>
                          <!--                                         <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(parent.totalIncludeMaam)}}</span>-->
                        ש״ח
                      </ng-container>
                      <ng-container *ngIf="parent.pettyCash">
                        של
                        <strong> קופה קטנה </strong>
                        לא מזוהות
                      </ng-container>
                      נקלטו כפקודות זמניות עבור מע"מ
                        {{ parent.monthName }}

                        <ng-container *ngIf="parent.batchNumber">
                        במנה
                            {{ parent.batchNumber }}
                      </ng-container>

                      <ng-container *ngIf="parent.pettyCash">
                        - סך מע"מ מדווח
                          {{ parent.totalMaam | sum: true }}
                          &nbsp;{{ 'ILS' | currencySymbol }}

                          <img
                                  height="16"
                                  src="/assets/images/infoBudgetCreate.png"
                                  style="
                            position: absolute;
                            top: 0;
                            bottom: 0;
                            margin: auto;
                            left: -20px;
                          "
                                  width="16"
                          />
                      </ng-container>
                    </span>
                                        <ng-container *ngIf="parent.dateLastModified">
                      <span
                              [ngStyle]="{
                          'margin-right': !parent.pettyCash ? '1em' : '2em'
                        }"
                      >
                        ({{ (parent.dateLastModified | date: 'H:mm') || '' }})
                          {{ (parent.dateLastModified | date: 'd/M/yy') || '' }}
                      </span>
                                        </ng-container>
                                    </div>

                                    <div class="text-ellipsis">
                                        <div *ngIf="!parent.pettyCash" class="alert">
                                            הקובץ נקלט במנה זמנית
                                        </div>
                                        <div *ngIf="parent.pettyCash" class="alert">
                                            הוספה לקובץ קליטה
                                        </div>
                                    </div>
                                    <!--                                    <div>-->
                                    <!--                                        &nbsp;-->
                                    <!--                                    </div>-->
                                </ng-container>
                                <ng-container *ngSwitchCase="'NOT_TEMP_COMMAND'">
                                    <div class="text-ellipsis">
                    <span style="position: relative">
                      {{ parent.numOfFiles }}
                        חשבוניות
                      <ng-container *ngIf="parent.pettyCash">
                        של
                        <strong> קופה קטנה </strong>
                        לא מזוהות
                      </ng-container>
                      לא נקלטו כפקודות זמניות

                      <ng-container *ngIf="parent.batchNumber">
                        במנה
                          {{ parent.batchNumber }}
                      </ng-container>

                      <ng-container *ngIf="parent.pettyCash">
                        - סך מע"מ מדווח
                          {{ parent.totalMaam | sum: true }}
                          &nbsp;{{ 'ILS' | currencySymbol }}

                          <img
                                  height="16"
                                  src="/assets/images/infoBudgetCreate.png"
                                  style="
                            position: absolute;
                            top: 0;
                            bottom: 0;
                            margin: auto;
                            left: -20px;
                          "
                                  width="16"
                          />
                      </ng-container>
                    </span>
                                    </div>

                                    <div>
                                        <div class="alert">הוספה לקובץ קליטה</div>
                                    </div>
                                    <!--                                    <div>-->
                                    <!--                                        &nbsp;-->
                                    <!--                                    </div>-->
                                </ng-container>
                                <ng-container *ngSwitchCase="'NOT_PERMANENT_COMMAND'">
                                    <div class="text-ellipsis">
                    <span style="position: relative">
                      {{ parent.numOfFiles }}
                        חשבוניות
                      <ng-container *ngIf="parent.pettyCash">
                        של
                        <strong> קופה קטנה </strong>
                        לא מזוהות
                      </ng-container>
                      לא נקלטו כפקודות יומן קבועות

                      <ng-container *ngIf="parent.batchNumber">
                        במנה
                          {{ parent.batchNumber }}
                      </ng-container>

                      <ng-container *ngIf="parent.pettyCash">
                        - סך מע"מ מדווח
                          {{ parent.totalMaam | sum: true }}
                          &nbsp;{{ 'ILS' | currencySymbol }}

                          <img
                                  height="16"
                                  src="/assets/images/infoBudgetCreate.png"
                                  style="
                            position: absolute;
                            top: 0;
                            bottom: 0;
                            margin: auto;
                            left: -20px;
                          "
                                  width="16"
                          />
                      </ng-container>
                    </span>
                                    </div>

                                    <div>
                                        <div class="alert">הוספה לקובץ קליטה</div>
                                    </div>
                                    <!--                                    <div>-->
                                    <!--                                        &nbsp;-->
                                    <!--                                    </div>-->
                                </ng-container>
                                <ng-container *ngSwitchCase="'PERMANENT_COMMAND'">
                                    <div class="text-ellipsis">
                    <span style="position: relative">
                      {{ parent.numOfFiles }}

                        חשבוניות

                      <ng-container *ngIf="!parent.pettyCash">
                        ע״ס
                        <span style="display: inline-block; direction: ltr">{{
                            parent.totalIncludeMaam | sum
                            }}</span>
                          <!--                         <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(parent.totalIncludeMaam)}}</span>-->
                        ש״ח
                      </ng-container>

                      נקלטו עבור מע"מ

                        {{ parent.monthName }}

                        <ng-container *ngIf="parent.batchNumber">
                        במנה
                            {{ parent.batchNumber }}
                      </ng-container>
                    </span>

                                        <ng-container *ngIf="parent.dateLastModified">
                      <span [ngStyle]="{ 'margin-right': '1em' }">
                        ({{ (parent.dateLastModified | date: 'H:mm') || '' }})
                          {{ (parent.dateLastModified | date: 'd/M/yy') || '' }}
                      </span>
                                        </ng-container>
                                    </div>

                                    <div class="text-ellipsis">
                                        <mat-icon
                                                style="color: #022258; height: 18px; width: 35px"
                                                svgIcon="tick"
                                        ></mat-icon>
                                        <div>הקובץ נקלט במנה קבועה בהנה"ח</div>
                                    </div>
                                </ng-container>
                                <ng-container *ngSwitchCase="'FOLDER_PLUS_ISSUE'">
                                    <div class="text-ellipsis">
                        <span style="position: relative">
                          {{ parent.numOfFiles }}

                            חשבוניות


                            ע״ס
                            <span
                                    style="display: inline-block; direction: ltr"
                            >{{
                                parent.totalIncludeMaam
                                    | sum
                                }}</span
                            >
                            <!--                                               <span style="display: inline-block; direction: ltr;">{{roundAndAddCommaFunc(journalTransData[parent.idx].totalIncludeMaam)}}</span>-->
                            ש״ח

לא נקלטו בחשבשבת

                        </span>

                                    </div>

                                    <div class="text-ellipsis">
                                        <img
                                                [pTooltip]="parent.folderErrorDesc"
                                                [tooltipDisabled]="!parent.folderErrorDesc"
                                                height="15"
                                                src="/assets/images/infoTooltip.png"
                                                style="margin-left: 5px"
                                                tooltipPosition="top"
                                                width="15"
                                        />
                                        <div class="red" style="text-decoration:underline;color: #df0000;">קיימת בעיה
                                            בקליטת הקובץ לתוכנת הנה״ח
                                        </div>
                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>

                        <div
                                *ngFor="let child of parent.fileData"
                                [class.disabled]="parent.status === 'PERMANENT_COMMAND' || parent.status === 'FOLDER_PLUS_ISSUE'"
                                class="row"
                        >
                            <div>
                                <p-checkbox
                                        *ngIf="parent.status !== 'PERMANENT_COMMAND' && parent.status !== 'FOLDER_PLUS_ISSUE'"
                                        [binary]="true"
                                        [disabled]="child.disabledSelcetFile"
                                        [ngModel]="child.selcetFile"
                                        checkboxIcon="fa fa-check"
                                >
                                </p-checkbox>
                            </div>

                            <div style="display: flex">
                                <div
                                        [innerHTML]="
                    (child.invoiceDate | date: 'dd/MM/y') || '-'
                      | highlight: queryString
                  "
                                        [ngStyle]="{
                    'margin-right': child.invoiceDate !== null ? '0' : '12%'
                  }"
                                        class="text-ellipsis"
                                        style="flex: 80; text-align: right; max-width: none"
                                ></div>

                                <div
                                        style="
                    -webkit-box-flex: 45;
                    flex: 45;
                    text-align: center;
                    max-width: 40px;
                  "
                                >
                  <span
                          *ngIf="child.createdUser"
                          [class]="
                      child.accountant
                        ? 'icon-user-circle'
                        : 'icon-user-circle-o'
                    "
                          [matTooltip]="child.createdUser"
                          matTooltipPosition="below"
                          style="
                      color: #abaaaa;
                      vertical-align: middle;
                      cursor: pointer;
                      font-size: 16px;
                    "
                  ></span>

                                    <span
                                            *ngIf="
                      !child.createdUser &&
                      child.uploadSource === 'mail' &&
                      child.mail
                    "
                                            [class]="'icon-user-circle'"
                                            [matTooltip]="child.mail"
                                            matTooltipPosition="below"
                                            style="
                      color: #abaaaa;
                      vertical-align: middle;
                      cursor: pointer;
                      font-size: 16px;
                    "
                                    ></span>
                                </div>

                                <div
                                        style="
                    margin-left: 15px;
                    flex: 45;
                    text-align: center;
                    max-width: 40px;
                  "
                                >
                  <span
                          *ngIf="child.uploadSource"
                          [class]="'icon-' + child.uploadSource"
                          style="
                      color: #7f7e7e;
                      vertical-align: middle;
                      cursor: pointer;
                      font-size: 18px;
                    "
                  ></span>
                                </div>
                            </div>
                            <div class="text-ellipsis">
                                <div
                                        [innerHTML]="child.name || '-' | highlight: queryString"
                                        [ngStyle]="{
                    'margin-right': child.name !== null ? '0' : '12%'
                  }"
                                        class="text-ellipsis"
                                ></div>
                            </div>
                            <div class="text-ellipsis">
                                <div
                                        [innerHTML]="
                    child.oppositeCust || '-' | highlight: queryString
                  "
                                        [ngStyle]="{
                    'margin-right': child.oppositeCust !== null ? '0' : '12%'
                  }"
                                        class="text-ellipsis"
                                ></div>
                            </div>
                            <div>
                                <p-dropdown
                                        [(ngModel)]="child.maamMonthVal"
                                        [autoDisplayFirst]="false"
                                        [disabled]="true"

                                        [dropdownIcon]="'p-dropdown-icon'"
                                        [options]="vatList"
                                        [style]="{ width: '100px' }"
                                        class="maamMonthDD"
                                        placeholder="בחירה"
                                >
                                </p-dropdown>
                            </div>
                            <div class="text-ellipsis">
                                <div
                                        [innerHTML]="child.asmachta || '-' | highlight: queryString"
                                        [ngStyle]="{
                    'margin-right': child.asmachta !== null ? '0' : '12%'
                  }"
                                        class="text-ellipsis"
                                ></div>
                            </div>
                            <div
                                    class="text-ellipsis"
                                    style="display: flex; justify-content: space-between"
                            >
                                <div
                                        [ngStyle]="{
                    'margin-right':
                      child.totalIncludeMaam !== null ? '0' : '12%'
                  }"
                                        class="text-ellipsis"
                                >
                                    <ng-container
                                            *ngIf="child.totalIncludeMaam !== null; else empty"
                                    >
                                        <app-sum-view
                                                [highlight]="queryString"
                                                [sum]="child.totalIncludeMaam"
                                        ></app-sum-view>
                                        &nbsp;{{ 'ILS' | currencySymbol }}
                                    </ng-container>
                                    <ng-template #empty> -</ng-template>
                                </div>
                                <div
                                        *ngIf="child.childrenNum"
                                        [class.isChanged]="child.isChanged"
                                        [class.isDeleted]="child.isDeleted"
                                        class="childrenNum"
                                >
                                    <span>{{ child.childrenNum }}</span>
                                </div>
                            </div>
                            <div
                                    *ngIf="userService.appData && userService.appData.isAdmin"
                                    class="iconPic uniqueId"
                            >
                                <div
                                        [innerHTML]="child.uniqueId || '-' | highlight: queryString"
                                        [ngStyle]="{
                    'margin-right': child.uniqueId !== null ? '0' : '12%'
                  }"
                                        class="text-ellipsis"
                                ></div>
                            </div>
                            <div class="iconPic">
                                <mat-icon
                                        style="width: 17px; height: 17px; color: #939393"
                                        svgIcon="picIcon"
                                ></mat-icon>
                            </div>
                            <div>
                                <div>
                                    {{ child.maamPrcDesc }}
                                </div>
                                <!--                                <div [ngClass]="'flag-' + (file.flag ? 'active' : 'none')"-->
                                <!--                                     (click)="updateOcrDocumentData(file);"></div>-->
                                <!--                                <div [ngClass]="'note-' + (file.note ? 'active' : 'none')"-->
                                <!--                                     (click)="journalTransComponent.docNote.show(file); "></div>-->
                                <i
                                        *ngIf="parent.status !== 'PERMANENT_COMMAND' && parent.status !== 'FOLDER_PLUS_ISSUE'"
                                        class="fas fa-ellipsis-v"
                                ></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</ng-container>

<!--<ng-container *ngIf="showModalTransType">-->
<!--    <p-dialog (visibleChange)="aaa = false" [visible]="showModalTransType"-->
<!--                appendTo="body"-->
<!--                [modal]="true"-->
<!--                [resizable]="false"-->
<!--                styleClass="modalTransType">-->

<!--        <h2>-->
<!--            סוגי תנועה!-->
<!--        </h2>-->

<!--        <ul>-->
<!--            <li>-->
<!--                <p>-->
<!--                    <strong>-->
<!--                        הוספנו-->
<!--                    </strong>-->
<!--                    את השימוש בסוגי תנועה לחברה-->
<!--                </p>-->
<!--            </li>-->
<!--            <li>-->
<!--                <p>-->
<!--                    אנו מביאים-->
<!--                    <strong>-->
<!--                        אוטומטית-->
<!--                    </strong>-->
<!--                    את סוגי התנועה הכלליים של כל חברה-->
<!--                </p>-->
<!--            </li>-->
<!--            <li>-->
<!--                <p>-->
<!--                    <strong>-->
<!--                        ניתן להוסיף ולשנות-->
<!--                    </strong>-->
<!--                    את סוגי התנועה במערכת מתוך הסוגים שקיימים בהנה”ח-->
<!--                </p>-->
<!--            </li>-->
<!--            <li>-->
<!--                <p>-->
<!--                    סוגי התנועה ניתנים להוספה ושינוי-->

<!--                    <strong>-->
<!--                        במסך נתוני חברה בטאב סוגי תנועה-->
<!--                    </strong>-->
<!--                </p>-->
<!--            </li>-->

<!--            <li class="tip">-->
<!--                <p>-->
<!--                    <strong>-->
<!--                        יש לבדוק ולאשר את סוגי התנועה שזוהו אוטומטית ע”י המערכת-->
<!--                    </strong>-->
<!--                </p>-->
<!--            </li>-->
<!--        </ul>-->

<!--        <div [routerLink]="['/accountants/companies/general/transType']"-->
<!--             -->
<!--             class="approve"-->
<!--             routerLinkActive="active"-->
<!--             [routerLinkActiveOptions]="{ exact: true }"-->
<!--             queryParamsHandling="merge">-->
<!--            <span>-->
<!--                אשרו את סוגי התנועה-->
<!--            </span>-->
<!--        </div>-->

<!--        <div (click)="updateTransTypeStatus()" class="updateTransTypeStatus">-->
<!--           <span>-->
<!--    לא כרגע, עד ההגדרה המערכת תעבוד  ללא סוגי תנועה-->
<!--           </span>-->
<!--        </div>-->
<!--    </p-dialog>-->
<!--</ng-container>-->
