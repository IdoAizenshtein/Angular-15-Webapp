<div class="menu-dd menu-with-panel" style="position: relative">
	<div
			#selector
			(click)="togglePanel()"
			[class.opened]="showPanelDD"
			class="advancedSearchBtn"
	>
		{{ title }}
	</div>
	<div
			(closed)="showPanelDD = false"
			*ngIf="showPanelDD"
			[@slideInOutDD]
			appClickDocument
			class="panelDD advancedSearchPanel"
	>
		<form [formGroup]="advancedSearchParams" novalidate>
			<div class="rows-advancedSearchParams">
				<div class="row">
					<div class="label">שם ספק/לקוח/מסמך</div>
					<div class="content">
						<input autocomplete="off" formControlName="fileName" type="text"/>
					</div>
				</div>
				<div class="row">
					<div class="label">ח.פ</div>
					<div class="content">
						<input
								[ngClass]="{
                err:
                  advancedSearchParams.get('supplierHp').value &&
                  advancedSearchParams.get('supplierHp').errors &&
                  (advancedSearchParams.get('supplierHp').errors.idILInvalid ||
                    advancedSearchParams.get('supplierHp').errors.minlength)
              }"
								appNumbersOnly
								autocomplete="off"
								formControlName="supplierHp"
								maxlength="9"
								type="text"
						/>
					</div>
				</div>
				<div class="row">
					<div class="label">תאריך העלאה</div>
					<div class="content flexRow">
						<label class="labelFlex" for="sendDateFrom"> מ- </label>
						<p-calendar
								#transDateSelector
								(onSelect)="changeDatesFrequencyDesc('sendDateFrom')"
								[inputStyle]="{ 'max-width': '121px' }"
								[locale]="'langCalendar' | translate"
								[ngClass]="{
                err:
                  !advancedSearchParams.get('sendDateFrom').value &&
                  advancedSearchParams.get('sendDateTill').value
              }"
								dateFormat="d/m/y"
								formControlName="sendDateFrom"
								id="sendDateFrom"
								inputId="sendDateFrom"
						>
						</p-calendar>
						<span style="padding: 0px 12.5px"></span>
						<label class="labelFlex" for="sendDateTill"> עד- </label>
						<p-calendar
								(onSelect)="changeDatesFrequencyDesc('sendDateTill')"
								[inputStyle]="{ 'max-width': '121px' }"
								[locale]="'langCalendar' | translate"
								[ngClass]="{
                err:
                  advancedSearchParams.get('sendDateFrom').value &&
                  !advancedSearchParams.get('sendDateTill').value
              }"
								dateFormat="d/m/y"
								formControlName="sendDateTill"
								id="sendDateTill"
								inputId="sendDateTill"
						>
						</p-calendar>
					</div>
				</div>
				<div class="row">
					<div class="label">תאריך חשבונית</div>
					<div class="content flexRow">
						<label class="labelFlex" for="invoiceDateFrom"> מ- </label>
						<p-calendar
								#transDateSelector2
								(onSelect)="changeDatesFrequencyDesc('invoiceDateFrom')"
								[inputStyle]="{ 'max-width': '121px' }"
								[locale]="'langCalendar' | translate"
								[ngClass]="{
                err:
                  !advancedSearchParams.get('invoiceDateFrom').value &&
                  advancedSearchParams.get('invoiceDateTill').value
              }"
								dateFormat="d/m/y"
								formControlName="invoiceDateFrom"
								id="invoiceDateFrom"
								inputId="invoiceDateFrom"
						>
						</p-calendar>
						<span style="padding: 0px 12.5px"></span>
						
						<label class="labelFlex" for="invoiceDateTill"> עד- </label>
						<p-calendar
								(onSelect)="changeDatesFrequencyDesc('invoiceDateTill')"
								[inputStyle]="{ 'max-width': '121px' }"
								[locale]="'langCalendar' | translate"
								[ngClass]="{
                err:
                  advancedSearchParams.get('invoiceDateFrom').value &&
                  !advancedSearchParams.get('invoiceDateTill').value
              }"
								dateFormat="d/m/y"
								formControlName="invoiceDateTill"
								id="invoiceDateTill"
								inputId="invoiceDateTill"
						>
						</p-calendar>
					</div>
				</div>
				<div class="row">
					<div class="label">אסמכתא</div>
					<div class="content">
						<input autocomplete="off" formControlName="asmachta" type="text"/>
					</div>
				</div>
				<div class="row">
					<div class="label">סכום לפני מע״מ</div>
					<div class="content flexRow">
						<label class="labelFlex" for="totalBeforeMaamFrom"> מ- </label>
						<input
								[ngClass]="{
                err:
                  !advancedSearchParams.get('totalBeforeMaamFrom').value &&
                  advancedSearchParams.get('totalbeforeMaamTill').value
              }"
								appNumbersOnly="numWithTwoDec"
								autocomplete="off"
								formControlName="totalBeforeMaamFrom"
								id="totalBeforeMaamFrom"
								type="text"
						/>
						<span style="padding: 0px 12.5px"></span>
						
						<label class="labelFlex" for="totalbeforeMaamTill"> עד- </label>
						<input
								[ngClass]="{
                err:
                  advancedSearchParams.get('totalBeforeMaamFrom').value &&
                  !advancedSearchParams.get('totalbeforeMaamTill').value
              }"
								appNumbersOnly="numWithTwoDec"
								autocomplete="off"
								formControlName="totalbeforeMaamTill"
								id="totalbeforeMaamTill"
								type="text"
						/>
					</div>
				</div>
				<div class="row">
					<div class="label">סכום כולל מע״מ</div>
					<div class="content flexRow">
						<label class="labelFlex" for="totalIncludeMaamFrom"> מ- </label>
						<input
								[ngClass]="{
                err:
                  !advancedSearchParams.get('totalIncludeMaamFrom').value &&
                  advancedSearchParams.get('totalIncludeMaamTill').value
              }"
								appNumbersOnly="numWithTwoDec"
								autocomplete="off"
								formControlName="totalIncludeMaamFrom"
								id="totalIncludeMaamFrom"
								type="text"
						/>
						<span style="padding: 0px 12.5px"></span>
						
						<label class="labelFlex" for="totalIncludeMaamTill"> עד- </label>
						<input
								[ngClass]="{
                err:
                  advancedSearchParams.get('totalIncludeMaamFrom').value &&
                  !advancedSearchParams.get('totalIncludeMaamTill').value
              }"
								appNumbersOnly="numWithTwoDec"
								autocomplete="off"
								formControlName="totalIncludeMaamTill"
								id="totalIncludeMaamTill"
								type="text"
						/>
					</div>
				</div>
				<div class="row">
					<div class="label">כרטיס</div>
					<div class="content flexRow">
						<label class="labelFlex" for="custFrom"> מ- </label>
						<p-dropdown
								#formDropdowns
								(onFocus)="clearFilter(formDropdowns)"
								[autoDisplayFirst]="false"
								[filter]="true"
								[dropdownIcon]="'fa fa-fw fa-caret-down'"
								[ngClass]="{
                err:
                  !advancedSearchParams.get('custFrom').value &&
                  advancedSearchParams.get('custTill').value
              }"
								[options]="
                userService.appData.userData.companyCustomerDetails.all
              "
								[style]="{ width: '68px' }"
								dataKey="custId"
								emptyFilterMessage="לא נמצאו תוצאות"
								filterBy="lName,custId,hp"
								formControlName="custFrom"
								
								id="custFrom"
								optionLabel="custId"
								panelStyleClass="company-customer-dropdown-panel cardsDD"
								placeholder=""
						>
							<ng-template let-item pTemplate="selectedItem">
                <span
		                #spanElement
		                [pTooltip]="item.cartisName"
		                [tooltipDisabled]="
                    spanElement.offsetWidth >= spanElement.scrollWidth
                  "
		                style="
                    vertical-align: middle;
                    display: block;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                  "
		                tooltipPosition="top"
                >{{ item.custId }}</span
                >
							</ng-template>
							<ng-template let-item pTemplate="item">
								<div class="p-helper-clearfix" style="flex: 1">
									<div>
										<span class="text-ellipsis">{{ item.custId }}</span>
									</div>
									<div
											*ngIf="item.lName || item.hp"
											class="separator"
									>
										<span>-</span>
									</div>
									<div>
                    <span *ngIf="item.lName" class="text-ellipsis">{{
	                    item.lName
	                    }}</span>
										<span *ngIf="item.hp" class="text-ellipsis secondary">
                      ח.פ./ע.מ. {{ item.hp }}</span
										>
									</div>
								</div>
							</ng-template>
						</p-dropdown>
						
						<span style="padding: 0px 12.5px"></span>
						
						<label class="labelFlex" for="custTill"> עד- </label>
						<p-dropdown
								#formDropdowns1
								(onFocus)="clearFilter(formDropdowns1)"
								[autoDisplayFirst]="false"
								[filter]="true"
								[dropdownIcon]="'fa fa-fw fa-caret-down'"
								[ngClass]="{
                err:
                  advancedSearchParams.get('custFrom').value &&
                  !advancedSearchParams.get('custTill').value
              }"
								[options]="
                userService.appData.userData.companyCustomerDetails.all
              "
								[style]="{ width: '68px' }"
								dataKey="custId"
								emptyFilterMessage="לא נמצאו תוצאות"
								filterBy="lName,custId,hp"
								formControlName="custTill"
								id="custTill"
								
								optionLabel="custId"
								panelStyleClass="company-customer-dropdown-panel cardsDD"
								placeholder=""
						>
							<ng-template let-item pTemplate="selectedItem">
                <span
		                #spanElement
		                [pTooltip]="item.cartisName"
		                [tooltipDisabled]="
                    spanElement.offsetWidth >= spanElement.scrollWidth
                  "
		                style="
                    vertical-align: middle;
                    display: block;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                  "
		                tooltipPosition="top"
                >{{ item.custId }}</span
                >
							</ng-template>
							<ng-template let-item pTemplate="item">
								<div class="p-helper-clearfix" style="flex: 1">
									<div>
										<span class="text-ellipsis">{{ item.custId }}</span>
									</div>
									<div
											*ngIf="item.lName || item.hp"
											class="separator"
									>
										<span>-</span>
									</div>
									<div>
                    <span *ngIf="item.lName" class="text-ellipsis">{{
	                    item.lName
	                    }}</span>
										<span *ngIf="item.hp" class="text-ellipsis secondary">
                      ח.פ./ע.מ. {{ item.hp }}</span
										>
									</div>
								</div>
							</ng-template>
						</p-dropdown>
					</div>
				</div>
				<div class="row">
					<div class="label">מספר מנה</div>
					<div class="content">
						<input
								appNumbersOnly="regexPositiveInt"
								autocomplete="off"
								formControlName="batchNumber"
								type="text"
						/>
					</div>
				</div>
				<div class="row">
					<div>
						<div>
							<p-checkbox [binary]="true"
							            [label]="'סטטוס נקלט'"
							            checkboxIcon="fa fa-check"
							            formControlName="niklat"
							            id="p-niklat"
							            inputId="niklat"
							>
							</p-checkbox>
							<span style="padding: 0px 12.5px"></span>
							<p-checkbox [binary]="true"
							            [label]="'סטטוס ממתין לקליטה'"
							            checkboxIcon="fa fa-check"
							            formControlName="mamtinLeklita"
							            id="p-mamtinLeklita"
							            inputId="mamtinLeklita"
							>
							</p-checkbox>
						</div>
					</div>
				</div>
			</div>
			
			<div class="btns">
				<button (click)="togglePanel()" class="button-link" type="button">
					{{ 'actions.cancellation' | translate }}
				</button>
				<button (click)="search()" class="button-dark" type="button">
					חיפוש
				</button>
			</div>
		</form>
	</div>
</div>
